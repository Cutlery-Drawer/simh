
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>1. VAX-11/780 simulator usage &#8212; Python  documentation</title>
    <link rel="stylesheet" type="text/css" href="static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="static/documentation_options.js"></script>
    <script src="static/jquery.js"></script>
    <script src="static/underscore.js"></script>
    <script src="static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="1. VAX (MicroVAX 3900) simulator usage" href="vax_doc.html" />
    <link rel="prev" title="1. PDP-11 simulator usage" href="pdp11_doc.html" />
   
  <link rel="stylesheet" href="static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="vax-11-780-simulator-usage">
<h1><span class="sectnum">1. </span>VAX-11/780 simulator usage<a class="headerlink" href="#vax-11-780-simulator-usage" title="Permalink to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2021-08-08</p>
</dd>
<dt class="field-even">Revision<span class="colon">:</span></dt>
<dd class="field-even"><p>$Format:%H$</p>
</dd>
<dt class="field-odd">Copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>See <a class="reference external" href="../LICENSE.txt">LICENSE.txt</a> for terms of use.</p>
</dd>
</dl>
<aside class="topic">
<p class="topic-title"><strong>Copyright notice</strong></p>
<p>The following copyright notice applies to the SIMH source, binary, and documentation:</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the “Software”),
to deal in the Software without restriction, including without limitation
the rights to use, copy, modify, merge, publish, distribute, sublicense,
and/or sell copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<p>Except as contained in this notice, the names of The Authors shall not be
used in advertising or otherwise to promote the sale, use or other dealings
in this Software without prior written authorization from the Authors.</p>
</aside>
<nav class="contents local" id="contents">
<ul class="auto-toc simple">
<li><p><a class="reference internal" href="#simulator-files" id="id5"><span class="sectnum">1.1. </span>Simulator files</a></p></li>
<li><p><a class="reference internal" href="#vax780-features" id="id6"><span class="sectnum">1.2. </span>VAX780 features</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#cpu-and-system-devices" id="id7"><span class="sectnum">1.2.1. </span>CPU and system devices</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#cpu" id="id8"><span class="sectnum">1.2.1.1. </span>CPU</a></p></li>
<li><p><a class="reference internal" href="#translation-buffer-tlb" id="id9"><span class="sectnum">1.2.1.2. </span>Translation buffer (TLB)</a></p></li>
<li><p><a class="reference internal" href="#sbi-controller-sbi" id="id10"><span class="sectnum">1.2.1.3. </span>SBI controller (SBI)</a></p></li>
<li><p><a class="reference internal" href="#memory-controllers-mctl0-mctl1" id="id11"><span class="sectnum">1.2.1.4. </span>Memory controllers (MCTL0, MCTL1)</a></p></li>
<li><p><a class="reference internal" href="#time-of-day-clock-todr" id="id12"><span class="sectnum">1.2.1.5. </span>Time-of-day clock (TODR)</a></p></li>
<li><p><a class="reference internal" href="#interval-timer-tmr" id="id13"><span class="sectnum">1.2.1.6. </span>Interval timer (TMR)</a></p></li>
<li><p><a class="reference internal" href="#unibus-adapter-uba" id="id14"><span class="sectnum">1.2.1.7. </span>Unibus adapter (UBA)</a></p></li>
<li><p><a class="reference internal" href="#massbus-adapters-mba0-mba1" id="id15"><span class="sectnum">1.2.1.8. </span>Massbus adapters (MBA0, MBA1)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#i-o-device-addressing" id="id16"><span class="sectnum">1.2.2. </span>I/O device addressing</a></p></li>
<li><p><a class="reference internal" href="#programmed-i-o-devices" id="id17"><span class="sectnum">1.2.3. </span>Programmed I/O devices</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#console-input-tti" id="id18"><span class="sectnum">1.2.3.1. </span>Console input (TTI)</a></p></li>
<li><p><a class="reference internal" href="#console-output-tto" id="id19"><span class="sectnum">1.2.3.2. </span>Console output (TTO)</a></p></li>
<li><p><a class="reference internal" href="#rx01-console-floppy-disk-rxc" id="id20"><span class="sectnum">1.2.3.3. </span>RX01 console floppy disk (RXC)</a></p></li>
<li><p><a class="reference internal" href="#line-printer-lpt" id="id21"><span class="sectnum">1.2.3.4. </span>Line printer (LPT)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#disks" id="id22"><span class="sectnum">1.2.4. </span>Disks</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#rp04-05-06-07-rm02-03-05-80-disk-pack-drives-rp" id="id23"><span class="sectnum">1.2.4.1. </span>RP04/05/06/07, RM02/03/05/80 disk pack drives (RP)</a></p></li>
<li><p><a class="reference internal" href="#rl11-rl01-rl02-cartridge-disk-rl" id="id24"><span class="sectnum">1.2.4.2. </span>RL11/RL01/RL02 cartridge disk (RL)</a></p></li>
<li><p><a class="reference internal" href="#rk611-rk06-rk07-cartridge-disk-hk" id="id25"><span class="sectnum">1.2.4.3. </span>RK611/RK06/RK07 cartridge disk (HK)</a></p></li>
<li><p><a class="reference internal" href="#uda50-mscp-disk-controllers-rq-rqb-rqc-rqd" id="id26"><span class="sectnum">1.2.4.4. </span>UDA50 MSCP disk controllers (RQ, RQB, RQC, RQD)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#tapes" id="id27"><span class="sectnum">1.2.5. </span>Tapes</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#tm03-te16-tu45-tu77-magnetic-tapes-tu" id="id28"><span class="sectnum">1.2.5.1. </span>TM03/TE16/TU45/TU77 magnetic tapes (TU)</a></p></li>
<li><p><a class="reference internal" href="#ts11-magnetic-tape-ts" id="id29"><span class="sectnum">1.2.5.2. </span>TS11 magnetic tape (TS)</a></p></li>
<li><p><a class="reference internal" href="#tuk50-tmscp-tape-controller-tq" id="id30"><span class="sectnum">1.2.5.3. </span>TUK50 TMSCP tape controller (TQ)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#communications-devices" id="id31"><span class="sectnum">1.2.6. </span>Communications devices</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#dz11-terminal-multiplexer-dz" id="id32"><span class="sectnum">1.2.6.1. </span>DZ11 terminal multiplexer (DZ)</a></p></li>
<li><p><a class="reference internal" href="#dhu11-terminal-multiplexer-vh" id="id33"><span class="sectnum">1.2.6.2. </span>DHU11 terminal multiplexer (VH)</a></p></li>
<li><p><a class="reference internal" href="#delua-deuna-unibus-ethernet-controllers-xu-xub" id="id34"><span class="sectnum">1.2.6.3. </span>DELUA/DEUNA Unibus Ethernet controllers (XU, XUB)</a></p></li>
<li><p><a class="reference internal" href="#dmc11-dmr11-unibus-ddcmp-controllers" id="id35"><span class="sectnum">1.2.6.4. </span>DMC11/DMR11 Unibus DDCMP controllers</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#symbolic-display-and-input" id="id36"><span class="sectnum">1.3. </span>Symbolic display and input</a></p></li>
</ul>
</nav>
<p>This memorandum documents the DEC VAX-11/780 simulator.</p>
<section id="simulator-files">
<h2><span class="sectnum">1.1. </span>Simulator files<a class="headerlink" href="#simulator-files" title="Permalink to this heading">¶</a></h2>
<p>To compile the VAX-11/780, you must define <code class="docutils literal notranslate"><span class="pre">VM_VAX</span></code>, <code class="docutils literal notranslate"><span class="pre">VAX780</span></code>, and <code class="docutils literal notranslate"><span class="pre">USE_INT64</span></code> as part of the compilation command-line.
To enable extended file support (files greater than 2GB), you must define <code class="docutils literal notranslate"><span class="pre">USE_ADDR64</span></code> as part of the command-line as well.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">sim/</span></code></dt><dd><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">scp.h</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sim_console.h</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sim_defs.h</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sim_disk.h</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sim_ether.h</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sim_fio.h</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sim_rev.h</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sim_serial.h</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sim_sock.h</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sim_tape.h</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sim_timer.h</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sim_tmxr.h</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">scp.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sim_console.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sim_disk.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sim_ether.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sim_fio.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sim_serial.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sim_sock.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sim_tape.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sim_timer.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">sim_tmxr.c</span></code></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sim/vax/</span></code></dt><dd><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">vax_defs.h</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">vax780_defs.h</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">vax_vmb_exe.h</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">vax_cis.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">vax_cmode.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">vax_cpu.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">vax_cpu1.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">vax_fpa.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">vax_mmu.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">vax_octa.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">vax_sys.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">vax_syscm.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">vax7x0_mba.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">vax780_mem.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">vax780_sbi.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">vax780_stddev.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">vax780_syslist.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">vax780_uba.c</span></code></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sim/pdp11/</span></code></dt><dd><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">pdp11_cr_dat.h</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">pdp11_mscp.h</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">pdp11_uqssp.h</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">pdp11_xu.h</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">pdp11_cr.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">pdp11_dmc.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">pdp11_dz.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">pdp11_hk.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">pdp11_lp.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">pdp11_rl.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">pdp11_rp.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">pdp11_rq.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">pdp11_ry.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">pdp11_tq.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">pdp11_ts.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">pdp11_tu.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">pdp11_vh.c</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">pdp11_xu.c</span></code></div>
</div>
</dd>
</dl>
<p>Additional files are:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">sim/vax/</span></code></dt><dd><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">vmb.exe</span></code> (Standard boot code)</div>
</div>
</dd>
</dl>
</section>
<section id="vax780-features">
<h2><span class="sectnum">1.2. </span>VAX780 features<a class="headerlink" href="#vax780-features" title="Permalink to this heading">¶</a></h2>
<p>The VAX780 simulator is configured as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Device name(s)</p></th>
<th class="head"><p>Simulates</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CPU</span></code></p></td>
<td><p>VAX-11/780 CPU</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TLB</span></code></p></td>
<td><p>Translation buffer</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SBI</span></code></p></td>
<td><p>System bus controller</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">MCTL0</span></code>, <code class="docutils literal notranslate"><span class="pre">MTCL1</span></code></p></td>
<td><p>Memory controllers, MS780C with 4MB memory each, or MS780E with 8MB-64MB each</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">UBA</span></code></p></td>
<td><p>DW780 Unibus adapter</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">MBA0</span></code>, <code class="docutils literal notranslate"><span class="pre">MBA1</span></code></p></td>
<td><p>RH780 Massbus adapters</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TODR</span></code></p></td>
<td><p>Time-of-day clock</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TMR</span></code></p></td>
<td><p>Interval timer</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TTI</span></code>, <code class="docutils literal notranslate"><span class="pre">TTO</span></code></p></td>
<td><p>Console terminal</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RXC</span></code></p></td>
<td><p>Console RX01 floppy disk</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DZ</span></code></p></td>
<td><p>DZ11 8-line terminal multiplexer (up to 32)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VH</span></code></p></td>
<td><p>DHU11 16-line terminal multiplexer (up to 4)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CR</span></code></p></td>
<td><p>CR11 card reader</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">LPT</span></code></p></td>
<td><p>LP11 line printer</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RP</span></code></p></td>
<td><p>RP04/05/06/07, RM02/03/05/80 Massbus disks, up to eight</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">HK</span></code></p></td>
<td><p>RK611/RK06(7) cartridge disk controller with eight drives</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RL</span></code></p></td>
<td><p>RL11/RL01(2) cartridge disk controller with four drives</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RQ</span></code></p></td>
<td><p>UDA50 MSCP controller with four drives</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RQB</span></code></p></td>
<td><p>Second UDA50 MSCP controller with four drives</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RQC</span></code></p></td>
<td><p>Third UDA50 MSCP controller with four drives</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RQD</span></code></p></td>
<td><p>Fourth UDA50 MSCP controller with four drives</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RY</span></code></p></td>
<td><p>RX211 floppy disk controller with two drives</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TS</span></code></p></td>
<td><p>TS11 magnetic tape controller with one drive</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TQ</span></code></p></td>
<td><p>TUK50 TMSCP magnetic tape controller with four drives</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TU</span></code></p></td>
<td><p>TM03 tape formatter with eight TE16/TU45/TU77 drives</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">XU</span></code></p></td>
<td><p>DEUNA/DELUA Ethernet controller</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">XUB</span></code></p></td>
<td><p>Second DEUNA/DELUA Ethernet controller</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DMC</span></code></p></td>
<td><p>DMC11/DMR11 Synchronous network controller</p></td>
</tr>
</tbody>
</table>
<p>The DZ, VH, LPT, RP, RL, RQ, RQB, RQC, RQD, RY, TS, TQ, TU, XU, XUB and DMC devices can be set <code class="docutils literal notranslate"><span class="pre">DISABLED</span></code>.
RQB, RQC, RQD, VH, XU, XUB and DMC are disabled by default.</p>
<p>The VAX780 simulator implements several unique stop conditions:</p>
<ul class="simple">
<li><p>Change mode to interrupt stack</p></li>
<li><p>Illegal vector (<code class="docutils literal notranslate"><span class="pre">bits&lt;1:0&gt;</span></code> = 2 or 3)</p></li>
<li><p>Unexpected exception during interrupt or exception</p></li>
<li><p>Process PTE in P0 or P1 space instead of system space</p></li>
<li><p>Unknown IPL</p></li>
<li><p>Infinite loop (BRB/W to self at <code class="docutils literal notranslate"><span class="pre">IPL</span> <span class="pre">1F</span></code>)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">LOAD</span></code> command supports a simple binary format,
consisting of a stream of binary bytes without origin or checksum, for loading memory.
The <code class="docutils literal notranslate"><span class="pre">DUMP</span></code> command is not implemented.</p>
<section id="cpu-and-system-devices">
<h3><span class="sectnum">1.2.1. </span>CPU and system devices<a class="headerlink" href="#cpu-and-system-devices" title="Permalink to this heading">¶</a></h3>
<section id="cpu">
<h4><span class="sectnum">1.2.1.1. </span>CPU<a class="headerlink" href="#cpu" title="Permalink to this heading">¶</a></h4>
<p>CPU options include the size of main memory and the treatment of the HALT instruction.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">CPU</span> <span class="mi">8</span><span class="n">M</span>                    <span class="n">Set</span> <span class="n">memory</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">8</span><span class="n">MB</span>
<span class="n">SET</span> <span class="n">CPU</span> <span class="mi">16</span><span class="n">M</span>                   <span class="n">Set</span> <span class="n">memory</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">16</span><span class="n">MB</span>
<span class="n">SET</span> <span class="n">CPU</span> <span class="mi">32</span><span class="n">M</span>                   <span class="n">Set</span> <span class="n">memory</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">32</span><span class="n">MB</span>
<span class="n">SET</span> <span class="n">CPU</span> <span class="mi">48</span><span class="n">M</span>                   <span class="n">Set</span> <span class="n">memory</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">48</span><span class="n">MB</span>
<span class="n">SET</span> <span class="n">CPU</span> <span class="mi">64</span><span class="n">M</span>                   <span class="n">Set</span> <span class="n">memory</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">64</span><span class="n">MB</span>
<span class="n">SET</span> <span class="n">CPU</span> <span class="mi">128</span><span class="n">M</span>                  <span class="n">Set</span> <span class="n">memory</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">128</span><span class="n">MB</span>
</pre></div>
</div>
<p>The CPU also implements a command to display a virtual to physical address translation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SHOW</span> <span class="p">{</span><span class="o">-</span><span class="n">kesu</span><span class="p">}</span> <span class="n">CPU</span> <span class="n">VIRTUAL</span><span class="o">=</span><span class="n">n</span>    <span class="n">Show</span> <span class="n">translation</span> <span class="k">for</span> <span class="n">address</span> <span class="n">n</span>
                              <span class="ow">in</span> <span class="n">kernel</span><span class="o">/</span><span class="n">exec</span><span class="o">/</span><span class="n">supervisor</span><span class="o">/</span><span class="n">user</span> <span class="n">mode</span>
</pre></div>
</div>
<p>The CPU also implements the console <code class="docutils literal notranslate"><span class="pre">AUTORESTART</span></code> switch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">CPU</span> <span class="n">CONHALT</span>               <span class="n">Enable</span> <span class="n">AUTORESTART</span>
<span class="n">SET</span> <span class="n">CPU</span> <span class="n">SIMHALT</span>               <span class="n">Disable</span> <span class="n">AUTORESTART</span>
</pre></div>
</div>
<p>Notes on memory size:</p>
<ul class="simple">
<li><p>The first version of the VAX-11/780 used MS780C controllers,
which supported 1-4MB of memory per controller.
This is the only memory controller recognized by VMS V1.
MS780E controllers supported 4MB-64MB per controller.</p></li>
<li><p>The controller type is set automatically based on memory size.</p></li>
</ul>
<p>Initial memory size is 8MB.</p>
<p>Memory can be loaded with a binary byte stream using the <code class="docutils literal notranslate"><span class="pre">LOAD</span></code> command.
The <code class="docutils literal notranslate"><span class="pre">LOAD</span></code> command recognizes three switches:</p>
<dl class="option-list">
<dt><kbd><span class="option">-o</span></kbd></dt>
<dd><p>Origin argument follows filename</p>
</dd>
<dt><kbd><span class="option">-r</span></kbd></dt>
<dd><p>Load ROM in memory controller 0</p>
</dd>
<dt><kbd><span class="option">-s</span></kbd></dt>
<dd><p>Load ROM in memory controller 1</p>
</dd>
</dl>
<p>These switches are recognized when examining or depositing in CPU memory:</p>
<dl class="option-list">
<dt><kbd><span class="option">-b</span></kbd></dt>
<dd><p>Examine/deposit bytes</p>
</dd>
<dt><kbd><span class="option">-w</span></kbd></dt>
<dd><p>Examine/deposit words</p>
</dd>
<dt><kbd><span class="option">-l</span></kbd></dt>
<dd><p>Examine/deposit longwords</p>
</dd>
<dt><kbd><span class="option">-d</span></kbd></dt>
<dd><p>Data radix is decimal</p>
</dd>
<dt><kbd><span class="option">-o</span></kbd></dt>
<dd><p>Data radix is octal</p>
</dd>
<dt><kbd><span class="option">-h</span></kbd></dt>
<dd><p>Data radix is hexadecimal</p>
</dd>
<dt><kbd><span class="option">-m</span></kbd></dt>
<dd><p>Examine (only) VAX instructions</p>
</dd>
<dt><kbd><span class="option">-p</span></kbd></dt>
<dd><p>Examine/deposit PDP-11 (compatibility mode) instructions</p>
</dd>
<dt><kbd><span class="option">-r</span></kbd></dt>
<dd><p>Examine (only) RADIX50 encoded data</p>
</dd>
<dt><kbd><span class="option">-v</span></kbd></dt>
<dd><p>Interpret address as virtual, current mode</p>
</dd>
<dt><kbd><span class="option">-k</span></kbd></dt>
<dd><p>Interpret address as virtual, kernel mode</p>
</dd>
<dt><kbd><span class="option">-e</span></kbd></dt>
<dd><p>Interpret address as virtual, executive mode</p>
</dd>
<dt><kbd><span class="option">-s</span></kbd></dt>
<dd><p>Interpret address as virtual, supervisor mode</p>
</dd>
<dt><kbd><span class="option">-u</span></kbd></dt>
<dd><p>Interpret address as virtual, user mode</p>
</dd>
</dl>
<p>CPU registers include the visible state of the processor as well as the control registers for the interrupt system.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PC</span></code></p></td>
<td><p>32</p></td>
<td><p>Program counter</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">R0</span></code> .. <code class="docutils literal notranslate"><span class="pre">R14</span></code></p></td>
<td><p>32</p></td>
<td><p>R0 to R14</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AP</span></code></p></td>
<td><p>32</p></td>
<td><p>Alias for R12</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">FP</span></code></p></td>
<td><p>32</p></td>
<td><p>Alias for R13</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SP</span></code></p></td>
<td><p>32</p></td>
<td><p>Alias for R14</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PSL</span></code></p></td>
<td><p>32</p></td>
<td><p>Processor status longword</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CC</span></code></p></td>
<td><p>4</p></td>
<td><p>Condition codes, PSL&lt;3:0&gt;</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">KSP</span></code></p></td>
<td><p>32</p></td>
<td><p>Kernel stack pointer</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ESP</span></code></p></td>
<td><p>32</p></td>
<td><p>Executive stack pointer</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">SSP</span></code></p></td>
<td><p>32</p></td>
<td><p>Supervisor stack pointer</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">USP</span></code></p></td>
<td><p>32</p></td>
<td><p>User stack pointer</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">IS</span></code></p></td>
<td><p>32</p></td>
<td><p>Interrupt stack pointer</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SCBB</span></code></p></td>
<td><p>32</p></td>
<td><p>System control block base</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PCBB</span></code></p></td>
<td><p>32</p></td>
<td><p>Process control block base</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">P0BR</span></code></p></td>
<td><p>32</p></td>
<td><p>P0 base register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">P0LR</span></code></p></td>
<td><p>22</p></td>
<td><p>P0 length register</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">P1BR</span></code></p></td>
<td><p>32</p></td>
<td><p>P1 base register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">P1LR</span></code></p></td>
<td><p>22</p></td>
<td><p>P1 length register</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SBR</span></code></p></td>
<td><p>32</p></td>
<td><p>System base register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">SLR</span></code></p></td>
<td><p>22</p></td>
<td><p>System length register</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SISR</span></code></p></td>
<td><p>16</p></td>
<td><p>Software interrupt summary register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ASTLVL</span></code></p></td>
<td><p>4</p></td>
<td><p>AST level register</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">MAPEN</span></code></p></td>
<td><p>1</p></td>
<td><p>Memory management enable</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PME</span></code></p></td>
<td><p>1</p></td>
<td><p>Performance monitor enable</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TRPIRQ</span></code></p></td>
<td><p>8</p></td>
<td><p>Trap/interrupt pending</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CRDERR</span></code></p></td>
<td><p>1</p></td>
<td><p>Correctible read data error flag</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">MEMERR</span></code></p></td>
<td><p>1</p></td>
<td><p>Memory error flag</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PCQ[0:63]</span></code></p></td>
<td><p>32</p></td>
<td><p>PC prior to last PC change or interrupt;
most recent PC change first</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">WRU</span></code></p></td>
<td><p>8</p></td>
<td><p>Interrupt character</p></td>
</tr>
</tbody>
</table>
<p>The CPU attempts to detect when the simulator is idle.
When idle, the simulator does not use any resources on the host system.
Idle detection is controlled by the <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">IDLE</span></code> and <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">NOIDLE</span></code> commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">CPU</span> <span class="n">IDLE</span><span class="p">{</span><span class="o">=</span><span class="n">platform</span><span class="p">}{:</span><span class="n">n</span><span class="p">}</span>  <span class="n">Enable</span> <span class="n">idle</span> <span class="n">detection</span> <span class="k">for</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">platform</span><span class="o">.</span>
                             <span class="n">Supported</span> <span class="n">platform</span> <span class="n">names</span> <span class="n">are</span><span class="p">:</span>
                             <span class="n">VMS</span><span class="p">,</span> <span class="n">ULTRIX</span><span class="p">,</span> <span class="n">ULTRIXOLD</span><span class="p">,</span> <span class="n">ULTRIX</span><span class="o">-</span><span class="mf">1.</span><span class="n">X</span><span class="p">,</span> <span class="mi">3</span><span class="n">BSD</span><span class="p">,</span>
                             <span class="mf">4.0</span><span class="n">BSD</span><span class="p">,</span> <span class="mf">4.1</span><span class="n">BSD</span><span class="p">,</span> <span class="mf">4.2</span><span class="n">BSD</span><span class="p">,</span> <span class="n">QUASIJARUS</span><span class="p">,</span> <span class="n">NETBSD</span><span class="p">,</span>
                             <span class="n">NETBSDOLD</span><span class="p">,</span> <span class="n">OPENBSD</span><span class="p">,</span> <span class="n">OPENBSDOLD</span><span class="p">,</span> <span class="mi">32</span><span class="n">V</span><span class="p">,</span> <span class="n">ELN</span>
<span class="n">SET</span> <span class="n">CPU</span> <span class="n">NOIDLE</span>               <span class="n">Disable</span> <span class="n">idle</span> <span class="n">detection</span>
</pre></div>
</div>
<p>Idle detection is disabled by default.
If idle detection is enabled with an incorrect operating system setting,
simulator performance could be impacted.
The default operating system setting is VMS.
The value <code class="docutils literal notranslate"><span class="pre">n</span></code>, if present in the <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">CPU</span> <span class="pre">IDLE={OS}:n</span></code> command,
indicates the number of seconds the simulator must run before idling starts.</p>
<p>The CPU can maintain a history of the most recently executed instructions.
This is controlled by the <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">CPU</span> <span class="pre">HISTORY</span></code> and <code class="docutils literal notranslate"><span class="pre">SHOW</span> <span class="pre">CPU</span> <span class="pre">HISTORY</span></code> commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">CPU</span> <span class="n">HISTORY</span>               <span class="n">Clear</span> <span class="n">history</span> <span class="n">buffer</span>
<span class="n">SET</span> <span class="n">CPU</span> <span class="n">HISTORY</span><span class="o">=</span><span class="mi">0</span>             <span class="n">Disable</span> <span class="n">history</span>
<span class="n">SET</span> <span class="n">CPU</span> <span class="p">{</span><span class="o">-</span><span class="n">T</span><span class="p">}</span> <span class="n">HISTORY</span><span class="o">=</span><span class="n">n</span><span class="p">{:</span><span class="n">file</span><span class="p">}</span> <span class="n">Enable</span> <span class="n">history</span><span class="p">,</span> <span class="n">length</span> <span class="o">=</span> <span class="n">n</span>
<span class="n">SHOW</span> <span class="n">CPU</span> <span class="n">HISTORY</span>              <span class="n">Print</span> <span class="n">CPU</span> <span class="n">history</span>
<span class="n">SHOW</span> <span class="n">CPU</span> <span class="n">HISTORY</span><span class="o">=</span><span class="n">n</span>            <span class="n">Print</span> <span class="n">first</span> <span class="n">n</span> <span class="n">entries</span> <span class="n">of</span> <span class="n">CPU</span> <span class="n">history</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">-T</span></code> switch causes simulator time to be recorded (and displayed) with each history entry.
When writing history to a file (<code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">CPU</span> <span class="pre">HISTORY=n:file</span></code>), <code class="docutils literal notranslate"><span class="pre">n</span></code> specifies the buffer flush frequency.
Warning: prodigious amounts of disk space may be consumed.
The maximum length for the history is 250000 entries.</p>
</section>
<section id="translation-buffer-tlb">
<h4><span class="sectnum">1.2.1.2. </span>Translation buffer (TLB)<a class="headerlink" href="#translation-buffer-tlb" title="Permalink to this heading">¶</a></h4>
<p>The translation buffer consists of two units,
representing the system and user translation buffers, respectively.
It has no registers.
Each translation buffer entry consists of two 32b words, as follows:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">word</span> <span class="pre">n</span></code></p></td>
<td><p>Tag</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">word</span> <span class="pre">n+1</span></code></p></td>
<td><p>Cached PTE</p></td>
</tr>
</tbody>
</table>
<p>An invalid entry is indicated by a tag of 0xFFFFFFFF.</p>
</section>
<section id="sbi-controller-sbi">
<h4><span class="sectnum">1.2.1.3. </span>SBI controller (SBI)<a class="headerlink" href="#sbi-controller-sbi" title="Permalink to this heading">¶</a></h4>
<p>The SBI is the VAX-11/780 system bus.
The simulated SBI implements these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">NREQ14</span></code></p></td>
<td><p>16</p></td>
<td><p>Nexus IPL14 interrupt requests</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">NREQ15</span></code></p></td>
<td><p>16</p></td>
<td><p>Nexus IPL15 interrupt requests</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">NREQ16</span></code></p></td>
<td><p>16</p></td>
<td><p>Nexus IPL16 interrupt requests</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">NREQ17</span></code></p></td>
<td><p>16</p></td>
<td><p>Nexus IPL17 interrupt requests</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">WCSA</span></code></p></td>
<td><p>16</p></td>
<td><p>Writeable control store address</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">WCSD</span></code></p></td>
<td><p>32</p></td>
<td><p>Writeable control store data</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">MBRK</span></code></p></td>
<td><p>13</p></td>
<td><p>Microbreak register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">SBIFS</span></code></p></td>
<td><p>32</p></td>
<td><p>SBI fault status</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SBISC</span></code></p></td>
<td><p>32</p></td>
<td><p>SBI silo compare</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">SBIMT</span></code></p></td>
<td><p>32</p></td>
<td><p>SBI maintenance register</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SBIER</span></code></p></td>
<td><p>32</p></td>
<td><p>SBI error status</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">SBITMO</span></code></p></td>
<td><p>32</p></td>
<td><p>SBI timeout address</p></td>
</tr>
</tbody>
</table>
</section>
<section id="memory-controllers-mctl0-mctl1">
<h4><span class="sectnum">1.2.1.4. </span>Memory controllers (MCTL0, MCTL1)<a class="headerlink" href="#memory-controllers-mctl0-mctl1" title="Permalink to this heading">¶</a></h4>
<p>The memory controllers implement the registers for the MS780C (8MB memory) or MS780E (16MB or greater memory).
Each controller implements these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CRA</span></code></p></td>
<td><p>32</p></td>
<td><p>Control register A</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CRB</span></code></p></td>
<td><p>32</p></td>
<td><p>Control register B</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CRC</span></code></p></td>
<td><p>32</p></td>
<td><p>Control register C</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CRD</span></code></p></td>
<td><p>32</p></td>
<td><p>Control register D (MS780E only)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ROM[0:1023]</span></code></p></td>
<td><p>32</p></td>
<td><p>Bootstrap ROM</p></td>
</tr>
</tbody>
</table>
<p>ROM can be loaded from a file with the commands</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LOAD</span> <span class="o">-</span><span class="n">R</span> <span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span>                <span class="n">Load</span> <span class="n">MCTL0</span> <span class="n">ROM</span>
<span class="n">LOAD</span> <span class="o">-</span><span class="n">S</span> <span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span>                <span class="n">Load</span> <span class="n">MCTL1</span> <span class="n">ROM</span>
</pre></div>
</div>
</section>
<section id="time-of-day-clock-todr">
<h4><span class="sectnum">1.2.1.5. </span>Time-of-day clock (TODR)<a class="headerlink" href="#time-of-day-clock-todr" title="Permalink to this heading">¶</a></h4>
<p>The TODR tracks time since an arbitrary start in 10 millisecond intervals.
It has these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TODR</span></code></p></td>
<td><p>32</p></td>
<td><p>Time-of-day register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Delay between ticks</p></td>
</tr>
</tbody>
</table>
<p>The TODR register autocalibrates against real-world time.</p>
<p>There are two modes of TODR operation:</p>
<ol class="arabic simple">
<li><p><strong>Default VMS mode.</strong>
Without initializing the TODR it returns the current time of year offset which VMS would set the clock to if VMS knew the correct time (i.e., by manual input).
This is correct almost all the time unless a VMS disk hadn’t been booted from in the current year.
This mode produces strange time results for non-VMS OSes on each system boot.</p></li>
<li><p><strong>OS agnostic mode.</strong>
This mode behaves precisely like the VAX780 TODR and works correctly for all OSes.
This mode is enabled by attaching the CLK to a battery backup state file for the TOY clock (i.e., <code class="docutils literal notranslate"><span class="pre">sim&gt;</span> <span class="pre">attach</span> <span class="pre">CLK</span> <span class="pre">TOY_CLOCK</span></code>).
When operating in OS agnostic mode, the TODR will initially start counting from 0 and be adjusted differently when an OS specifically writes to the TODR.
VMS determines if the TODR currently contains a valid time if the value it sees is less than about 1 month.
If the time isn’t valid, VMS will prompt to set the time during the system boot.
While prompting for the time it will wait for an answer to the prompt for up to the <code class="docutils literal notranslate"><span class="pre">SYSGEN</span></code> parameter <code class="docutils literal notranslate"><span class="pre">TIMEPROMPTWAIT</span></code> seconds.
A value of 0 for <code class="docutils literal notranslate"><span class="pre">TIMEPROMPTWAIT</span></code> will disable the clock setting prompt.</p></li>
</ol>
</section>
<section id="interval-timer-tmr">
<h4><span class="sectnum">1.2.1.6. </span>Interval timer (TMR)<a class="headerlink" href="#interval-timer-tmr" title="Permalink to this heading">¶</a></h4>
<p>The interval timer implements the VAX architectural timer, with 1 microsecond intervals.
It has these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ICCS</span></code></p></td>
<td><p>32</p></td>
<td><p>Interval timer control and status</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ICR</span></code></p></td>
<td><p>32</p></td>
<td><p>Interval count register</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">NICR</span></code></p></td>
<td><p>32</p></td>
<td><p>Next interval count register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
<td><p>1</p></td>
<td><p>Interrupt request</p></td>
</tr>
</tbody>
</table>
<p>For standard VMS intervals (10 milliseconds),
the interval timer autocalibrates against real-world time.</p>
</section>
<section id="unibus-adapter-uba">
<h4><span class="sectnum">1.2.1.7. </span>Unibus adapter (UBA)<a class="headerlink" href="#unibus-adapter-uba" title="Permalink to this heading">¶</a></h4>
<p>The Unibus adapter (UBA) simulates the DW780.
It recognizes these options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">UBA</span> <span class="n">AUTOCONFIGURE</span>         <span class="n">Enable</span> <span class="n">autoconfiguration</span>
<span class="n">SET</span> <span class="n">UBA</span> <span class="n">NOAUTOCONFIGURE</span>       <span class="n">Disable</span> <span class="n">autoconfiguration</span>
</pre></div>
</div>
<p>and this <code class="docutils literal notranslate"><span class="pre">SHOW</span></code> command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SHOW</span> <span class="n">UBA</span> <span class="n">IOSPACE</span>              <span class="n">Display</span> <span class="n">IO</span> <span class="n">address</span> <span class="n">space</span> <span class="n">assignments</span>
</pre></div>
</div>
<p>The UBA also implements a command to display a Unibus address to physical address translation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SHOW</span> <span class="n">UBA</span> <span class="n">VIRTUAL</span><span class="o">=</span><span class="n">n</span>            <span class="n">Show</span> <span class="n">translation</span> <span class="k">for</span> <span class="n">Unibus</span> <span class="n">address</span> <span class="n">n</span>
</pre></div>
</div>
<p>Finally, the UBA implements main memory examination and modification via the Unibus map.
The data width is always 16b:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">EX</span> <span class="n">UBA</span> <span class="mi">0</span><span class="o">/</span><span class="mi">10</span>                   <span class="n">Examine</span> <span class="n">main</span> <span class="n">memory</span> <span class="n">words</span> <span class="n">corresponding</span>
                              <span class="n">to</span> <span class="n">Unibus</span> <span class="n">addresses</span> <span class="mi">0</span><span class="o">-</span><span class="mi">10</span>
</pre></div>
</div>
<p>The UBA has these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">IPL14</span></code></p></td>
<td><p>32</p></td>
<td><p>Unibus IPL14 interrupt requests</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">IPL15</span></code></p></td>
<td><p>32</p></td>
<td><p>Unibus IPL15 interrupt requests</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">IPL16</span></code></p></td>
<td><p>32</p></td>
<td><p>Unibus IPL16 interrupt requests</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">IPL17</span></code></p></td>
<td><p>32</p></td>
<td><p>Unibus IPL17 interrupt requests</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CNFR</span></code></p></td>
<td><p>32</p></td>
<td><p>Configuration register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CR</span></code></p></td>
<td><p>32</p></td>
<td><p>Control register</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SR</span></code></p></td>
<td><p>32</p></td>
<td><p>Status register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DR</span></code></p></td>
<td><p>32</p></td>
<td><p>Diagnostic register</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
<td><p>1</p></td>
<td><p>Internal UBA interrupt request</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">NEXINT</span></code></p></td>
<td><p>1</p></td>
<td><p>UBA Nexus interrupt request</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AIIP</span></code></p></td>
<td><p>1</p></td>
<td><p>Adapter initialization in progress flag</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">UIIP</span></code></p></td>
<td><p>1</p></td>
<td><p>Unibus initialization in progress flag</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">FMER</span></code></p></td>
<td><p>32</p></td>
<td><p>Failing memory address</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">FUBAR</span></code></p></td>
<td><p>32</p></td>
<td><p>Failing UBA map register</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BRSVR0</span></code></p></td>
<td><p>32</p></td>
<td><p>Spare register 0</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">BRSVR1</span></code></p></td>
<td><p>32</p></td>
<td><p>Spare register 1</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BRSVR2</span></code></p></td>
<td><p>32</p></td>
<td><p>Spare register 2</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">BRSVR3</span></code></p></td>
<td><p>32</p></td>
<td><p>Spare register 3</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BRRVR4</span></code></p></td>
<td><p>32</p></td>
<td><p>Vector register, IPL 14</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">BRRVR5</span></code></p></td>
<td><p>32</p></td>
<td><p>Vector register, IPL 15</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BRRVR6</span></code></p></td>
<td><p>32</p></td>
<td><p>Vector register, IPL 16</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">BRRVR7</span></code></p></td>
<td><p>32</p></td>
<td><p>Vector register, IPL 17</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DPR[0:15]</span></code></p></td>
<td><p>32</p></td>
<td><p>Data path registers 0 to 15</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">MAP[0:495]</span></code></p></td>
<td><p>32</p></td>
<td><p>Map registers 0 to 495</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AITIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Adapter initialization time</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">UITIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Unibus initialization time</p></td>
</tr>
</tbody>
</table>
</section>
<section id="massbus-adapters-mba0-mba1">
<h4><span class="sectnum">1.2.1.8. </span>Massbus adapters (MBA0, MBA1)<a class="headerlink" href="#massbus-adapters-mba0-mba1" title="Permalink to this heading">¶</a></h4>
<p>The Massbus adapters (MBA0, MBA1) simulate RH780s.
MBA0 is assigned to the RP disk drives, MBA1 to the TU tape drives.
Each MBA has these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CNFR</span></code></p></td>
<td><p>32</p></td>
<td><p>Configuration register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CR</span></code></p></td>
<td><p>32</p></td>
<td><p>Control register</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SR</span></code></p></td>
<td><p>32</p></td>
<td><p>Status register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VA</span></code></p></td>
<td><p>17</p></td>
<td><p>Virtual address register</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BC</span></code></p></td>
<td><p>32</p></td>
<td><p>Byte count register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DR</span></code></p></td>
<td><p>32</p></td>
<td><p>Diagnostic register</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SMR</span></code></p></td>
<td><p>32</p></td>
<td><p>Selected map register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">MAP[0:255]</span></code></p></td>
<td><p>32</p></td>
<td><p>Map registers</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">NEXINT</span></code></p></td>
<td><p>1</p></td>
<td><p>MBA Nexus interrupt request</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="i-o-device-addressing">
<h3><span class="sectnum">1.2.2. </span>I/O device addressing<a class="headerlink" href="#i-o-device-addressing" title="Permalink to this heading">¶</a></h3>
<p>Unibus I/O space is not large enough to allow all possible devices to be configured simultaneously at fixed addresses.
Instead, many devices have floating addresses;
that is, the assigned device address depends on the presence of other devices in the configuration:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DZ11</span></code></p></td>
<td><p>All instances have floating addresses</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RL11</span></code></p></td>
<td><p>First instance has fixed address, rest floating</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RX11</span></code>/<code class="docutils literal notranslate"><span class="pre">RX211</span></code></p></td>
<td><p>First instance has fixed address, rest floating</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DEUNA</span></code>/<code class="docutils literal notranslate"><span class="pre">DELUA</span></code></p></td>
<td><p>First instance has fixed address, rest floating</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">MSCP</span></code> disk</p></td>
<td><p>First instance has fixed address, rest floating</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TMSCP</span></code> tape</p></td>
<td><p>First instance has fixed address, rest floating</p></td>
</tr>
</tbody>
</table>
<p>To maintain addressing consistency as the configuration changes,
the simulator implements DEC’s standard I/O address and vector autoconfiguration algorithms for all Unibus devices.
This allows the user to enable or disable devices without needing to manage I/O addresses and vectors.</p>
<p>Autoconfiguration cannot solve address conflicts between devices with overlapping fixed addresses.
For example, with default I/O page addressing, the PDP-11 can support either a TM11 or a TS11,
but not both, since they use the same I/O addresses.</p>
<p>In addition to autoconfiguration, most devices support the <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">&lt;device&gt;</span> <span class="pre">ADDRESS</span></code> command,
which allows the I/O page address of the device to be changed,
and the <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">&lt;device&gt;</span> <span class="pre">VECTOR</span></code> command,
which allows the vector of the device to be changed.
Explicitly setting the I/O address or vector of a device DISABLES autoconfiguration for that device and for the entire system.
As a consequence, the user may have to manually configure all other autoconfigured devices,
because the autoconfiguration algorithm no longer recognizes the explicitly configured device.
A device can be reset to autoconfigure with the <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">&lt;device&gt;</span> <span class="pre">AUTOCONFIGURE</span></code> command.
Autoconfiguration can be restored for the entire system with the <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">UBA</span> <span class="pre">AUTOCONFIGURE</span></code> command.</p>
<p>The current I/O map can be displayed with the <code class="docutils literal notranslate"><span class="pre">SHOW</span> <span class="pre">UBA</span> <span class="pre">IOSPACE</span></code> command.
Addresses that have set by autoconfiguration are marked with an asterisk (*).</p>
<p>All devices support the <code class="docutils literal notranslate"><span class="pre">SHOW</span> <span class="pre">&lt;device&gt;</span> <span class="pre">ADDRESS</span></code> and <code class="docutils literal notranslate"><span class="pre">SHOW</span> <span class="pre">&lt;device&gt;</span> <span class="pre">VECTOR</span></code> commands,
which display the device address and vector, respectively.</p>
</section>
<section id="programmed-i-o-devices">
<h3><span class="sectnum">1.2.3. </span>Programmed I/O devices<a class="headerlink" href="#programmed-i-o-devices" title="Permalink to this heading">¶</a></h3>
<section id="console-input-tti">
<h4><span class="sectnum">1.2.3.1. </span>Console input (TTI)<a class="headerlink" href="#console-input-tti" title="Permalink to this heading">¶</a></h4>
<p>The terminal interfaces (TTI, TTO) can be set to one of three modes, <code class="docutils literal notranslate"><span class="pre">7P</span></code>, <code class="docutils literal notranslate"><span class="pre">7B</span></code> or <code class="docutils literal notranslate"><span class="pre">8B</span></code>:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Mode</p></th>
<th class="head"><p>Input characters</p></th>
<th class="head"><p>Output characters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">7P</span></code></p></td>
<td><p>High-order bit cleared</p></td>
<td><p>High-order bit cleared,
non-printing characters suppressed</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">7B</span></code></p></td>
<td><p>High-order bit cleared</p></td>
<td><p>High-order bit cleared</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">8B</span></code></p></td>
<td><p>No changes</p></td>
<td><p>No changes</p></td>
</tr>
</tbody>
</table>
<p>The default mode is <code class="docutils literal notranslate"><span class="pre">8B</span></code>.</p>
<p>When the console terminal is attached to a Telnet session, it recognizes <code class="docutils literal notranslate"><span class="pre">BREAK</span></code>.
If <code class="docutils literal notranslate"><span class="pre">BREAK</span></code> is entered, and BDR&lt;7&gt; is set, control returns to the console firmware;
otherwise, <code class="docutils literal notranslate"><span class="pre">BREAK</span></code> is treated as a normal terminal input condition.</p>
<p>The terminal input (TTI) polls the console keyboard for input.
It implements these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BUF</span></code></p></td>
<td><p>8</p></td>
<td><p>Last data item processed</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CSR</span></code></p></td>
<td><p>16</p></td>
<td><p>Control/status register</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
<td><p>1</p></td>
<td><p>Interrupt pending flag</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ERR</span></code></p></td>
<td><p>1</p></td>
<td><p>Error flag (CSR&lt;15&gt;)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DONE</span></code></p></td>
<td><p>1</p></td>
<td><p>Device done flag (CSR&lt;7&gt;)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">IE</span></code></p></td>
<td><p>1</p></td>
<td><p>Interrupt enable flag (CSR&lt;6&gt;)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">POS</span></code></p></td>
<td><p>32</p></td>
<td><p>Number of characters input</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Input polling interval (if 0, the keyboard
is polled synchronously with the TODR)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="console-output-tto">
<h4><span class="sectnum">1.2.3.2. </span>Console output (TTO)<a class="headerlink" href="#console-output-tto" title="Permalink to this heading">¶</a></h4>
<p>The terminal output (TTO) writes to the simulator console window.
It implements these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BUF</span></code></p></td>
<td><p>8</p></td>
<td><p>Last data item processed</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CSR</span></code></p></td>
<td><p>16</p></td>
<td><p>Control/status register</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
<td><p>1</p></td>
<td><p>Interrupt pending flag</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ERR</span></code></p></td>
<td><p>1</p></td>
<td><p>Error flag (CSR&lt;15&gt;)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DONE</span></code></p></td>
<td><p>1</p></td>
<td><p>Device done flag (CSR&lt;7&gt;)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">IE</span></code></p></td>
<td><p>1</p></td>
<td><p>Interrupt enable flag (CSR&lt;6&gt;)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">POS</span></code></p></td>
<td><p>32</p></td>
<td><p>Number of characters input</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Time from I/O initiation to interrupt</p></td>
</tr>
</tbody>
</table>
</section>
<section id="rx01-console-floppy-disk-rxc">
<h4><span class="sectnum">1.2.3.3. </span>RX01 console floppy disk (RXC)<a class="headerlink" href="#rx01-console-floppy-disk-rxc" title="Permalink to this heading">¶</a></h4>
<p>RX01 options include the ability to set units write enabled or write locked:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">RXCn</span> <span class="n">LOCKED</span>               <span class="n">Set</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">write</span> <span class="n">locked</span>
<span class="n">SET</span> <span class="n">RXCn</span> <span class="n">WRITEENABLED</span>         <span class="n">Set</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">write</span> <span class="n">enabled</span>
</pre></div>
</div>
<p>The RX01 implements a special command, <code class="docutils literal notranslate"><span class="pre">FLOAD</span></code>,
for loading VAX executables from an RT11-formatted console floppy disk image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FLOAD</span> <span class="o">&lt;</span><span class="n">file_name</span><span class="o">&gt;</span> <span class="p">{</span><span class="o">&lt;</span><span class="n">origin</span><span class="o">&gt;</span><span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">FLOAD</span></code> searches the floppy disk image attached to the RX01 for the named file and then loads it into VAX-11/780 memory starting at the origin.
If no origin is specified, the default origin is 200 (hex).</p>
<p>The RX01 implements these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">FNC</span></code></p></td>
<td><p>8</p></td>
<td><p>Function select</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ES</span></code></p></td>
<td><p>8</p></td>
<td><p>Error status</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ECODE</span></code></p></td>
<td><p>8</p></td>
<td><p>Error code</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TA</span></code></p></td>
<td><p>8</p></td>
<td><p>Track address</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SA</span></code></p></td>
<td><p>8</p></td>
<td><p>Sector address</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">STATE</span></code></p></td>
<td><p>4</p></td>
<td><p>Protocol state</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BPTR</span></code></p></td>
<td><p>7</p></td>
<td><p>Data buffer pointer</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CTIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Command initiation delay</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">STIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Seek time delay, per track</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">XTIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Transfer time delay, per byte</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">STOP_IOE</span></code></p></td>
<td><p>1</p></td>
<td><p>Stop on I/O error</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DBUF[0:127]</span></code></p></td>
<td><p>8</p></td>
<td><p>Data buffer</p></td>
</tr>
</tbody>
</table>
<p>Error handling is as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Error</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">STOP_IOE</span></code></p></th>
<th class="head"><p>Processed as</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="2"><p>not attached</p></td>
<td><p>1</p></td>
<td><p>Report error and stop</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Disk not ready</p></td>
</tr>
</tbody>
</table>
<p>RX01 data files are buffered in memory;
therefore, end of file and OS I/O errors cannot occur.</p>
</section>
<section id="line-printer-lpt">
<h4><span class="sectnum">1.2.3.4. </span>Line printer (LPT)<a class="headerlink" href="#line-printer-lpt" title="Permalink to this heading">¶</a></h4>
<p>The line printer (LPT) writes data to a disk file.
The POS register specifies the number of the next data item to be written.
Thus, by changing POS, the user can backspace or advance the printer.</p>
<p>The line printer implements these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BUF</span></code></p></td>
<td><p>8</p></td>
<td><p>Last data item processed</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CSR</span></code></p></td>
<td><p>16</p></td>
<td><p>Control/status register</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
<td><p>1</p></td>
<td><p>Interrupt pending flag</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ERR</span></code></p></td>
<td><p>1</p></td>
<td><p>Error flag (CSR&lt;15&gt;)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DONE</span></code></p></td>
<td><p>1</p></td>
<td><p>Device done flag (CSR&lt;7&gt;)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">IE</span></code></p></td>
<td><p>1</p></td>
<td><p>Interrupt enable flag (CSR&lt;6&gt;)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">POS</span></code></p></td>
<td><p>32</p></td>
<td><p>Position in the output file</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Time from I/O initiation to interrupt</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">STOP_IOE</span></code></p></td>
<td><p>1</p></td>
<td><p>Stop on I/O error</p></td>
</tr>
</tbody>
</table>
<p>Error handling is as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Error</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">STOP_IOE</span></code></p></th>
<th class="head"><p>Processed as</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="2"><p>not attached</p></td>
<td><p>1</p></td>
<td><p>Report error and stop</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Out of paper</p></td>
</tr>
<tr class="row-even"><td><p>OS I/O error</p></td>
<td><p>x</p></td>
<td><p>Report error and stop</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="disks">
<h3><span class="sectnum">1.2.4. </span>Disks<a class="headerlink" href="#disks" title="Permalink to this heading">¶</a></h3>
<p>All VAX-11/780 disks, and the TUK50 MSCP tape,
support a special form of the <code class="docutils literal notranslate"><span class="pre">boot</span></code> command,
with the following syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BOOT</span> <span class="o">&lt;</span><span class="n">unit</span><span class="o">&gt;</span><span class="p">{</span><span class="o">/</span><span class="n">R5</span><span class="p">:</span><span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="p">}</span>
</pre></div>
</div>
<p>For example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BOOT</span> <span class="n">RP0</span><span class="o">/</span><span class="n">R5</span><span class="p">:</span><span class="mi">1</span>
</pre></div>
</div>
<p>The optional switch, <code class="docutils literal notranslate"><span class="pre">/R5</span></code>,
specifies that R5 is to be loaded with the specified value prior to booting.
If the switch is omitted, <code class="docutils literal notranslate"><span class="pre">R5</span></code> is loaded with 0.</p>
<section id="rp04-05-06-07-rm02-03-05-80-disk-pack-drives-rp">
<h4><span class="sectnum">1.2.4.1. </span>RP04/05/06/07, RM02/03/05/80 disk pack drives (RP)<a class="headerlink" href="#rp04-05-06-07-rm02-03-05-80-disk-pack-drives-rp" title="Permalink to this heading">¶</a></h4>
<p>The RP controller implements the Massbus family of large disk drives.
RP options include the ability to set units write enabled or write locked,
to set the drive type to one of six disk types, or autosize,
and to write a DEC standard 144 compliant bad block table on the last track:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">RPn</span> <span class="n">LOCKED</span>                <span class="n">Set</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">write</span> <span class="n">locked</span>
<span class="n">SET</span> <span class="n">RPn</span> <span class="n">WRITEENABLED</span>          <span class="n">Set</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">write</span> <span class="n">enabled</span>
<span class="n">SET</span> <span class="n">RPn</span> <span class="n">RM03</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RM03</span>
<span class="n">SET</span> <span class="n">RPn</span> <span class="n">RM05</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RM05</span>
<span class="n">SET</span> <span class="n">RPn</span> <span class="n">RM80</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RM80</span>
<span class="n">SET</span> <span class="n">RPn</span> <span class="n">RP04</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RP04</span>
<span class="n">SET</span> <span class="n">RPn</span> <span class="n">RP05</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RP05</span>
<span class="n">SET</span> <span class="n">RPn</span> <span class="n">RP06</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RP06</span>
<span class="n">SET</span> <span class="n">RPn</span> <span class="n">RP07</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RP07</span>
<span class="n">SET</span> <span class="n">RPn</span> <span class="n">AUTOSIZE</span>              <span class="n">Set</span> <span class="nb">type</span> <span class="n">based</span> <span class="n">on</span> <span class="n">file</span> <span class="n">size</span> <span class="n">at</span> <span class="n">attach</span>
<span class="n">SET</span> <span class="n">RPn</span> <span class="n">BADBLOCK</span>              <span class="n">Write</span> <span class="n">bad</span> <span class="n">block</span> <span class="n">table</span> <span class="n">on</span> <span class="n">last</span> <span class="n">track</span>
</pre></div>
</div>
<p>The type options can be used only when a unit is not attached to a file.
The bad block option can be used only when a unit is attached to a file.
Units can be set <code class="docutils literal notranslate"><span class="pre">ENABLED</span></code> or <code class="docutils literal notranslate"><span class="pre">DISABLED</span></code>.
The RP controller supports the <code class="docutils literal notranslate"><span class="pre">BOOT</span></code> command.</p>
<p>The RP controller implements the registers listed below.
Registers suffixed with <code class="docutils literal notranslate"><span class="pre">[0:7]</span></code> are replicated per drive.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CS1[0:7]</span></code></p></td>
<td><p>16</p></td>
<td><p>Current operation</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DA[0:7]</span></code></p></td>
<td><p>16</p></td>
<td><p>Desired surface, sector</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DS[0:7]</span></code></p></td>
<td><p>16</p></td>
<td><p>Drive status</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ER1[0:7]</span></code></p></td>
<td><p>16</p></td>
<td><p>Drive errors</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">OF[0:7]</span></code></p></td>
<td><p>16</p></td>
<td><p>Offset</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DC[0:7]</span></code></p></td>
<td><p>16</p></td>
<td><p>Desired cylinder</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ER2[0:7]</span></code></p></td>
<td><p>16</p></td>
<td><p>Error status 2</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ER3[0:7]</span></code></p></td>
<td><p>16</p></td>
<td><p>Error status 3</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">EC1[0:7]</span></code></p></td>
<td><p>16</p></td>
<td><p>ECC syndrome 1</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">EC2[0:7]</span></code></p></td>
<td><p>16</p></td>
<td><p>ECC syndrome 2</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">MR[0:7]</span></code></p></td>
<td><p>16</p></td>
<td><p>Maintenance register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">MR2[0:7]</span></code></p></td>
<td><p>16</p></td>
<td><p>Maintenance register 2 (RM only)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">HR[0:7]</span></code></p></td>
<td><p>16</p></td>
<td><p>Holding register (RM only)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">STIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Seek time, per cylinder</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RTIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Rotational delay</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">STOP_IOE</span></code></p></td>
<td><p>1</p></td>
<td><p>Stop on I/O error</p></td>
</tr>
</tbody>
</table>
<p>Error handling is as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Error</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">STOP_IOE</span></code></p></th>
<th class="head"><p>Processed as</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="2"><p>not attached</p></td>
<td><p>1</p></td>
<td><p>Report error and stop</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Disk not ready</p></td>
</tr>
<tr class="row-even"><td><p>End of file</p></td>
<td><p>x</p></td>
<td><p>Assume rest of disk is zero</p></td>
</tr>
<tr class="row-odd"><td><p>OS I/O error</p></td>
<td><p>x</p></td>
<td><p>Report error and stop</p></td>
</tr>
</tbody>
</table>
</section>
<section id="rl11-rl01-rl02-cartridge-disk-rl">
<h4><span class="sectnum">1.2.4.2. </span>RL11/RL01/RL02 cartridge disk (RL)<a class="headerlink" href="#rl11-rl01-rl02-cartridge-disk-rl" title="Permalink to this heading">¶</a></h4>
<p>RL11 options include the ability to set units write enabled or write locked,
to set the drive type to RL01, RL02, or autosize,
and to write a DEC standard 144 compliant bad block table on the last track:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">RLn</span> <span class="n">LOCKED</span>                <span class="n">Set</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">write</span> <span class="n">locked</span>
<span class="n">SET</span> <span class="n">RLn</span> <span class="n">WRITEENABLED</span>          <span class="n">Set</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">write</span> <span class="n">enabled</span>
<span class="n">SET</span> <span class="n">RLn</span> <span class="n">RL01</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RL01</span>
<span class="n">SET</span> <span class="n">RLn</span> <span class="n">RL02</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RL02</span>
<span class="n">SET</span> <span class="n">RLn</span> <span class="n">AUTOSIZE</span>              <span class="n">Set</span> <span class="nb">type</span> <span class="n">based</span> <span class="n">on</span> <span class="n">file</span> <span class="n">size</span> <span class="n">at</span> <span class="n">attach</span>
<span class="n">SET</span> <span class="n">RLn</span> <span class="n">BADBLOCK</span>              <span class="n">Write</span> <span class="n">bad</span> <span class="n">block</span> <span class="n">table</span> <span class="n">on</span> <span class="n">last</span> <span class="n">track</span>
</pre></div>
</div>
<p>The type options can be used only when a unit is not attached to a file.
The bad block option can be used only when a unit is attached to a file.
Units can be set <code class="docutils literal notranslate"><span class="pre">ENABLED</span></code> or <code class="docutils literal notranslate"><span class="pre">DISABLED</span></code>.
The RL11 supports the <code class="docutils literal notranslate"><span class="pre">BOOT</span></code> command.</p>
<p>The RL11 implements these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RLCS</span></code></p></td>
<td><p>16</p></td>
<td><p>Control/status</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RLDA</span></code></p></td>
<td><p>16</p></td>
<td><p>Disk address</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RLBA</span></code></p></td>
<td><p>16</p></td>
<td><p>Memory address</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RLBAE</span></code></p></td>
<td><p>6</p></td>
<td><p>Memory address extension (RLV12)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RLMP</span></code>, <code class="docutils literal notranslate"><span class="pre">RLMP1</span></code>, <code class="docutils literal notranslate"><span class="pre">RLMP2</span></code></p></td>
<td><p>16</p></td>
<td><p>Multipurpose register queue</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
<td><p>1</p></td>
<td><p>Interrupt pending flag</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ERR</span></code></p></td>
<td><p>1</p></td>
<td><p>Error flag (CSR&lt;15&gt;)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DONE</span></code></p></td>
<td><p>1</p></td>
<td><p>Device done flag (CSR&lt;7&gt;)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">IE</span></code></p></td>
<td><p>1</p></td>
<td><p>Interrupt enable flag (CSR&lt;6&gt;)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">STIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Seek time, per cylinder</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RTIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Rotational delay</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">STOP_IOE</span></code></p></td>
<td><p>1</p></td>
<td><p>Stop on I/O error</p></td>
</tr>
</tbody>
</table>
<p>Error handling is as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Error</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">STOP_IOE</span></code></p></th>
<th class="head"><p>Processed as</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="2"><p>not attached</p></td>
<td><p>1</p></td>
<td><p>Report error and stop</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Disk not ready</p></td>
</tr>
<tr class="row-even"><td><p>End of file</p></td>
<td><p>x</p></td>
<td><p>Assume rest of disk is zero</p></td>
</tr>
<tr class="row-odd"><td><p>OS I/O error</p></td>
<td><p>x</p></td>
<td><p>Report error and stop</p></td>
</tr>
</tbody>
</table>
</section>
<section id="rk611-rk06-rk07-cartridge-disk-hk">
<h4><span class="sectnum">1.2.4.3. </span>RK611/RK06/RK07 cartridge disk (HK)<a class="headerlink" href="#rk611-rk06-rk07-cartridge-disk-hk" title="Permalink to this heading">¶</a></h4>
<p>RK611 options include the ability to set units write enabled or write locked,
to set the drive type to RK06, RK07, or autosize,
and to write a DEC standard 144 compliant bad block table on the last track:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">HKn</span> <span class="n">LOCKED</span>                <span class="n">Set</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">write</span> <span class="n">locked</span>
<span class="n">SET</span> <span class="n">HKn</span> <span class="n">WRITEENABLED</span>          <span class="n">Set</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">write</span> <span class="n">enabled</span>
<span class="n">SET</span> <span class="n">HKn</span> <span class="n">RK06</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RK06</span>
<span class="n">SET</span> <span class="n">HKn</span> <span class="n">RK07</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RK07</span>
<span class="n">SET</span> <span class="n">HKn</span> <span class="n">AUTOSIZE</span>              <span class="n">Set</span> <span class="nb">type</span> <span class="n">based</span> <span class="n">on</span> <span class="n">file</span> <span class="n">size</span> <span class="n">at</span> <span class="n">attach</span>
<span class="n">SET</span> <span class="n">HKn</span> <span class="n">BADBLOCK</span>              <span class="n">Write</span> <span class="n">bad</span> <span class="n">block</span> <span class="n">table</span> <span class="n">on</span> <span class="n">last</span> <span class="n">track</span>
</pre></div>
</div>
<p>The type options can be used only when a unit is not attached to a file.
The bad block option can be used only when a unit is attached to a file.
Units can be set <code class="docutils literal notranslate"><span class="pre">ENABLED</span></code> or <code class="docutils literal notranslate"><span class="pre">DISABLED</span></code>.
The RK611 supports the <code class="docutils literal notranslate"><span class="pre">BOOT</span></code> command.</p>
<p>The RK611 implements these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">HKCS1</span></code></p></td>
<td><p>16</p></td>
<td><p>Control/status 1</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">HKWC</span></code></p></td>
<td><p>16</p></td>
<td><p>Word count</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">HKBA</span></code></p></td>
<td><p>16</p></td>
<td><p>Bus address</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">HKDA</span></code></p></td>
<td><p>16</p></td>
<td><p>Desired surface, sector</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">HKCS2</span></code></p></td>
<td><p>16</p></td>
<td><p>Control/status 2</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">HKDS[0:7]</span></code></p></td>
<td><p>16</p></td>
<td><p>Drive status, drives 0 to 7</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">HKER[0:7]</span></code></p></td>
<td><p>16</p></td>
<td><p>Drive errors, drives 0 to 7</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">HKDB[0:2]</span></code></p></td>
<td><p>16</p></td>
<td><p>Data buffer silo</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">HKDC</span></code></p></td>
<td><p>16</p></td>
<td><p>Desired cylinder</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">HKOF</span></code></p></td>
<td><p>8</p></td>
<td><p>Offset</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">HKMR</span></code></p></td>
<td><p>16</p></td>
<td><p>Maintenance register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">HKSPR</span></code></p></td>
<td><p>16</p></td>
<td><p>Spare register</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">HKCI</span></code></p></td>
<td><p>1</p></td>
<td><p>Controller interrupt flop</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">HKDI</span></code></p></td>
<td><p>1</p></td>
<td><p>Drive interrupt flop</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">HKEI</span></code></p></td>
<td><p>1</p></td>
<td><p>Error interrupt flop</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
<td><p>1</p></td>
<td><p>Interrupt pending flag</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ERR</span></code></p></td>
<td><p>1</p></td>
<td><p>Error flag (CSR&lt;15&gt;)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DONE</span></code></p></td>
<td><p>1</p></td>
<td><p>Device done flag (CSR1&lt;7&gt;)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">IE</span></code></p></td>
<td><p>1</p></td>
<td><p>Interrupt enable flag (CSR1&lt;6&gt;)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">STIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Seek time, per cylinder</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RTIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Rotational delay</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">MIN2TIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Minimum time between DONE and ATA</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">STOP_IOE</span></code></p></td>
<td><p>1</p></td>
<td><p>Stop on I/O error</p></td>
</tr>
</tbody>
</table>
<p>Error handling is as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Error</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">STOP_IOE</span></code></p></th>
<th class="head"><p>Processed as</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="2"><p>not attached</p></td>
<td><p>1</p></td>
<td><p>Report error and stop</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Disk not ready</p></td>
</tr>
<tr class="row-even"><td><p>End of file</p></td>
<td><p>x</p></td>
<td><p>Assume rest of disk is zero</p></td>
</tr>
<tr class="row-odd"><td><p>OS I/O error</p></td>
<td><p>x</p></td>
<td><p>Report error and stop</p></td>
</tr>
</tbody>
</table>
</section>
<section id="uda50-mscp-disk-controllers-rq-rqb-rqc-rqd">
<h4><span class="sectnum">1.2.4.4. </span>UDA50 MSCP disk controllers (RQ, RQB, RQC, RQD)<a class="headerlink" href="#uda50-mscp-disk-controllers-rq-rqb-rqc-rqd" title="Permalink to this heading">¶</a></h4>
<p>The simulator implements four MSCP disk controllers, RQ, RQB, RQC, RQD.
Initially, RQB, RQC, and RQD are disabled.
Each RQ controller simulates an UDA50 MSCP disk controller with four drives.
RQ options include the ability to set units write enabled or write locked,
and to set the drive type to one of many disk types:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">RQn</span> <span class="n">LOCKED</span>                <span class="n">Set</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">write</span> <span class="n">locked</span>
<span class="n">SET</span> <span class="n">RQn</span> <span class="n">WRITEENABLED</span>          <span class="n">Set</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">write</span> <span class="n">enabled</span>
<span class="n">SET</span> <span class="n">RQn</span> <span class="n">RX50</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RX50</span>
<span class="n">SET</span> <span class="n">RQn</span> <span class="n">RX33</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RX33</span>
<span class="n">SET</span> <span class="n">RQn</span> <span class="n">RD51</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RD51</span>
<span class="n">SET</span> <span class="n">RQn</span> <span class="n">RD52</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RD52</span>
<span class="n">SET</span> <span class="n">RQn</span> <span class="n">RD53</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RD53</span>
<span class="n">SET</span> <span class="n">RQn</span> <span class="n">RD54</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RD54</span>
<span class="n">SET</span> <span class="n">RQn</span> <span class="n">RD31</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RD31</span>
<span class="n">SET</span> <span class="n">RQn</span> <span class="n">RA81</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RA81</span>
<span class="n">SET</span> <span class="n">RQn</span> <span class="n">RA82</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RA82</span>
<span class="nb">set</span> <span class="n">RQn</span> <span class="n">RA71</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RA71</span>
<span class="n">SET</span> <span class="n">RQn</span> <span class="n">RA72</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RA72</span>
<span class="n">SET</span> <span class="n">RQn</span> <span class="n">RA90</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RA90</span>
<span class="n">SET</span> <span class="n">RQn</span> <span class="n">RA92</span>                  <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RA92</span>
<span class="n">SET</span> <span class="n">RQn</span> <span class="n">RRD40</span>                 <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RRD40</span> <span class="p">(</span><span class="n">CD</span> <span class="n">ROM</span><span class="p">)</span>
<span class="n">SET</span> <span class="n">RQn</span> <span class="n">RAUSER</span><span class="p">{</span><span class="o">=</span><span class="n">n</span><span class="p">}</span>            <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RA82</span> <span class="k">with</span> <span class="n">n</span> <span class="n">MBs</span>
<span class="n">SET</span> <span class="o">-</span><span class="n">L</span> <span class="n">RQn</span> <span class="n">RAUSER</span><span class="p">{</span><span class="o">=</span><span class="n">n</span><span class="p">}</span>         <span class="n">Set</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">RA82</span> <span class="k">with</span> <span class="n">n</span> <span class="n">LBNs</span>
</pre></div>
</div>
<p>The type options can be used only when a unit is not attached to a file.
<code class="docutils literal notranslate"><span class="pre">RAUSER</span></code> is a “user specified” disk;
the user can specify the size of the disk in either MB (1000000 bytes) or logical block numbers (LBNs, 512 bytes each).
The minimum size is 5MB;
the maximum size is 2GB without extended file support,
1TB with extended file support.</p>
<p>Units can be set <code class="docutils literal notranslate"><span class="pre">ENABLED</span></code> or <code class="docutils literal notranslate"><span class="pre">DISABLED</span></code>.
The RQ controllers support the <code class="docutils literal notranslate"><span class="pre">BOOT</span></code> command.</p>
<p>Drive units have changeable unit numbers.
Unit numbers can be changed with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">RQn</span> <span class="n">UNIT</span><span class="o">=</span><span class="n">val</span>              <span class="n">Set</span> <span class="n">unit</span> <span class="n">plug</span> <span class="n">value</span>
</pre></div>
</div>
<p>Each device has 4 units which have unique MSCP unit numbers (0, 1, 2 and 3).</p>
<p>Each RQ controller implements the following special SHOW commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SHOW</span> <span class="n">RQn</span> <span class="n">TYPE</span>                 <span class="n">Show</span> <span class="n">drive</span> <span class="nb">type</span>
<span class="n">SHOW</span> <span class="n">RQ</span> <span class="n">RINGS</span>                 <span class="n">Show</span> <span class="n">command</span> <span class="ow">and</span> <span class="n">response</span> <span class="n">rings</span>
<span class="n">SHOW</span> <span class="n">RQ</span> <span class="n">FREEQ</span>                 <span class="n">Show</span> <span class="n">packet</span> <span class="n">free</span> <span class="n">queue</span>
<span class="n">SHOW</span> <span class="n">RQ</span> <span class="n">RESPQ</span>                 <span class="n">Show</span> <span class="n">packet</span> <span class="n">response</span> <span class="n">queue</span>
<span class="n">SHOW</span> <span class="n">RQ</span> <span class="n">UNITQ</span>                 <span class="n">Show</span> <span class="n">unit</span> <span class="n">queues</span>
<span class="n">SHOW</span> <span class="n">RQ</span> <span class="n">ALL</span>                   <span class="n">Show</span> <span class="nb">all</span> <span class="n">ring</span> <span class="ow">and</span> <span class="n">queue</span> <span class="n">state</span>
<span class="n">SHOW</span> <span class="n">RQn</span> <span class="n">UNITQ</span>                <span class="n">Show</span> <span class="n">unit</span> <span class="n">queues</span> <span class="k">for</span> <span class="n">unit</span> <span class="n">n</span>
<span class="n">SHOW</span> <span class="n">RQn</span> <span class="n">UNIT</span>                 <span class="n">Show</span> <span class="n">unit</span> <span class="n">plug</span> <span class="n">value</span>
</pre></div>
</div>
<p>Each RQ controller implements these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SA</span></code></p></td>
<td><p>16</p></td>
<td><p>Status/address register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">S1DAT</span></code></p></td>
<td><p>16</p></td>
<td><p>Step 1 init host data</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CQBA</span></code></p></td>
<td><p>22</p></td>
<td><p>Command queue base address</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CQLNT</span></code></p></td>
<td><p>8</p></td>
<td><p>Command queue length</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CQIDX</span></code></p></td>
<td><p>8</p></td>
<td><p>Command queue index</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RQBA</span></code></p></td>
<td><p>22</p></td>
<td><p>Request queue base address</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RQLNT</span></code></p></td>
<td><p>8</p></td>
<td><p>Request queue length</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RQIDX</span></code></p></td>
<td><p>8</p></td>
<td><p>Request queue index</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">FREE</span></code></p></td>
<td><p>5</p></td>
<td><p>Head of free packet list</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RESP</span></code></p></td>
<td><p>5</p></td>
<td><p>Head of response packet list</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PBSY</span></code></p></td>
<td><p>5</p></td>
<td><p>Number of busy packets</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CFLGS</span></code></p></td>
<td><p>16</p></td>
<td><p>Controller flags</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CSTA</span></code></p></td>
<td><p>4</p></td>
<td><p>Controller state</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PERR</span></code></p></td>
<td><p>9</p></td>
<td><p>Port error number</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CRED</span></code></p></td>
<td><p>5</p></td>
<td><p>Host credits</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">HAT</span></code></p></td>
<td><p>17</p></td>
<td><p>Host available timer</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">HTMO</span></code></p></td>
<td><p>17</p></td>
<td><p>Host timeout value</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CPKT[0:3]</span></code></p></td>
<td><p>5</p></td>
<td><p>Current packet, units 0 to 3</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PKTQ[0:3]</span></code></p></td>
<td><p>5</p></td>
<td><p>Packet queue, units 0 to 3</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">UFLG[0:3]</span></code></p></td>
<td><p>16</p></td>
<td><p>Unit flags, units 0 to 3</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PLUG[0:3]</span></code></p></td>
<td><p>16</p></td>
<td><p>Unit plug values, units 0 to 3</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
<td><p>1</p></td>
<td><p>Interrupt request</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ITIME</span></code></p></td>
<td><p>1</p></td>
<td><p>Response time for initialization steps
(except for step 4)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">QTIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Response time for ‘immediate’ packets</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">XTIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Response time for data transfers</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PKTS[33*32]</span></code></p></td>
<td><p>16</p></td>
<td><p>Packet buffers, 33W each, 32 entries</p></td>
</tr>
</tbody>
</table>
<p>While VMS is not timing sensitive,
most of the BSD-derived operating systems (NetBSD, OpenBSD, etc) are.
The <code class="docutils literal notranslate"><span class="pre">QTIME</span></code> and <code class="docutils literal notranslate"><span class="pre">XTIME</span></code> parameters are set to values that allow these operating systems to run correctly.</p>
<p>Error handling is as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Error</p></th>
<th class="head"><p>Processed as</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>not attached</p></td>
<td><p>Disk not ready</p></td>
</tr>
<tr class="row-odd"><td><p>end of file</p></td>
<td><p>Assume rest of disk is zero</p></td>
</tr>
<tr class="row-even"><td><p>OS I/O error</p></td>
<td><p>Report error and stop</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tapes">
<h3><span class="sectnum">1.2.5. </span>Tapes<a class="headerlink" href="#tapes" title="Permalink to this heading">¶</a></h3>
<section id="tm03-te16-tu45-tu77-magnetic-tapes-tu">
<h4><span class="sectnum">1.2.5.1. </span>TM03/TE16/TU45/TU77 magnetic tapes (TU)<a class="headerlink" href="#tm03-te16-tu45-tu77-magnetic-tapes-tu" title="Permalink to this heading">¶</a></h4>
<p>The TU controller implements the Massbus family of 800/1600bpi magnetic tape drives.
TU options include the ability to set the drive type to one of three drives (TE16, TU45, or TU77),
and to set the drives write enabled or write locked.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">TUn</span> <span class="n">TE16</span>                  <span class="n">Set</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">drive</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">TE16</span>
<span class="n">SET</span> <span class="n">TUn</span> <span class="n">TU45</span>                  <span class="n">Set</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">drive</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">TU45</span>
<span class="n">SET</span> <span class="n">TUn</span> <span class="n">TU77</span>                  <span class="n">Set</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">drive</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">TU77</span>
<span class="n">SET</span> <span class="n">Tun</span> <span class="n">LOCKED</span>                <span class="n">Set</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">write</span> <span class="n">locked</span>
<span class="n">SET</span> <span class="n">Tun</span> <span class="n">WRITEENABLED</span>          <span class="n">Set</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">write</span> <span class="n">enabled</span>
</pre></div>
</div>
<p>Magnetic tape units can be set to a specific reel capacity in MB, or to unlimited capacity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">TUn</span> <span class="n">CAPAC</span><span class="o">=</span><span class="n">m</span>               <span class="n">Set</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">capacity</span> <span class="n">to</span> <span class="n">m</span> <span class="n">MB</span> <span class="p">(</span><span class="mi">0</span> <span class="o">=</span> <span class="n">unlimited</span><span class="p">)</span>
<span class="n">SHOW</span> <span class="n">TUn</span> <span class="n">CAPAC</span>                <span class="n">Show</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">capacity</span> <span class="ow">in</span> <span class="n">MB</span>
</pre></div>
</div>
<p>Units can be set <code class="docutils literal notranslate"><span class="pre">ENABLED</span></code> or <code class="docutils literal notranslate"><span class="pre">DISABLED</span></code>.
The TU controller does not support the <code class="docutils literal notranslate"><span class="pre">BOOT</span></code> command.</p>
<p>The TU controller implements the following registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CS1</span></code></p></td>
<td><p>6</p></td>
<td><p>Current operation</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">FC</span></code></p></td>
<td><p>16</p></td>
<td><p>Frame count</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">FS</span></code></p></td>
<td><p>16</p></td>
<td><p>Formatter status</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ER</span></code></p></td>
<td><p>16</p></td>
<td><p>Formatter errors</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CC</span></code></p></td>
<td><p>16</p></td>
<td><p>Check character</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">MR</span></code></p></td>
<td><p>16</p></td>
<td><p>Maintenance register</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TC</span></code></p></td>
<td><p>16</p></td>
<td><p>Tape control register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Operation execution time</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">UST</span></code></p></td>
<td><p>17</p></td>
<td><p>Unit status, drives 0 to 7</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">POS</span></code></p></td>
<td><p>32</p></td>
<td><p>Position, drive 0 to 7</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">STOP_IOE</span></code></p></td>
<td><p>1</p></td>
<td><p>Stop of I/O error</p></td>
</tr>
</tbody>
</table>
<p>Error handling is as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Error</p></th>
<th class="head"><p>Processed as</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>not attached</p></td>
<td><p>Tape not ready; if <code class="docutils literal notranslate"><span class="pre">STOP_IOE</span></code>, stop</p></td>
</tr>
<tr class="row-odd"><td><p>end of file</p></td>
<td><p>Bad tape</p></td>
</tr>
<tr class="row-even"><td><p>OS I/O error</p></td>
<td><p>Parity error; if <code class="docutils literal notranslate"><span class="pre">STOP_IOE</span></code>, stop</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ts11-magnetic-tape-ts">
<h4><span class="sectnum">1.2.5.2. </span>TS11 magnetic tape (TS)<a class="headerlink" href="#ts11-magnetic-tape-ts" title="Permalink to this heading">¶</a></h4>
<p>TS options include the ability to make the unit write enabled or write locked.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">TS</span> <span class="n">LOCKED</span>                 <span class="n">Set</span> <span class="n">unit</span> <span class="n">write</span> <span class="n">locked</span>
<span class="n">SET</span> <span class="n">TS</span> <span class="n">WRITEENABLED</span>           <span class="n">Set</span> <span class="n">unit</span> <span class="n">write</span> <span class="n">enabled</span>
</pre></div>
</div>
<p>The TS drive can be set to a specific reel capacity in MB, or to unlimited capacity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">TS0</span> <span class="n">CAPAC</span><span class="o">=</span><span class="n">m</span>               <span class="n">Set</span> <span class="n">capacity</span> <span class="n">to</span> <span class="n">m</span> <span class="n">MB</span> <span class="p">(</span><span class="mi">0</span> <span class="o">=</span> <span class="n">unlimited</span><span class="p">)</span>
<span class="n">SHOW</span> <span class="n">TS0</span> <span class="n">CAPAC</span>                <span class="n">Show</span> <span class="n">capacity</span> <span class="ow">in</span> <span class="n">MB</span>
</pre></div>
</div>
<p>The TS11 does not support the <code class="docutils literal notranslate"><span class="pre">BOOT</span></code> command.</p>
<p>The TS controller implements these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TSSR</span></code></p></td>
<td><p>16</p></td>
<td><p>Status register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TSBA</span></code></p></td>
<td><p>16</p></td>
<td><p>Bus address register</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TSDBX</span></code></p></td>
<td><p>16</p></td>
<td><p>Data buffer extension register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CHDR</span></code></p></td>
<td><p>16</p></td>
<td><p>Command packet header</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CADL</span></code></p></td>
<td><p>16</p></td>
<td><p>Command packet low address or count</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CADH</span></code></p></td>
<td><p>16</p></td>
<td><p>Command packet high address</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CLNT</span></code></p></td>
<td><p>16</p></td>
<td><p>Command packet length</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">MHDR</span></code></p></td>
<td><p>16</p></td>
<td><p>Message packet header</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">MRFC</span></code></p></td>
<td><p>16</p></td>
<td><p>Message packet residual frame count</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">MXS0</span></code></p></td>
<td><p>16</p></td>
<td><p>Message packet extended status 0</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">MXS1</span></code></p></td>
<td><p>16</p></td>
<td><p>Message packet extended status 1</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">MXS2</span></code></p></td>
<td><p>16</p></td>
<td><p>Message packet extended status 2</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">MXS3</span></code></p></td>
<td><p>16</p></td>
<td><p>Message packet extended status 3</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">MXS4</span></code></p></td>
<td><p>16</p></td>
<td><p>Message packet extended status 4</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">WADL</span></code></p></td>
<td><p>16</p></td>
<td><p>Write char packet low address</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">WADH</span></code></p></td>
<td><p>16</p></td>
<td><p>Write char packet high address</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">WLNT</span></code></p></td>
<td><p>16</p></td>
<td><p>Write char packet length</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">WOPT</span></code></p></td>
<td><p>16</p></td>
<td><p>Write char packet options</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">WXOPT</span></code></p></td>
<td><p>16</p></td>
<td><p>Write char packet extended options</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ATTN</span></code></p></td>
<td><p>1</p></td>
<td><p>Attention message pending</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BOOT</span></code></p></td>
<td><p>1</p></td>
<td><p>Boot request pending</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">OWNC</span></code></p></td>
<td><p>1</p></td>
<td><p>If set, tape owns command buffer</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">OWNM</span></code></p></td>
<td><p>1</p></td>
<td><p>If set, tape owns message buffer</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Delay</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">POS</span></code></p></td>
<td><p>32</p></td>
<td><p>Position</p></td>
</tr>
</tbody>
</table>
<p>Error handling is as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Error</p></th>
<th class="head"><p>Processed as</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>not attached</p></td>
<td><p>Tape not ready</p></td>
</tr>
<tr class="row-odd"><td><p>end of file</p></td>
<td><p>Bad tape</p></td>
</tr>
<tr class="row-even"><td><p>OS I/O error</p></td>
<td><p>Fatal tape error</p></td>
</tr>
</tbody>
</table>
</section>
<section id="tuk50-tmscp-tape-controller-tq">
<h4><span class="sectnum">1.2.5.3. </span>TUK50 TMSCP tape controller (TQ)<a class="headerlink" href="#tuk50-tmscp-tape-controller-tq" title="Permalink to this heading">¶</a></h4>
<p>The TQ controller simulates the TUK50 TMSCP tape controller.
TQ options include the ability to set units write enabled or write locked,
and to specify the controller type and tape length:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">TQn</span> <span class="n">LOCKED</span>                <span class="n">Set</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">write</span> <span class="n">locked</span>
<span class="n">SET</span> <span class="n">TQn</span> <span class="n">WRITEENABLED</span>          <span class="n">Set</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">write</span> <span class="n">enabled</span>
<span class="n">SET</span> <span class="n">TQ</span> <span class="n">TK50</span>                   <span class="n">Set</span> <span class="n">controller</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">TK50</span>
<span class="n">SET</span> <span class="n">TQ</span> <span class="n">TK70</span>                   <span class="n">Set</span> <span class="n">controller</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">TK70</span>
<span class="n">SET</span> <span class="n">TQ</span> <span class="n">TU81</span>                   <span class="n">Set</span> <span class="n">controller</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">TU81</span>
<span class="n">SET</span> <span class="n">TQ</span> <span class="n">TKUSER</span><span class="p">{</span><span class="o">=</span><span class="n">n</span><span class="p">}</span>             <span class="n">Set</span> <span class="n">controller</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">TK50</span> <span class="k">with</span> <span class="n">tape</span>
                              <span class="n">capacity</span> <span class="n">of</span> <span class="n">n</span> <span class="n">MB</span>
</pre></div>
</div>
<p>User-specified capacity must be between 50 and 2000 MB.
The TUK50 supports the <code class="docutils literal notranslate"><span class="pre">BOOT</span></code> command.</p>
<p>Regardless of the controller type,
individual units can be set to a specific reel capacity in MB,
or to unlimited capacity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">TQn</span> <span class="n">CAPAC</span><span class="o">=</span><span class="n">m</span>               <span class="n">Set</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">capacity</span> <span class="n">to</span> <span class="n">m</span> <span class="n">MB</span> <span class="p">(</span><span class="mi">0</span> <span class="o">=</span> <span class="n">unlimited</span><span class="p">)</span>
<span class="n">SHOW</span> <span class="n">TQn</span> <span class="n">CAPAC</span>                <span class="n">Show</span> <span class="n">unit</span> <span class="n">n</span> <span class="n">capacity</span> <span class="ow">in</span> <span class="n">MB</span>
</pre></div>
</div>
<p>Drive units have changeable unit numbers.
Unit numbers can be changed with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">TQn</span> <span class="n">UNIT</span><span class="o">=</span><span class="n">val</span>              <span class="n">Set</span> <span class="n">unit</span> <span class="n">plug</span> <span class="n">value</span>
</pre></div>
</div>
<p>Device TQ has 4 units (TQ0, TQ1, TQ2 and TQ3) which have unique MSCP unit numbers (0, 1, 2 and 3).</p>
<p>The TQ controller implements the following special <code class="docutils literal notranslate"><span class="pre">SHOW</span></code> commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SHOW</span> <span class="n">TQ</span> <span class="n">TYPE</span>                  <span class="n">Show</span> <span class="n">controller</span> <span class="nb">type</span>
<span class="n">SHOW</span> <span class="n">TQ</span> <span class="n">RINGS</span>                 <span class="n">Show</span> <span class="n">command</span> <span class="ow">and</span> <span class="n">response</span> <span class="n">rings</span>
<span class="n">SHOW</span> <span class="n">TQ</span> <span class="n">FREEQ</span>                 <span class="n">Show</span> <span class="n">packet</span> <span class="n">free</span> <span class="n">queue</span>
<span class="n">SHOW</span> <span class="n">TQ</span> <span class="n">RESPQ</span>                 <span class="n">Show</span> <span class="n">packet</span> <span class="n">response</span> <span class="n">queue</span>
<span class="n">SHOW</span> <span class="n">TQ</span> <span class="n">UNITQ</span>                 <span class="n">Show</span> <span class="n">unit</span> <span class="n">queues</span>
<span class="n">SHOW</span> <span class="n">TQ</span> <span class="n">ALL</span>                   <span class="n">Show</span> <span class="nb">all</span> <span class="n">ring</span> <span class="ow">and</span> <span class="n">queue</span> <span class="n">state</span>
<span class="n">SHOW</span> <span class="n">TQn</span> <span class="n">UNITQ</span>                <span class="n">Show</span> <span class="n">unit</span> <span class="n">queues</span> <span class="k">for</span> <span class="n">unit</span> <span class="n">n</span>
<span class="n">SHOW</span> <span class="n">TQn</span> <span class="n">UNIT</span>                 <span class="n">Show</span> <span class="n">unit</span> <span class="n">plug</span> <span class="n">value</span>
</pre></div>
</div>
<p>The TQ controller implements these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SA</span></code></p></td>
<td><p>16</p></td>
<td><p>Status/address register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">S1DAT</span></code></p></td>
<td><p>16</p></td>
<td><p>Step 1 init host data</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CQBA</span></code></p></td>
<td><p>22</p></td>
<td><p>Command queue base address</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CQLNT</span></code></p></td>
<td><p>8</p></td>
<td><p>Command queue length</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CQIDX</span></code></p></td>
<td><p>8</p></td>
<td><p>Command queue index</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RQBA</span></code></p></td>
<td><p>22</p></td>
<td><p>Request queue base address</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RQLNT</span></code></p></td>
<td><p>8</p></td>
<td><p>Request queue length</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RQIDX</span></code></p></td>
<td><p>8</p></td>
<td><p>Request queue index</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">FREE</span></code></p></td>
<td><p>5</p></td>
<td><p>Head of free packet list</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RESP</span></code></p></td>
<td><p>5</p></td>
<td><p>Head of response packet list</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PBSY</span></code></p></td>
<td><p>5</p></td>
<td><p>Number of busy packets</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CFLGS</span></code></p></td>
<td><p>16</p></td>
<td><p>Controller flags</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CSTA</span></code></p></td>
<td><p>4</p></td>
<td><p>Controller state</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PERR</span></code></p></td>
<td><p>9</p></td>
<td><p>Port error number</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CRED</span></code></p></td>
<td><p>5</p></td>
<td><p>Host credits</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">HAT</span></code></p></td>
<td><p>17</p></td>
<td><p>Host available timer</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">HTMO</span></code></p></td>
<td><p>17</p></td>
<td><p>Host timeout value</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CPKT[0:3]</span></code></p></td>
<td><p>5</p></td>
<td><p>Current packet, units 0 to 3</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PKTQ[0:3]</span></code></p></td>
<td><p>5</p></td>
<td><p>Packet queue, units 0 to 3</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">UFLG[0:3]</span></code></p></td>
<td><p>16</p></td>
<td><p>Unit flags, units 0 to 3</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PLUG[0:3]</span></code></p></td>
<td><p>16</p></td>
<td><p>Unit plug values, units 0 to 3</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">POS[0:3]</span></code></p></td>
<td><p>32</p></td>
<td><p>Tape position, units 0 to 3</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">OBJP[0:3]</span></code></p></td>
<td><p>32</p></td>
<td><p>Object position, units 0 to 3</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
<td><p>1</p></td>
<td><p>Interrupt request</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ITIME</span></code></p></td>
<td><p>1</p></td>
<td><p>Response time for initialization steps
(except for step 4)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">QTIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Response time for ‘immediate’ packets</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">XTIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Response time for data transfers</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PKTS[33*32]</span></code></p></td>
<td><p>16</p></td>
<td><p>Packet buffers, 33W each, 32 entries</p></td>
</tr>
</tbody>
</table>
<p>Error handling is as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Error</p></th>
<th class="head"><p>Processed as</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>not attached</p></td>
<td><p>Tape not ready</p></td>
</tr>
<tr class="row-odd"><td><p>end of file</p></td>
<td><p>End of medium</p></td>
</tr>
<tr class="row-even"><td><p>OS I/O error</p></td>
<td><p>Fatal tape error</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="communications-devices">
<h3><span class="sectnum">1.2.6. </span>Communications devices<a class="headerlink" href="#communications-devices" title="Permalink to this heading">¶</a></h3>
<section id="dz11-terminal-multiplexer-dz">
<h4><span class="sectnum">1.2.6.1. </span>DZ11 terminal multiplexer (DZ)<a class="headerlink" href="#dz11-terminal-multiplexer-dz" title="Permalink to this heading">¶</a></h4>
<p>The DZ11 is an 8-line terminal multiplexer.
Up to 32 DZ11s (256 lines) are supported.
The default number of lines is 32.
The number of lines can be changed with the command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">DZ</span> <span class="n">LINES</span><span class="o">=</span><span class="n">n</span>                <span class="n">Set</span> <span class="n">line</span> <span class="n">count</span> <span class="n">to</span> <span class="n">n</span>
</pre></div>
</div>
<p>The line count must be a multiple of 8, with a maximum of 256.</p>
<p>The DZ11 supports three character processing modes, <code class="docutils literal notranslate"><span class="pre">7P</span></code>, <code class="docutils literal notranslate"><span class="pre">7B</span></code>, and <code class="docutils literal notranslate"><span class="pre">8B</span></code>:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Mode</p></th>
<th class="head"><p>Input characters</p></th>
<th class="head"><p>Output characters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">7P</span></code></p></td>
<td><p>High-order bit cleared</p></td>
<td><p>High-order bit cleared,
non-printing characters suppressed</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">7B</span></code></p></td>
<td><p>High-order bit cleared</p></td>
<td><p>High-order bit cleared</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">8B</span></code></p></td>
<td><p>No changes</p></td>
<td><p>No changes</p></td>
</tr>
</tbody>
</table>
<p>The default is <code class="docutils literal notranslate"><span class="pre">8B</span></code>.</p>
<p>The DZ11 supports logging on a per-line basis.
The command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">DZ</span> <span class="n">LOG</span><span class="o">=</span><span class="n">line</span><span class="o">=</span><span class="n">filename</span>
</pre></div>
</div>
<p>enables logging for the specified line to the indicated file.
The command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">DZ</span> <span class="n">NOLOG</span><span class="o">=</span><span class="n">line</span>
</pre></div>
</div>
<p>disables logging for the specified line and closes any open log file.
Finally, the command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SHOW</span> <span class="n">DZ</span> <span class="n">LOG</span>
</pre></div>
</div>
<p>displays logging information for all DZ lines.</p>
<p>The terminal lines perform input and output through Telnet sessions connected to a user-specified port.
The <code class="docutils literal notranslate"><span class="pre">ATTACH</span></code> command specifies the port to be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="p">{</span><span class="o">-</span><span class="n">am</span><span class="p">}</span> <span class="n">DZ</span> <span class="o">&lt;</span><span class="n">port</span><span class="o">&gt;</span>        <span class="n">Set</span> <span class="n">up</span> <span class="n">listening</span> <span class="n">port</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;port&gt;</span></code> is a decimal number between 1 and 65535 that is not being used for other TCP/IP activities.
The optional switch <code class="docutils literal notranslate"><span class="pre">-m</span></code> turns on the DZ11’s modem controls;
the optional switch <code class="docutils literal notranslate"><span class="pre">-a</span></code> turns on active disconnects
(disconnect session if computer clears Data Terminal Ready).
Without modem control, the DZ behaves as though terminals were directly connected;
disconnecting the Telnet session does not cause any operating system-visible change in line status.</p>
<p>Once the DZ is attached and the simulator is running,
the DZ will listen for connections on the specified port.
It assumes that the incoming connections are Telnet connections.
The connection remains open until disconnected by the simulated program,
the Telnet client, a <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">DZ</span> <span class="pre">DISCONNECT</span></code> command, or a <code class="docutils literal notranslate"><span class="pre">DETACH</span> <span class="pre">DZ</span></code> command.</p>
<p>Other special DZ commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SHOW</span> <span class="n">DZ</span> <span class="n">CONNECTIONS</span>           <span class="n">Show</span> <span class="n">current</span> <span class="n">connections</span>
<span class="n">SHOW</span> <span class="n">DZ</span> <span class="n">STATISTICS</span>            <span class="n">Show</span> <span class="n">statistics</span> <span class="k">for</span> <span class="n">active</span> <span class="n">connections</span>
<span class="n">SET</span> <span class="n">DZ</span> <span class="n">DISCONNECT</span><span class="o">=</span><span class="n">linenumber</span>  <span class="n">Disconnects</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">line</span>
</pre></div>
</div>
<p>The DZ11 implements these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CSR[0:3]</span></code></p></td>
<td><p>16</p></td>
<td><p>Control/status register, boards 0 to 3</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RBUF[0:3]</span></code></p></td>
<td><p>16</p></td>
<td><p>Receive buffer, boards 0 to 3</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">LPR[0:3]</span></code></p></td>
<td><p>16</p></td>
<td><p>Line parameter register, boards 0 to 3</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TCR[0:3]</span></code></p></td>
<td><p>16</p></td>
<td><p>Transmission control register, boards 0 to 3</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">MSR[0:3]</span></code></p></td>
<td><p>16</p></td>
<td><p>Modem status register, boards 0 to 3</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TDR[0:3]</span></code></p></td>
<td><p>16</p></td>
<td><p>Transmit data register, boards 0 to 3</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SAENB[0:3]</span></code></p></td>
<td><p>1</p></td>
<td><p>Silo alarm enabled, boards 0 to 3</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RXINT</span></code></p></td>
<td><p>4</p></td>
<td><p>Receive interrupts, boards 3 to 0</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TXINT</span></code></p></td>
<td><p>4</p></td>
<td><p>Transmit interrupts, boards 3 to 0</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">MDMTCL</span></code></p></td>
<td><p>1</p></td>
<td><p>Modem control enabled</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AUTODS</span></code></p></td>
<td><p>1</p></td>
<td><p>Autodisconnect enabled</p></td>
</tr>
</tbody>
</table>
<p>The DZ11 does not support save and restore.
All open connections are lost when the simulator shuts down or the DZ is detached.</p>
</section>
<section id="dhu11-terminal-multiplexer-vh">
<h4><span class="sectnum">1.2.6.2. </span>DHU11 terminal multiplexer (VH)<a class="headerlink" href="#dhu11-terminal-multiplexer-vh" title="Permalink to this heading">¶</a></h4>
<p>The DHU11 is an 16-line terminal multiplexer for Unibus systems.
Up to 4 DHU11s are supported.</p>
<p>The number of active DHU11 devices is configured by setting the number of multiplexer lines desired.
The number of DHU11 lines can be set as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">VH</span> <span class="n">LINES</span><span class="o">=</span><span class="n">n</span>                <span class="n">n</span> <span class="n">must</span> <span class="n">be</span> <span class="n">a</span> <span class="n">multiple</span> <span class="n">of</span> <span class="mi">16</span>
</pre></div>
</div>
<p>The DHU11 is a programmable asynchronous terminal multiplexer.
The register sets are compatible with these devices.
For transmission, the DHU11 can be used in either DMA or programmed I/O mode.
For reception, there is a 256-entry FIFO for received characters, dataset status changes, and diagnostic information, and a programmable input interrupt timer.
The device supports 16-, 18-, and 22-bit addressing.
The DHU11 can be programmed to filter and/or handle XON/XOFF characters independently of the processor.
The DHU11 supports programmable bit-width (between 5 and 8) for the input and output of characters.</p>
<p>The VH controller may be adjusted on a per controller basis as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">VHn</span> <span class="n">DHU</span>                   <span class="n">Use</span> <span class="n">the</span> <span class="n">DHU</span> <span class="n">programming</span> <span class="n">mode</span> <span class="ow">and</span> <span class="n">registers</span>
<span class="n">SET</span> <span class="n">VHn</span> <span class="n">DHV</span>                   <span class="n">Use</span> <span class="n">the</span> <span class="n">DHV</span> <span class="n">programming</span> <span class="n">mode</span> <span class="ow">and</span> <span class="n">registers</span>
</pre></div>
</div>
<p>DMA output is supported.
In a real DHU11, DMA is not initiated immediately upon receipt of <code class="docutils literal notranslate"><span class="pre">TX.DMA.START</span></code> but is dependent upon some internal processes.
The VH controller mimics this behavior by default.
It may be desirable to alter this and start immediately,
though this may not be compatible with all operating systems and diagnostics.
You can change the behavior of the VH controller as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">VHn</span> <span class="n">NORMAL</span>                <span class="n">Use</span> <span class="n">normal</span> <span class="n">DMA</span> <span class="n">procedures</span>
<span class="n">SET</span> <span class="n">VHn</span> <span class="n">FASTDMA</span>               <span class="n">Set</span> <span class="n">DMA</span> <span class="n">to</span> <span class="n">initiate</span> <span class="n">immediately</span>
</pre></div>
</div>
<p>The terminal lines perform input and output through Telnet sessions connected to a user-specified port.
The <code class="docutils literal notranslate"><span class="pre">ATTACH</span></code> command specifies the TCP listening port to be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="n">VH</span> <span class="o">&lt;</span><span class="n">port</span><span class="o">&gt;</span>              <span class="n">Set</span> <span class="n">up</span> <span class="n">listening</span> <span class="n">port</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;port&gt;</span></code> is a decimal number between 1 and 65535 that is not being used for other TCP/IP activities.
This port is the point of entry for al lines on all VH controllers.</p>
<p>Modem and auto-disconnect support may be set on an individual controller basis.
The <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">MODEM</span></code> command directs the controller to report modem status changes to the computer.
The <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">HANGUP</span></code> command turns on active disconnects
(disconnect session if computer clears Data Terminal Ready).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">VHn</span> <span class="p">[</span><span class="n">NO</span><span class="p">]</span><span class="n">MODEM</span>             <span class="n">Disable</span><span class="o">/</span><span class="n">enable</span> <span class="n">modem</span> <span class="n">control</span>
<span class="n">SET</span> <span class="n">VHn</span> <span class="p">[</span><span class="n">NO</span><span class="p">]</span><span class="n">HANGUP</span>            <span class="n">Disable</span><span class="o">/</span><span class="n">enable</span> <span class="n">disconnect</span> <span class="n">on</span> <span class="n">DTR</span> <span class="n">drop</span>
</pre></div>
</div>
<p>Once the VH is attached and the simulator is running,
the VH will listen for connections on the specified port.
It assumes that the incoming connections are Telnet connections.
The connection remains open until disconnected by the simulated program,
the Telnet client, a <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">VH</span> <span class="pre">DISCONNECT</span></code> command, or a <code class="docutils literal notranslate"><span class="pre">DETACH</span> <span class="pre">VH</span></code> command.</p>
<p>Other special VH commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SHOW</span> <span class="n">VH</span> <span class="n">CONNECTIONS</span>           <span class="n">Show</span> <span class="n">current</span> <span class="n">connections</span>
<span class="n">SHOW</span> <span class="n">VH</span> <span class="n">STATISTICS</span>            <span class="n">Show</span> <span class="n">statistics</span> <span class="k">for</span> <span class="n">active</span> <span class="n">connections</span>
<span class="n">SET</span> <span class="n">VH</span> <span class="n">DISCONNECT</span><span class="o">=</span><span class="n">linenumber</span>  <span class="n">Disconnects</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">line</span>
</pre></div>
</div>
<p>The DHU11 implements these registers,
though not all can be examined from SCP:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CSR[0:3]</span></code></p></td>
<td><p>16</p></td>
<td><p>Control/status register, boards 0 to 3</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RBUF[0:3]</span></code></p></td>
<td><p>16</p></td>
<td><p>Receive buffer, boards 0 to 3</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">LPR[0:3]</span></code></p></td>
<td><p>16</p></td>
<td><p>Line parameter register, boards 0 to 3</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RXINT</span></code></p></td>
<td><p>4</p></td>
<td><p>Receive interrupts, boards 3..0</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TXINT</span></code></p></td>
<td><p>4</p></td>
<td><p>Transmit interrupts, boards 3..0</p></td>
</tr>
</tbody>
</table>
<p>The DHU11 partially supports save and restore.
Restoring a saved configuration will reestablish the listening port configuration,
however all active sessions will be lost.
All open connections are lost when the simulator shuts down or the VH is detached.</p>
</section>
<section id="delua-deuna-unibus-ethernet-controllers-xu-xub">
<h4><span class="sectnum">1.2.6.3. </span>DELUA/DEUNA Unibus Ethernet controllers (XU, XUB)<a class="headerlink" href="#delua-deuna-unibus-ethernet-controllers-xu-xub" title="Permalink to this heading">¶</a></h4>
<p>The simulator implements two DELUA/DEUNA Unibus Ethernet controllers (XU, XUB).
Initially, both XU and XQB are disabled.
Options allow control of the MAC address, the controller mode, and the sanity timer.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span>  <span class="n">XU</span> <span class="n">MAC</span><span class="o">=&lt;</span><span class="n">mac</span><span class="o">-</span><span class="n">address</span><span class="o">&gt;</span>     <span class="n">ex</span><span class="o">.</span> <span class="mi">08</span><span class="o">-</span><span class="mi">00</span><span class="o">-</span><span class="mi">2</span><span class="n">B</span><span class="o">-</span><span class="n">CC</span><span class="o">-</span><span class="n">DD</span><span class="o">-</span><span class="n">EE</span>
<span class="n">SHOW</span> <span class="n">XU</span> <span class="n">MAC</span>
</pre></div>
</div>
<p>These commands are used to change or display the MAC address.
<code class="docutils literal notranslate"><span class="pre">&lt;mac-address&gt;</span></code> is a valid ethernet MAC, delimited by dashes or periods.
The controller defaults to <code class="docutils literal notranslate"><span class="pre">08-00-2B-CC-DD-EE</span></code>,
which should be sufficient if there is only one SIMH controller on your LAN.
Two cards with the same MAC address will see each other’s packets,
resulting in a serious mess.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span>  <span class="n">XU</span> <span class="n">TYPE</span><span class="o">=</span><span class="p">{</span><span class="n">DEUNA</span><span class="o">|</span><span class="p">[</span><span class="n">DELUA</span><span class="p">]}</span>
<span class="n">SHOW</span> <span class="n">XU</span> <span class="n">TYPE</span>
</pre></div>
</div>
<p>These commands are used to change or display the controller mode.
DELUA mode is better and faster but may not be usable by older or non-DEC OSes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SHOW</span> <span class="n">XU</span> <span class="n">STATS</span>
</pre></div>
</div>
<p>This command will display the accumulated statistics for the simulated Ethernet controller.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SHOW</span> <span class="n">XU</span> <span class="n">FILTERS</span>
</pre></div>
</div>
<p>This command will display the MAC addresses which the controller will receive packets addressed to.</p>
<p>To access the network,
the simulated Ethernet controller must be attached to a real Ethernet interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="n">XU</span> <span class="p">{</span><span class="n">ethX</span><span class="o">|&lt;</span><span class="n">device_name</span><span class="o">&gt;</span><span class="p">}</span>      <span class="n">ex</span><span class="o">.</span> <span class="n">eth0</span> <span class="ow">or</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">era0</span>
<span class="n">SHOW</span> <span class="n">XU</span> <span class="n">ETH</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">X</span></code> in <code class="docutils literal notranslate"><span class="pre">ethX</span></code> is the number of the Ethernet controller to attach, or the real device name.
The <code class="docutils literal notranslate"><span class="pre">X</span></code> number is system-dependent.
If you only have one Ethernet controller, the number will probably be 0.
To find out what your system thinks the Ethernet numbers are, use the <code class="docutils literal notranslate"><span class="pre">SHOW</span> <span class="pre">XQ</span> <span class="pre">ETH</span></code> command.
The device list can be quite cryptic, depending on the host system, but is probably better than guessing.
If you do not attach the device, the controller will behave as though the Ethernet cable were unplugged.</p>
<p>One final note: because of its asynchronous nature,
the XU controller is not limited to the ~1.5Mbit/sec of the real DEUNA/DELUA controllers,
nor the 10Mbit/sec of a standard Ethernet.
Attach it to a Fast Ethernet (100 Mbit/sec) card, and “Feel the Power!” 😀</p>
</section>
<section id="dmc11-dmr11-unibus-ddcmp-controllers">
<h4><span class="sectnum">1.2.6.4. </span>DMC11/DMR11 Unibus DDCMP controllers<a class="headerlink" href="#dmc11-dmr11-unibus-ddcmp-controllers" title="Permalink to this heading">¶</a></h4>
<p>The DMC11 is a communication subsystem which consists of a microprocessor based,
intelligent synchronous communications controller which employs the DIGITAL Data Communications Message Protocol (DDCMP).</p>
<section id="hardware-description">
<h5><span class="sectnum">1.2.6.4.1. </span>Hardware description<a class="headerlink" href="#hardware-description" title="Permalink to this heading">¶</a></h5>
<p>The DMC11 consists of a microprocessor module and a synchronous line unit module.</p>
<section id="models">
<h6><span class="sectnum">1.2.6.4.1.1. </span>Models<a class="headerlink" href="#models" title="Permalink to this heading">¶</a></h6>
<p>There were a number of microprocessor controlled DDCMP devices produced.</p>
<section id="dmc11">
<h6 aria-level="7"><span class="sectnum">1.2.6.4.1.1.1. </span>DMC11<a class="headerlink" href="#dmc11" title="Permalink to this heading">¶</a></h6>
<p>The original kmc11 microprocessor board with DMC microcode and a sync line unit.</p>
</section>
<section id="dmr11">
<h6 aria-level="7"><span class="sectnum">1.2.6.4.1.1.2. </span>DMR11<a class="headerlink" href="#dmr11" title="Permalink to this heading">¶</a></h6>
<p>The more advanced kmc11 microprocessor board with DMR microcode and a sync line unit.</p>
</section>
<section id="dmp11">
<h6 aria-level="7"><span class="sectnum">1.2.6.4.1.1.3. </span>DMP11<a class="headerlink" href="#dmp11" title="Permalink to this heading">¶</a></h6>
<p>A newly-designed Unibus board with a more complete programming interface and a sync line unit.</p>
</section>
<section id="dmv11">
<h6 aria-level="7"><span class="sectnum">1.2.6.4.1.1.4. </span>DMV11<a class="headerlink" href="#dmv11" title="Permalink to this heading">¶</a></h6>
<p>A Qbus version of the DMP11 with some more advanced refinements and a sync line unit.</p>
</section>
</section>
<section id="registers">
<h6><span class="sectnum">1.2.6.4.1.2. </span>Registers<a class="headerlink" href="#registers" title="Permalink to this heading">¶</a></h6>
<p>The DMC device implements these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DMC</span> <span class="pre">RXINT</span></code></p></td>
<td><p>32</p></td>
<td><p>Input interrupt summary</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DMC</span> <span class="pre">TXINT</span></code></p></td>
<td><p>32</p></td>
<td><p>Output interrupt summary</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DMC</span> <span class="pre">POLL</span></code></p></td>
<td><p>32</p></td>
<td><p>Connect poll interval</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DMC</span> <span class="pre">SEL0[0:7]</span></code></p></td>
<td><p>16</p></td>
<td><p>Select 0 CSR</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DMC</span> <span class="pre">SEL2[0:7]</span></code></p></td>
<td><p>16</p></td>
<td><p>Select 2 CSR</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DMC</span> <span class="pre">SEL4[0:7]</span></code></p></td>
<td><p>16</p></td>
<td><p>Select 4 CSR</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DMC</span> <span class="pre">SEL6[0:7]</span></code></p></td>
<td><p>16</p></td>
<td><p>Select 6 CSR</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DMC</span> <span class="pre">SPEED[0:7]</span></code></p></td>
<td><p>32</p></td>
<td><p>Line speed</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DMC</span> <span class="pre">PEER[0:5119]</span></code></p></td>
<td><p>8</p></td>
<td><p>Peer address:port</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DMC</span> <span class="pre">PORT[0:5119]</span></code></p></td>
<td><p>8</p></td>
<td><p>Listen port</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DMC</span> <span class="pre">BASEADDR[0:7]</span></code></p></td>
<td><p>32</p></td>
<td><p>Program set base address</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DMC</span> <span class="pre">BASESIZE[0:7]</span></code></p></td>
<td><p>16</p></td>
<td><p>Program set base size</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DMC</span> <span class="pre">MODEM[0:7]</span></code></p></td>
<td><p>8</p></td>
<td><p>Modem control bits</p></td>
</tr>
</tbody>
</table>
<p>These registers contain the emulated state of the device.
These values don’t necessarily relate to any detail of the original device being emulated but are merely internal details of the emulation.</p>
</section>
</section>
<section id="configuration">
<h5><span class="sectnum">1.2.6.4.2. </span>Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading">¶</a></h5>
<p>A DMC device is configured with various SIMH <code class="docutils literal notranslate"><span class="pre">SET</span></code> and <code class="docutils literal notranslate"><span class="pre">ATTACH</span></code> commands.</p>
<section id="set-commands">
<h6><span class="sectnum">1.2.6.4.2.1. </span><code class="docutils literal notranslate"><span class="pre">Set</span></code> commands<a class="headerlink" href="#set-commands" title="Permalink to this heading">¶</a></h6>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">DMC</span> <span class="pre">LINES=n</span></code></p></td>
<td><p>Sets the number of DMC devices being emulated</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">DMC</span> <span class="pre">CONNECTPOLL=seconds</span></code></p></td>
<td><p>Sets the connection poll frequency</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">DMC</span> <span class="pre">ADDRESS=val</span></code></p></td>
<td><p>Bus address</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">DMC</span> <span class="pre">VECTOR=val</span></code></p></td>
<td><p>Interrupt vector</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">DMC</span> <span class="pre">ENABLE</span></code></p></td>
<td><p>Enables device DMC</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">DMC</span> <span class="pre">DISABLE</span></code></p></td>
<td><p>Disables device DMC</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">DMC</span> <span class="pre">DEBUG</span></code></p></td>
<td><p>Enables debugging for device DMC</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">DMC</span> <span class="pre">NODEBUG</span></code></p></td>
<td><p>Disables debugging for device DMC</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">DMC</span> <span class="pre">DEBUG=TRACE;WARN;REG;INTREG;INFO;DATA;DATASUM;MODEM;CONNECT;INT</span></code></p></td>
<td><p>Enables specific debugging for device DMC</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">DMC</span> <span class="pre">NODEBUG=TRACE;WARN;REG;INTREG;INFO;DATA;DATASUM;MODEM;CONNECT;INT</span></code></p></td>
<td><p>Disables specific debugging for device DMC</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">DMCn</span> <span class="pre">PEER=address:port</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">DMCn</span> <span class="pre">SPEED=bits/sec</span> <span class="pre">(0=unrestricted)</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">DMCn</span> <span class="pre">TYPE={DMR,DMC}</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">DMCn</span> <span class="pre">STATS</span></code></p></td>
<td><p>Display/Clear statistics</p></td>
</tr>
</tbody>
</table>
<section id="lines">
<h6 aria-level="7"><span class="sectnum">1.2.6.4.2.1.1. </span>Lines<a class="headerlink" href="#lines" title="Permalink to this heading">¶</a></h6>
<p>A maximum of 8 DMC11 devices can be emulated concurrently in the VAX 11/780 simulator.
The number of simulated DMC11 devices or lines can be specified with command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">&gt;</span> <span class="n">SET</span> <span class="n">DMC0</span> <span class="n">LINES</span><span class="o">=</span><span class="n">n</span>
</pre></div>
</div>
</section>
<section id="peer">
<h6 aria-level="7"><span class="sectnum">1.2.6.4.2.1.2. </span>Peer<a class="headerlink" href="#peer" title="Permalink to this heading">¶</a></h6>
<p>To set the host and port to which data is to be transmitted use the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">&gt;</span> <span class="n">SET</span> <span class="n">DMC0</span> <span class="n">PEER</span><span class="o">=</span><span class="n">host</span><span class="p">:</span><span class="n">port</span>
</pre></div>
</div>
</section>
<section id="connectpoll">
<h6 aria-level="7"><span class="sectnum">1.2.6.4.2.1.3. </span>Connectpoll<a class="headerlink" href="#connectpoll" title="Permalink to this heading">¶</a></h6>
<p>The minimum interval between attempts to connect to the other side is set using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">&gt;</span> <span class="n">SET</span> <span class="n">DMC0</span> <span class="n">CONNECTPOLL</span><span class="o">=</span><span class="n">n</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">n</span></code> is the number of seconds.
The default is 2 seconds.</p>
</section>
<section id="speed">
<h6 aria-level="7"><span class="sectnum">1.2.6.4.2.1.4. </span>Speed<a class="headerlink" href="#speed" title="Permalink to this heading">¶</a></h6>
<p>If you want to experience the actual data rates of the physical hardware you can set the bit rate of the simulated line can be set using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">&gt;</span> <span class="n">SET</span> <span class="n">DMC0</span> <span class="n">SPEED</span><span class="o">=</span><span class="n">n</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">n</span></code> is the number of data bits per second that the simulated line runs at.
In practice this is implemented as a delay while transmitting bytes to the socket.
Use a value of zero to run at full speed with no artificial throttling.</p>
</section>
<section id="type">
<h6 aria-level="7"><span class="sectnum">1.2.6.4.2.1.5. </span>Type<a class="headerlink" href="#type" title="Permalink to this heading">¶</a></h6>
<p>The type of device being emulated can be changed with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">&gt;</span> <span class="n">SET</span> <span class="n">DMC0</span> <span class="n">TYPE</span><span class="o">=</span><span class="p">{</span><span class="n">DMR</span><span class="p">,</span><span class="n">DMC</span><span class="p">}</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">TYPE</span></code> command should be entered before the device is attached to a listening port.</p>
</section>
</section>
<section id="attach">
<h6><span class="sectnum">1.2.6.4.2.2. </span>Attach<a class="headerlink" href="#attach" title="Permalink to this heading">¶</a></h6>
<p>The device must be attached to a receive port,
use the <code class="docutils literal notranslate"><span class="pre">ATTACH</span></code> command specifying the receive port number.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">&gt;</span> <span class="n">ATTACH</span> <span class="n">DMC0</span> <span class="n">port</span>
</pre></div>
</div>
<p>The Peer host:port value must be specified before the <code class="docutils literal notranslate"><span class="pre">attach</span></code> command.</p>
</section>
<section id="examples">
<h6><span class="sectnum">1.2.6.4.2.3. </span>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h6>
<p>To configure two simulators to talk to each other use the following example:</p>
<blockquote>
<div><p>Machine 1:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">&gt;</span> <span class="n">SET</span> <span class="n">DMC</span> <span class="n">ENABLE</span>
<span class="n">sim</span><span class="o">&gt;</span> <span class="n">SET</span> <span class="n">DMC0</span> <span class="n">PEER</span><span class="o">=</span><span class="n">LOCALHOST</span><span class="p">:</span><span class="mi">2222</span>
<span class="n">sim</span><span class="o">&gt;</span> <span class="n">ATTACH</span> <span class="n">DMC0</span> <span class="mi">1111</span>
</pre></div>
</div>
<p>Machine 2:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">&gt;</span> <span class="n">SET</span> <span class="n">DMC</span> <span class="n">ENABLE</span>
<span class="n">sim</span><span class="o">&gt;</span> <span class="n">SET</span> <span class="n">DMC0</span> <span class="n">PEER</span><span class="o">=</span><span class="n">LOCALHOST</span><span class="p">:</span><span class="mi">1111</span>
<span class="n">sim</span><span class="o">&gt;</span> <span class="n">ATTACH</span> <span class="n">DMC0</span> <span class="mi">2222</span>
</pre></div>
</div>
</div></blockquote>
</section>
</section>
<section id="monitoring">
<h5><span class="sectnum">1.2.6.4.3. </span>Monitoring<a class="headerlink" href="#monitoring" title="Permalink to this heading">¶</a></h5>
<p>The DMC device and DMC0 line configuration and state can be displayed with one of the available <code class="docutils literal notranslate"><span class="pre">show</span></code> commands.</p>
<section id="show-commands">
<h6><span class="sectnum">1.2.6.4.3.1. </span>Show commands<a class="headerlink" href="#show-commands" title="Permalink to this heading">¶</a></h6>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">DMC</span> <span class="pre">LINES</span></code></p></td>
<td><p>Display number of devices</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">DMC</span> <span class="pre">CONNECTPOLL</span></code></p></td>
<td><p>Display connection poll interval</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">DMC</span> <span class="pre">ADDRESS</span></code></p></td>
<td><p>Bus address</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">DMC</span> <span class="pre">VECTOR</span></code></p></td>
<td><p>Interrupt vector</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">DMC</span> <span class="pre">DEBUG</span></code></p></td>
<td><p>Displays debugging status for device DMC</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">DMCn</span> <span class="pre">PEER</span></code></p></td>
<td><p>Display destination/source</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">DMCn</span> <span class="pre">SPEED</span></code></p></td>
<td><p>Display rate limit</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">DMCn</span> <span class="pre">TYPE</span></code></p></td>
<td><p>Set/Display device type</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">DMCn</span> <span class="pre">STATS</span></code></p></td>
<td><p>Display/Clear statistics</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">DMCn</span> <span class="pre">QUEUES</span></code></p></td>
<td><p>Display Queue state</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">DMCn</span> <span class="pre">DDCMP</span></code></p></td>
<td><p>Display DDCMP state information</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="restrictions">
<h5><span class="sectnum">1.2.6.4.4. </span>Restrictions<a class="headerlink" href="#restrictions" title="Permalink to this heading">¶</a></h5>
<p>Real hardware synchronous connections could operate in Multi-Point mode.
Multi-Point mode was a way of sharing a single wire with multiple destination systems or devices.
Multi-Point mode is not currently emulated by this or other simulated synchronous devices.</p>
<p>In real hardware, the DMC11 spoke a version of DDCMP which peer devices needed to be aware of.
The DMR11, DMP11, and DMV11 boards have configuration switches or programatic methods to indicate that the peer device was a DMC11.
The emulated devices all speak the same level of DDCMP so no special remote device awareness need be considered.</p>
</section>
<section id="implementation">
<h5><span class="sectnum">1.2.6.4.5. </span>Implementation<a class="headerlink" href="#implementation" title="Permalink to this heading">¶</a></h5>
<p>A real DMC11 transports data using DDCMP via a synchronous connection,
the emulated device makes a TCP/IP connection to another emulated device which either speaks DDCMP over the TCP connection directly,
or interfaces to a simulated computer where the operating system speaks the DDCMP protocol on the wire.</p>
<p>The DMC11 can be used for point-to-point DDCMP connections carrying DECnet and other types of networking,
e.g., from ULTRIX or DSM.</p>
</section>
<section id="debugging">
<h5><span class="sectnum">1.2.6.4.6. </span>Debugging<a class="headerlink" href="#debugging" title="Permalink to this heading">¶</a></h5>
<p>The simulator has a number of debug options, these are:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">REG</span></code></p></td>
<td><p>Shows whenever a CSR is programatically read or written and the current value.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">INTREG</span></code></p></td>
<td><p>Shows internal register value changes.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">INFO</span></code></p></td>
<td><p>Shows higher-level tracing only.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">WARN</span></code></p></td>
<td><p>Shows any warnings.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TRACE</span></code></p></td>
<td><p>Shows more detailed trace information.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DATASUM</span></code></p></td>
<td><p>Brief summary of each received and transmitted buffer. Ignored if DATA is set.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DATA</span></code></p></td>
<td><p>Shows the actual data sent and received.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">MODEM</span></code></p></td>
<td><p>Shows modem signal transitions details.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CONNECT</span></code></p></td>
<td><p>Shows sockets connection activity.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
<td><p>Shows Interrupt activity.</p></td>
</tr>
</tbody>
</table>
<p>To get a full trace use</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">&gt;</span> <span class="n">SET</span> <span class="n">DMC</span> <span class="n">DEBUG</span>
</pre></div>
</div>
<p>However it is recommended to use the following when sending traces:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">&gt;</span> <span class="n">SET</span> <span class="n">DMC</span> <span class="n">DEBUG</span><span class="o">=</span><span class="n">REG</span><span class="p">;</span><span class="n">INFO</span><span class="p">;</span><span class="n">WARN</span>
</pre></div>
</div>
</section>
<section id="related-devices">
<h5><span class="sectnum">1.2.6.4.7. </span>Related devices<a class="headerlink" href="#related-devices" title="Permalink to this heading">¶</a></h5>
<p>The DMC can facilitate communication with other simh simulators which have emulated synchronous network devices available.
These include the following:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DUP11</span></code> <a class="footnote-reference brackets" href="#id4" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
<td><p>Unibus PDP11 simulators</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DPV11</span></code> <a class="footnote-reference brackets" href="#id4" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
<td><p>Qbus PDP11 simulators</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">KDP11</span></code> <a class="footnote-reference brackets" href="#id4" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
<td><p>Unibus PDP11 simulators and PDP10 simulators</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DMR11</span></code></p></td>
<td><p>Unibus PDP11 simulators and Unibus VAX simulators</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DMC11</span></code></p></td>
<td><p>Unibus PDP11 simulators and Unibus VAX simulators</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DMP11</span></code></p></td>
<td><p>Unibus PDP11 simulators and Unibus VAX simulators</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DMV11</span></code></p></td>
<td><p>Qbus VAX simulators</p></td>
</tr>
</tbody>
</table>
<aside class="footnote brackets" id="id4" role="note">
<span class="label"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id1">1</a>,<a role="doc-backlink" href="#id2">2</a>,<a role="doc-backlink" href="#id3">3</a>)</span>
<p>Indicates systems which have OS provided DDCMP implementations.
The DMC11 is a synchronous serial point-to-point communications device.
A real DMC11 transports data using DDCMP,
the emulated device makes a TCP/IP connection to another emulated device and sends length-prefixed messages across the connection,
each message representing a single buffer passed to the DMC11.
The DMC11 can be used for point-to-point DDCMP connections carrying DECnet and other types of networking,
e.g., from ULTRIX or DSM.</p>
</aside>
</section>
<section id="cr11-card-reader-cr">
<h5><span class="sectnum">1.2.6.4.8. </span>CR11 card reader (CR)<a class="headerlink" href="#cr11-card-reader-cr" title="Permalink to this heading">¶</a></h5>
<p>The card reader (CR) implements a single controller (the CR11) and card reader (e.g., Documation M200, GDI Model 100) by reading a file and presenting lines or cards to the simulator.
Card decks may be represented by plain text ASCII files, card image files, or column binary files.
The CR11 controller is also compatible with the CM11-F, CME11, and CMS11.</p>
<p>Card image files are a file format designed by Douglas W. Jones at the University of Iowa to support the interchange of card deck data.
These files have a much richer information carrying capacity than plain ASCII files.
Card Image files can contain such interchange information as card-stock color, corner cuts, special artwork, as well as the binary punch data representing all 12 columns.
Complete details on the format, as well as sample code, are available at <a class="reference external" href="http://homepage.divms.uiowa.edu/~jones/cards/">Prof. Jones’s site</a>.</p>
<p>Examples of the CR11 include the M8290 and M8291 (CMS11).
All card readers use a common vector at 0230 and CSR at 177160.
Even though the CR11 is normally configured as a BR6 device,
it is configured for BR4 in this simulation.</p>
<p>The card reader supports ASCII, card image, and column binary format card “decks”.
When reading plain ASCII files, lines longer than 80 characters are silently truncated.
Card image support is included for 80 column Hollerith, 82 column Hollerith (silently ignoring columns 0 and 81), and 40 column Hollerith (mark-sense) cards.
Column binary supports 80 column card images only.
All files are attached read-only (as if the <code class="docutils literal notranslate"><span class="pre">-R</span></code> switch were given).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="o">-</span><span class="n">A</span> <span class="n">CR</span> <span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span>           <span class="n">File</span> <span class="ow">is</span> <span class="n">ASCII</span> <span class="n">text</span>
<span class="n">ATTACH</span> <span class="o">-</span><span class="n">B</span> <span class="n">CR</span> <span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span>           <span class="n">File</span> <span class="ow">is</span> <span class="n">column</span> <span class="n">binary</span>
<span class="n">ATTACH</span> <span class="o">-</span><span class="n">I</span> <span class="n">CR</span> <span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span>           <span class="n">File</span> <span class="ow">is</span> <span class="n">card</span> <span class="n">image</span> <span class="nb">format</span>
</pre></div>
</div>
<p>If no flags are given, the file extension is evaluated.
If the filename ends in <code class="docutils literal notranslate"><span class="pre">.TXT</span></code>, the file is treated as ASCII text.
If the filename ends in <code class="docutils literal notranslate"><span class="pre">.CBN</span></code>, the file is treated as column binary.
Otherwise, the CR driver looks for a card image header.
If a correct header is found the file is treated as card image format,
otherwise it is treated as ASCII text.</p>
<p>The correct character translation MUST be set if a plain-text file is to be used for card deck input.
The correct translation SHOULD be set to allow correct ASCII debugging of a card image or column binary input deck.
Depending upon the operating system in use, how it was generated, and how the card data will be read and used,
the translation must be set correctly so that the proper character set is used by the driver.
Use the following command to explicitly set the correct translation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">TRANSLATION</span><span class="o">=</span><span class="p">{</span><span class="n">DEFAULT</span><span class="o">|</span><span class="mi">026</span><span class="o">|</span><span class="mi">026</span><span class="n">FTN</span><span class="o">|</span><span class="mi">029</span><span class="o">|</span><span class="n">EBCDIC</span><span class="p">}</span>
</pre></div>
</div>
<p>This command should be given after a deck is attached to the simulator.
The mappings above are completely described at <a class="reference external" href="http://homepage.divms.uiowa.edu/~jones/cards/codes.html">http://homepage.divms.uiowa.edu/~jones/cards/codes.html</a>.
Note that DEC typically used 029 or 026FTN mappings.</p>
<p>DEC operating systems used a variety of methods to determine the end of a deck
(recognizing that ‘hopper empty’ does not necessarily mean the end of a deck).
Below is a summary of the various operating system conventions for signaling end of deck:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>RT-11:</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">12-11-0-1-6-7-8-9</span></code> punch in column 1</p></td>
</tr>
<tr class="row-even"><td><p>RSTS/E:</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">12-11-0-1</span></code> or <code class="docutils literal notranslate"><span class="pre">12-11-0-1-6-7-8-9</span></code> punch in column 1</p></td>
</tr>
<tr class="row-odd"><td><p>RSX:</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">12-11-0-1-6-7-8-9</span></code> punch</p></td>
</tr>
<tr class="row-even"><td><p>VMS:</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">12-11-0-1-6-7-8-9</span></code> punch in first 8 columns</p></td>
</tr>
<tr class="row-odd"><td><p>TOPS:</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">12-11-0-1</span></code> or <code class="docutils literal notranslate"><span class="pre">12-11-0-1-6-7-8-9</span></code> punch in column 1</p></td>
</tr>
</tbody>
</table>
<p>Using the <code class="docutils literal notranslate"><span class="pre">AUTOEOF</span></code> setting,
the card reader can be set to automatically generate an EOF card consisting of the <code class="docutils literal notranslate"><span class="pre">12-11-0-1-6-7-8-9</span></code> punch in columns 1-8.
When set to CD11 mode,
this switch also enables automatic setting of the EOF bit in the controller after the EOF card has been processed.
[The CR11 does not have a similar capability].
By default <code class="docutils literal notranslate"><span class="pre">AUTOEOF</span></code> is enabled.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">CR</span> <span class="n">AUTOEOF</span>
<span class="n">SET</span> <span class="n">CR</span> <span class="n">NOAUTOEOF</span>
</pre></div>
</div>
<p>The default card reader rate for the CR11 is 285 cpm.
The reader rate can be set to its default value or to anywhere in the range 200 to 1200 cpm.
This rate may be changed while the unit is attached.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">CR</span> <span class="n">RATE</span><span class="o">=</span><span class="p">{</span><span class="n">DEFAULT</span><span class="o">|</span><span class="mi">200</span> <span class="n">to</span> <span class="mi">1200</span><span class="p">}</span>
</pre></div>
</div>
<p>It is standard operating procedure for operators to load a card deck and press the momentary action RESET button to clear any error conditions and alert the processor that a deck is available to read.
Use the following command to simulate pressing the card reader RESET button:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">CR</span> <span class="n">RESET</span>
</pre></div>
</div>
<p>Another common control of physical card readers is the STOP button.
An operator could use this button to finish the read operation for the current card and terminate reading a deck early.
Use the following command to simulate pressing the card reader STOP button:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">CR</span> <span class="n">STOP</span>
</pre></div>
</div>
<p>The simulator does not support the <code class="docutils literal notranslate"><span class="pre">BOOT</span></code> command.
The simulator does not stop on file I/O errors.
Instead the controller signals a reader check to the CPU.</p>
<p>The CR controller implements these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BUF</span></code></p></td>
<td><p>8</p></td>
<td><p>ASCII value of last column processed</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CRS</span></code></p></td>
<td><p>16</p></td>
<td><p>CR11 status register</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CRB1</span></code></p></td>
<td><p>16</p></td>
<td><p>CR11 12-bit Hollerith character</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CRB2</span></code></p></td>
<td><p>16</p></td>
<td><p>CR11 8-bit compressed character</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CRM</span></code></p></td>
<td><p>16</p></td>
<td><p>CR11 maintenance register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CDST</span></code></p></td>
<td><p>16</p></td>
<td><p>CD11 control/status register</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CDCC</span></code></p></td>
<td><p>16</p></td>
<td><p>CD11 column count</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CDBA</span></code></p></td>
<td><p>16</p></td>
<td><p>CD11 current bus address</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CDDB</span></code></p></td>
<td><p>16</p></td>
<td><p>CD11 data buffer, 2nd status</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">BLOWER</span></code></p></td>
<td><p>2</p></td>
<td><p>Blower state value</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
<td><p>1</p></td>
<td><p>Interrupt pending flag</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ERR</span></code></p></td>
<td><p>1</p></td>
<td><p>Error flag (CRS&lt;15&gt;)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">IE</span></code></p></td>
<td><p>1</p></td>
<td><p>Interrupt enable flag (CRS&lt;6&gt;)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">POS</span></code></p></td>
<td><p>32</p></td>
<td><p>File position - do not alter</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TIME</span></code></p></td>
<td><p>24</p></td>
<td><p>Delay time between columns</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
</section>
<section id="symbolic-display-and-input">
<h2><span class="sectnum">1.3. </span>Symbolic display and input<a class="headerlink" href="#symbolic-display-and-input" title="Permalink to this heading">¶</a></h2>
<p>The VAX simulator implements symbolic display and input.
Display is controlled by command-line switches:</p>
<dl class="option-list">
<dt><kbd><span class="option">-a</span>, <span class="option">-c</span></kbd></dt>
<dd><p>Display as ASCII data</p>
</dd>
<dt><kbd><span class="option">-m</span></kbd></dt>
<dd><p>Display instruction mnemonics</p>
</dd>
<dt><kbd><span class="option">-p</span></kbd></dt>
<dd><p>Display compatibility mode mnemonics</p>
</dd>
<dt><kbd><span class="option">-r</span></kbd></dt>
<dd><p>Display RADIX50 encoding</p>
</dd>
</dl>
<p>Input parsing is controlled by the first character typed in or by command-line switches:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'</span></code> or <code class="docutils literal notranslate"><span class="pre">-a</span></code></p></td>
<td><p>ASCII characters (determined by length)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">-c</span></code></p></td>
<td><p>ASCII string (maximum 60 characters)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-p</span></code></p></td>
<td><p>Compatibility mode instruction mnemonic</p></td>
</tr>
<tr class="row-even"><td><p>Alphabetic</p></td>
<td><p>Instruction mnemonic</p></td>
</tr>
<tr class="row-odd"><td><p>Numeric</p></td>
<td><p>Octal number</p></td>
</tr>
</tbody>
</table>
<p>VAX instruction input uses standard VAX assembler syntax.
Compatibility mode instruction input uses standard PDP-11 assembler syntax.</p>
<p>The syntax for VAX specifiers is as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Specifier</p></th>
<th class="head"><p>Displacement</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">#s^n</span></code>, <code class="docutils literal notranslate"><span class="pre">#n</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0n</span></code></p></td>
<td><p>—</p></td>
<td><p>Short literal, integer only</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">[Rn]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">4n</span></code></p></td>
<td><p>—</p></td>
<td><p>Indexed, second specifier follows</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Rn</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">5n</span></code></p></td>
<td><p>—</p></td>
<td><p>PC illegal</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">(Rn)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">6n</span></code></p></td>
<td><p>—</p></td>
<td><p>PC illegal</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-(Rn)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">7n</span></code></p></td>
<td><p>—</p></td>
<td><p>PC illegal</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">(Rn)+</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">8n</span></code></p></td>
<td><p>—</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">#i^n</span></code>, <code class="docutils literal notranslate"><span class="pre">#n</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">8F</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Immediate</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&#64;(Rn)+</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">9n</span></code></p></td>
<td><p>—</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&#64;#addr</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">9F</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">addr</span></code></p></td>
<td><p>Absolute</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">{+/-}b^d(Rn)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">An</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{+/-}d</span></code></p></td>
<td><p>Byte displacement</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">b^d</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AF</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">d</span> <span class="pre">-</span> <span class="pre">PC</span></code></p></td>
<td><p>Byte PC relative</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&#64;{+/-}b^d(Rn)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Bn</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{+/-}d</span></code></p></td>
<td><p>Byte displacement deferred</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&#64;b^d</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BF</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">d</span> <span class="pre">-</span> <span class="pre">PC</span></code></p></td>
<td><p>Byte PC relative deferred</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">{+/-}w^d(Rn)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Cn</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{+/-}d</span></code></p></td>
<td><p>Word displacement</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">w^d</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CF</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">d</span> <span class="pre">-</span> <span class="pre">PC</span></code></p></td>
<td><p>Word PC relative</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&#64;{+/-}w^d(Rn)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Dn</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{+/-}d</span></code></p></td>
<td><p>Word displacement deferred</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&#64;w^d</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DF</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">d</span> <span class="pre">-</span> <span class="pre">PC</span></code></p></td>
<td><p>Word PC relative deferred</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">{+/-}l^d(Rn)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">En</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{+/-}d</span></code></p></td>
<td><p>Long displacement</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">l^d</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">EF</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">d</span> <span class="pre">-</span> <span class="pre">PC</span></code></p></td>
<td><p>Long PC relative</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&#64;{+/-}l^d(Rn)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Fn</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{+/-}d</span></code></p></td>
<td><p>Long displacement deferred</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&#64;l^d</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FF</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">d</span> <span class="pre">-</span> <span class="pre">PC</span></code></p></td>
<td><p>Long PC relative deferred</p></td>
</tr>
</tbody>
</table>
<p>If no override is given for a literal (<code class="docutils literal notranslate"><span class="pre">s^</span></code> or <code class="docutils literal notranslate"><span class="pre">i^</span></code>) or for a displacement or PC relative address (<code class="docutils literal notranslate"><span class="pre">b^</span></code>, <code class="docutils literal notranslate"><span class="pre">w^</span></code>, or <code class="docutils literal notranslate"><span class="pre">l^</span></code>),
the simulator chooses the mode automatically.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Python</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="simh_doc.html">SimH Users' Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="simh_swre.html">SimH Sample Software Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="simh_faq.html">SimH FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="nova_doc.html">Data General Nova</a></li>
<li class="toctree-l1"><a class="reference internal" href="pdp11_doc.html">Digital Equipment Corporation PDP-11</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Digital Equipment Corporation VAX-11/780</a></li>
<li class="toctree-l1"><a class="reference internal" href="vax_doc.html">Digital Equipment Corporation MicroVAX 3900</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="pdp11_doc.html" title="previous chapter"><span class="sectnum">1. </span>PDP-11 simulator usage</a></li>
      <li>Next: <a href="vax_doc.html" title="next chapter"><span class="sectnum">1. </span>VAX (MicroVAX 3900) simulator usage</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/vax780_doc.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>