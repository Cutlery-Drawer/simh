
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>1. HP 2100 Simulator User’s Guide &#8212; Python  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="hp-2100-simulator-user-s-guide">
<h1><span class="sectnum">1. </span>HP 2100 Simulator User’s Guide<a class="headerlink" href="#hp-2100-simulator-user-s-guide" title="Permalink to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2019-02-05</p>
</dd>
<dt class="field-even">Revision<span class="colon">:</span></dt>
<dd class="field-even"><p>$Format:%H$</p>
</dd>
<dt class="field-odd">Copyright<span class="colon">:</span></dt>
<dd class="field-odd"><p>See <a class="reference external" href="../LICENSE.txt">LICENSE.txt</a> for terms of use.</p>
</dd>
</dl>
<aside class="topic">
<p class="topic-title"><strong>Copyright notice</strong></p>
<p>The following copyright notice applies to the SIMH source, binary, and documentation:</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the “Software”),
to deal in the Software without restriction, including without limitation
the rights to use, copy, modify, merge, publish, distribute, sublicense,
and/or sell copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<p>Except as contained in this notice, the names of The Authors shall not be
used in advertising or otherwise to promote the sale, use or other dealings
in this Software without prior written authorization from the Authors.</p>
</aside>
<nav class="contents local" id="contents">
<ul class="auto-toc simple">
<li><p><a class="reference internal" href="#introduction" id="id17"><span class="sectnum">1.1. </span>Introduction</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#the-hp-21xx-1000-computer-systems" id="id18"><span class="sectnum">1.1.1. </span>The HP 21xx/1000 Computer Systems</a></p></li>
<li><p><a class="reference internal" href="#simulator-files" id="id19"><span class="sectnum">1.1.2. </span>Simulator files</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#simulator-features" id="id20"><span class="sectnum">1.2. </span>Simulator features</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#hardware-equivalent-actions" id="id21"><span class="sectnum">1.2.1. </span>Hardware-equivalent actions</a></p></li>
<li><p><a class="reference internal" href="#simulator-specific-commands" id="id22"><span class="sectnum">1.2.2. </span>Simulator-specific commands</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#numeric-display-and-entry" id="id23"><span class="sectnum">1.2.2.1. </span>Numeric display and entry</a></p></li>
<li><p><a class="reference internal" href="#symbolic-display-and-entry" id="id24"><span class="sectnum">1.2.2.2. </span>Symbolic display and entry</a></p></li>
<li><p><a class="reference internal" href="#examine-deposit-iexamine-and-ideposit" id="id25"><span class="sectnum">1.2.2.3. </span><code class="docutils literal notranslate"><span class="pre">EXAMINE</span></code>, <code class="docutils literal notranslate"><span class="pre">DEPOSIT</span></code>, <code class="docutils literal notranslate"><span class="pre">IEXAMINE</span></code>, and <code class="docutils literal notranslate"><span class="pre">IDEPOSIT</span></code></a></p></li>
<li><p><a class="reference internal" href="#break-and-nobreak" id="id26"><span class="sectnum">1.2.2.4. </span><code class="docutils literal notranslate"><span class="pre">BREAK</span></code> and <code class="docutils literal notranslate"><span class="pre">NOBREAK</span></code></a></p></li>
<li><p><a class="reference internal" href="#reset" id="id27"><span class="sectnum">1.2.2.5. </span><code class="docutils literal notranslate"><span class="pre">RESET</span></code></a></p></li>
<li><p><a class="reference internal" href="#run-and-go" id="id28"><span class="sectnum">1.2.2.6. </span><code class="docutils literal notranslate"><span class="pre">RUN</span></code> and <code class="docutils literal notranslate"><span class="pre">GO</span></code></a></p></li>
<li><p><a class="reference internal" href="#load-dump-and-boot" id="id29"><span class="sectnum">1.2.2.7. </span><code class="docutils literal notranslate"><span class="pre">LOAD</span></code>, <code class="docutils literal notranslate"><span class="pre">DUMP</span></code>, and <code class="docutils literal notranslate"><span class="pre">BOOT</span></code></a></p></li>
<li><p><a class="reference internal" href="#device-configuration" id="id30"><span class="sectnum">1.2.2.8. </span>Device configuration</a></p></li>
<li><p><a class="reference internal" href="#enabling-and-disabling-devices" id="id31"><span class="sectnum">1.2.2.9. </span>Enabling and disabling devices</a></p></li>
<li><p><a class="reference internal" href="#i-o-interface-select-code-assignments" id="id32"><span class="sectnum">1.2.2.10. </span>I/O Interface select code assignments</a></p></li>
<li><p><a class="reference internal" href="#save-and-restore" id="id33"><span class="sectnum">1.2.2.11. </span><code class="docutils literal notranslate"><span class="pre">SAVE</span></code> and <code class="docutils literal notranslate"><span class="pre">RESTORE</span></code></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#realistic-calibrated-and-optimized-timing" id="id34"><span class="sectnum">1.2.3. </span>Realistic, calibrated, and optimized timing</a></p></li>
<li><p><a class="reference internal" href="#the-simulation-console-and-the-system-console" id="id35"><span class="sectnum">1.2.4. </span>The simulation console and the system console</a></p></li>
<li><p><a class="reference internal" href="#the-keyboard-poll-device" id="id36"><span class="sectnum">1.2.5. </span>The Keyboard Poll device</a></p></li>
<li><p><a class="reference internal" href="#tracing-simulator-operations" id="id37"><span class="sectnum">1.2.6. </span>Tracing simulator operations</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#processor-device-simulations" id="id38"><span class="sectnum">1.3. </span>Processor device simulations</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#central-processing-unit" id="id39"><span class="sectnum">1.3.1. </span>Central processing unit</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#bootstrap-loaders" id="id40"><span class="sectnum">1.3.1.1. </span>Bootstrap loaders</a></p></li>
<li><p><a class="reference internal" href="#simulation-stops" id="id41"><span class="sectnum">1.3.1.2. </span>Simulation stops</a></p></li>
<li><p><a class="reference internal" href="#stop-messages" id="id42"><span class="sectnum">1.3.1.3. </span>Stop messages</a></p></li>
<li><p><a class="reference internal" href="#tracing" id="id43"><span class="sectnum">1.3.1.4. </span>Tracing</a></p></li>
<li><p><a class="reference internal" href="#registers" id="id44"><span class="sectnum">1.3.1.5. </span>Registers</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#a-12607b-12895a-direct-memory-access-controllers-12897b-dual-channel-port-controller" id="id45"><span class="sectnum">1.3.2. </span>12578A/12607B/12895A Direct Memory Access controllers, 12897B Dual-Channel Port Controller</a></p></li>
<li><p><a class="reference internal" href="#a-12892b-memory-protect" id="id46"><span class="sectnum">1.3.3. </span>12581A/12892B Memory Protect</a></p></li>
<li><p><a class="reference internal" href="#a-memory-expansion-module" id="id47"><span class="sectnum">1.3.4. </span>12731A Memory Expansion Module</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#general-i-o-device-simulations" id="id48"><span class="sectnum">1.4. </span>General I/O device simulations</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#c-buffered-teleprinter-interface-with-one-2752-54-teleprinter" id="id49"><span class="sectnum">1.4.1. </span>12531C Buffered Teleprinter Interface with One 2752/54 Teleprinter</a></p></li>
<li><p><a class="reference internal" href="#c-time-base-generator" id="id50"><span class="sectnum">1.4.2. </span>12539C Time Base Generator</a></p></li>
<li><p><a class="reference internal" href="#b-microcircuit-interface" id="id51"><span class="sectnum">1.4.3. </span>12566B Microcircuit Interface</a></p></li>
<li><p><a class="reference internal" href="#a-002-tape-reader-interface-with-one-2748-paper-tape-reader" id="id52"><span class="sectnum">1.4.4. </span>12597A-002 Tape Reader Interface with One 2748 Paper Tape Reader</a></p></li>
<li><p><a class="reference internal" href="#a-005-tape-punch-interface-with-one-2895-paper-tape-punch" id="id53"><span class="sectnum">1.4.5. </span>12597A-005 Tape Punch Interface with One 2895 Paper Tape Punch</a></p></li>
<li><p><a class="reference internal" href="#a-12936a-privileged-interrupt-fence" id="id54"><span class="sectnum">1.4.6. </span>12620A/12936A Privileged Interrupt Fence</a></p></li>
<li><p><a class="reference internal" href="#a-line-printer-interface-with-one-2767-line-printer" id="id55"><span class="sectnum">1.4.7. </span>12653A Line Printer Interface with One 2767 Line Printer</a></p></li>
<li><p><a class="reference internal" href="#c-8-channel-asynchronous-multiplexer" id="id56"><span class="sectnum">1.4.8. </span>12792C 8-Channel Asynchronous Multiplexer</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#device-options" id="id57"><span class="sectnum">1.4.8.1. </span>Device options</a></p></li>
<li><p><a class="reference internal" href="#unit-options" id="id58"><span class="sectnum">1.4.8.2. </span>Unit options</a></p></li>
<li><p><a class="reference internal" href="#tracing-and-registers" id="id59"><span class="sectnum">1.4.8.3. </span>Tracing and registers</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#b-line-printer-interface-with-one-2607-13-17-18-line-printer" id="id60"><span class="sectnum">1.4.9. </span>12845B Line Printer Interface with One 2607/13/17/18 Line Printer</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#id1" id="id61"><span class="sectnum">1.4.9.1. </span>Device options</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id62"><span class="sectnum">1.4.9.2. </span>Unit options</a></p></li>
<li><p><a class="reference internal" href="#vertical-format-unit" id="id63"><span class="sectnum">1.4.9.3. </span>Vertical format unit</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id64"><span class="sectnum">1.4.9.4. </span>Tracing and registers</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#a-processor-interconnect" id="id65"><span class="sectnum">1.4.10. </span>12875A Processor Interconnect</a></p></li>
<li><p><a class="reference internal" href="#a-asynchronous-multiplexer-interface" id="id66"><span class="sectnum">1.4.11. </span>12920A Asynchronous Multiplexer Interface</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#lower-and-upper-data-pcas" id="id67"><span class="sectnum">1.4.11.1. </span>Lower and upper data PCAs</a></p></li>
<li><p><a class="reference internal" href="#control-pca" id="id68"><span class="sectnum">1.4.11.2. </span>Control PCA</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#a-buffered-asynchronous-communications-interface" id="id69"><span class="sectnum">1.4.12. </span>12966A Buffered Asynchronous Communications Interface</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#disc-i-o-device-simulations" id="id70"><span class="sectnum">1.5. </span>Disc I/O device simulations</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#a-cartridge-disc-interface-with-four-2870-drives-13210a-disc-drive-interface-with-four-7900-drives" id="id71"><span class="sectnum">1.5.1. </span>12557A Cartridge Disc Interface with four 2870 drives, 13210A Disc Drive Interface with four 7900 drives</a></p></li>
<li><p><a class="reference internal" href="#a-disc-interface-with-two-2883-drives" id="id72"><span class="sectnum">1.5.2. </span>12565A Disc Interface with two 2883 drives</a></p></li>
<li><p><a class="reference internal" href="#b-disc-memory-interface-with-one-2770-2771-disc-12610b-drum-memory-interface-with-one-2773-2774-2775-drum" id="id73"><span class="sectnum">1.5.3. </span>12606B Disc Memory Interface with one 2770/2771 disc, 12610B Drum Memory Interface with one 2773/2774/2775 drum</a></p></li>
<li><p><a class="reference internal" href="#a-disc-interface-with-four-7906h-7920h-7925h-drives" id="id74"><span class="sectnum">1.5.4. </span>12821A Disc Interface with four 7906H/7920H/7925H drives</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#id4" id="id75"><span class="sectnum">1.5.4.1. </span>Device options</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id76"><span class="sectnum">1.5.4.2. </span>Unit options</a></p></li>
<li><p><a class="reference internal" href="#load-and-boot-commands" id="id77"><span class="sectnum">1.5.4.3. </span><span class="html"><samp><b>LOAD</b></samp></span> and <span class="html"><samp><b>BOOT</b></samp></span> commands</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id78"><span class="sectnum">1.5.4.4. </span>Tracing and registers</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#d-disc-controller-interface-with-eight-7905-7906-7920-7925-drives" id="id79"><span class="sectnum">1.5.5. </span>13175D Disc Controller Interface with eight 7905/7906/7920/7925 drives</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#id7" id="id80"><span class="sectnum">1.5.5.1. </span>Device options</a></p></li>
<li><p><a class="reference internal" href="#id8" id="id81"><span class="sectnum">1.5.5.2. </span>Unit options</a></p></li>
<li><p><a class="reference internal" href="#id9" id="id82"><span class="sectnum">1.5.5.3. </span><span class="html"><samp><b>LOAD</b></samp></span> and <span class="html"><samp><b>BOOT</b></samp></span> commands</a></p></li>
<li><p><a class="reference internal" href="#id10" id="id83"><span class="sectnum">1.5.5.4. </span>Tracing and registers</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#magnetic-tape-i-o-device-simulations" id="id84"><span class="sectnum">1.6. </span>Magnetic tape I/O device simulations</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#c-9-track-magnetic-tape-unit-interface-with-one-3030-drive" id="id85"><span class="sectnum">1.6.1. </span>12559C 9-Track Magnetic Tape Unit Interface with one 3030 drive</a></p></li>
<li><p><a class="reference internal" href="#b-digital-magnetic-tape-unit-interface-with-four-7970b-drives-13183b-digital-magnetic-tape-unit-interface-with-four-7970e-drives" id="id86"><span class="sectnum">1.6.2. </span>13181B Digital Magnetic Tape Unit Interface with four 7970B drives, 13183B Digital Magnetic Tape Unit Interface with four 7970E drives</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#id12" id="id87"><span class="sectnum">1.6.2.1. </span>Device options</a></p></li>
<li><p><a class="reference internal" href="#id13" id="id88"><span class="sectnum">1.6.2.2. </span>Unit options</a></p></li>
<li><p><a class="reference internal" href="#id14" id="id89"><span class="sectnum">1.6.2.3. </span><span class="html"><samp><b>LOAD</b></samp></span> and <span class="html"><samp><b>BOOT</b></samp></span> commands</a></p></li>
<li><p><a class="reference internal" href="#id15" id="id90"><span class="sectnum">1.6.2.4. </span>Tracing and registers</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<h2><span class="sectnum">1.1. </span>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>This manual documents the features and operation of the HP 2100 simulator.
It is intended for use in conjunction with the <a class="reference external" href="./simh_doc.rst">SIMH Users’ Guide</a> manual,
which describes how to compile and run the simulator,
as well as the general commands that may be entered at the Simulation Control Program (SCP) prompt.</p>
<section id="the-hp-21xx-1000-computer-systems">
<h3><span class="sectnum">1.1.1. </span>The HP 21xx/1000 Computer Systems<a class="headerlink" href="#the-hp-21xx-1000-computer-systems" title="Permalink to this heading">¶</a></h3>
<p>Hewlett-Packard sold the HP 21xx/1000 family of real-time computers from 1966 through 2000.
There are three major divisions within this family:
the 21xx core-memory machines,
the 1000 (originally 21MX) M/E/F-Series semiconductor-memory machines,
and the 1000 L/A-Series distributed-I/O machines.
All machines are 16-bit accumulator-oriented CISC machines running the same base instruction set.
A wide range of operating systems run on these machines,
from a simple 4K word paper-tape-based monitor to a megaword multi-user,
multiprogramming disc-based system and a multi-user time-shared BASIC system.</p>
<p>Within each division,
several distinct models were produced:</p>
<ul class="simple">
<li><p>the HP 2116; introduced in 1966, expandable to 32 K words (originally 16 K words).</p></li>
<li><p>the HP 2115 (1967); slower, more I/O-limited, expandable to 8 K words.</p></li>
<li><p>the HP 2114 (1968); low-cost, still-more-limited expandability, expandable to 8 K words.</p></li>
<li><p>the HP 2100 (1971); user-microprogrammable, optional floating-point instructions, expandable to 32 KW.</p></li>
<li><p>the HP 21MX (1974, renamed 1000 M); memory-mapped, larger instruction set, expandable to 1024 KW.</p></li>
<li><p>the HP 21MXE (1976, renamed 1000 E); faster CPU and memory, larger microprogram address space.</p></li>
<li><p>the HP 1000 F-Series (1979); an E-Series CPU with a separate hardware floating-point processor.</p></li>
<li><p>the HP 1000 L-Series (1979); low-cost, slower, distributed I/O system, limited to 32K words.</p></li>
<li><p>the HP 1000 XL-Series (1980); an L-Series CPU with memory mapping, expandable to 256 KW.</p></li>
<li><p>the HP 1000 A600 (1982); E-Series speed with L-Series distributed I/O, expandable to 2048 KW.</p></li>
<li><p>the HP 1000 A700 (1982); an A600 with an optional hardware floating-point processor.</p></li>
<li><p>the HP 1000 A900 (1983); faster pipelined processor, cache memory, expandable to 3072 KW.</p></li>
<li><p>the HP 1000 A400 (1986); lower-cost, limited I/O expandability, expandable to 2048 KW.</p></li>
<li><p>the HP 1000 A990 (1991); fastest and last 1000 made, expandable to 4096 KW.</p></li>
</ul>
<p>HP claimed the relative CPU performance,
normalized to a 1000 E-Series,
as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>2114</p></th>
<th class="head"><p>2115</p></th>
<th class="head"><p>2116</p></th>
<th class="head"><p>2100</p></th>
<th class="head"><p>1000 M</p></th>
<th class="head"><p>1000 E</p></th>
<th class="head"><p>1000 F</p></th>
<th class="head"><p>1000 L</p></th>
<th class="head"><p>A400</p></th>
<th class="head"><p>A600</p></th>
<th class="head"><p>A700</p></th>
<th class="head"><p>A900</p></th>
<th class="head"><p>A990</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0.22</p></td>
<td><p>0.37</p></td>
<td><p>0.42</p></td>
<td><p>0.55</p></td>
<td><p>0.45</p></td>
<td><p>1.0</p></td>
<td><p>1.4</p></td>
<td><p>0.3</p></td>
<td><p>1.1</p></td>
<td><p>1.0</p></td>
<td><p>1.67</p></td>
<td><p>3.3</p></td>
<td><p>6.7</p></td>
</tr>
</tbody>
</table>
<p>All of the machines support a 15-bit logical address space,
addressing a maximum of 32K words,
divided into 1K-word pages.
Memory-referencing instructions in the base set can directly address the 1024 words of the base page (page 0) or the 1024 words of the current page (the page containing the instruction).
The instructions in the extended set directly address the 32768 words in the full logical address space.
The A and B accumulators may be addressed as logical addresses 0 and 1,
respectively.</p>
<p>Peripheral devices are connected to the CPU by interface cards installed in the I/O card cages present in the CPU and optional I/O extender chassis.
Each slot in the card cage is assigned an address,
called a <em>select code</em>,
that may be referenced by I/O instructions in the base set.
Select codes range from 0 to 77 octal,
with the first eight select codes reserved for the system,
providing connections for 56 possible interfaces.</p>
<p>The 211x machines use a hardwired processor providing 70 basic instructions and up to 32K of core memory.
The base instruction set is divided into the Memory Reference Group,
the Shift-Rotate Group,
the Alter-Skip Group,
and the I/O Group.
SRG instruction words may contain from one to four suboperation codes that are executed from left-to-right,
and ASG instruction words may contain from one to eight suboperations.
An optional Extended Arithmetic Unit may be added to the 2115 and 2116 that provides hardware multiply and divide,
double-load and -store,
and double-word shift and rotate instructions.</p>
<p>The 2100 machine uses a microprogrammed processor that provides the 80 instructions of the base set and the EAU as standard equipment.
Optional floating-point microcode adds six two-word single-precision instructions.
User microprogramming is also supported.
When used as part of an HP 2000 Time-Shared BASIC system,
the CPU designated as the I/O processor may be equipped with microcode implementing 18 additional OS accelerator instructions.</p>
<p>The 1000 M/E-Series machines also use microprogrammed processors and extend the 2100 instruction set with two new index registers,
X and Y
and a new Extended Instruction Group consisting of 32 index-register instructions and 10 word-and-byte-manipulation instructions.
The six 2100 floating-point instructions are also standard.
The 1000 F-Series adds a hardware floating-point processor with 18 new triple- and quad-word instructions.
A number of new optional microcode extensions are available with the M/E/F-Series.</p>
<p>The 21xx and 1000 machines provide Direct Memory Access and Dual-Channel Port Controller options,
respectively,
for high-speed I/O transfers.
The 2114 supports a single DMA channel;
all other machines support two DMA or DCPC channels.</p>
<p>1000 CPUs offer the optional Dynamic Mapping System,
which provides memory mapping on a page-by-page basis.
The 5-bit page number of a logical memory address selects one of 32 ten-bit map registers containing physical page numbers.
The ten-bit page number combined with the ten-bit page offset yields a 20-bit physical address capable of accessing a location in a one-megaword memory.
DMS provides separate maps for system and user programs,
as well as for the two DCPC channels,
and includes microcode that implements the 38 Dynamic Mapping Instructions used to manipulate the mapping system.</p>
<p>Optional memory protection is accomplished by dividing the logical address space into protected and unprotected parts.
When protection is enabled,
any attempt to write below the fence separating the two parts is inhibited,
and an interrupt to the operating system occurs,
which aborts the offending user program.
If the DMS option is enabled as well,
protection is enhanced by specifying read and write permissions on a page-by-page basis.</p>
<p>This implementation is a simulator for the HP 21xx and 1000 M/E/F-Series machines
(hereafter referred collectively as the HP computer family unless a specific machine reference is required).
A large variety of CPU options,
device interface cards,
and peripherals are provided.</p>
<p>This simulator does not model the 1000 L/A-Series machines.
While these machines use the same base instruction set,
the I/O structure is entirely different,
and the interfaces are not interchangeable with those of the 21xx/1000 machines.
Moreover,
the peripherals provided by this simulator are,
with few exceptions,
not supported on the L/A-Series.
An L/A-Series implementation would be almost a completely new simulator and therefore likely would be best constructed as a separate project.</p>
</section>
<section id="simulator-files">
<h3><span class="sectnum">1.1.2. </span>Simulator files<a class="headerlink" href="#simulator-files" title="Permalink to this heading">¶</a></h3>
<p>The simulator sources are divided into a set of files for the Simulator Control Program and its support libraries,
and a set of files for the HP 21xx/1000 CPU and device simulations;
the latter reside in a subdirectory of the directory that contains the SCP files.
The former set is common to all SIMH simulators,
whereas the latter set is specific to the virtual machine being simulated.
The files that make up this simulator are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Subdirectory</p></th>
<th class="head"><p>File</p></th>
<th class="head"><p>Contains</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>HP2100</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_cpu.h</span></code></p></td>
<td><p>CPU architectural declarations</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_cpu_dmm.h</span></code></p></td>
<td><p>CPU-to-DMA/MEM/MP interface declarations</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_cpu_fp.h</span></code></p></td>
<td><p>Floating-point interface declarations</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_defs.h</span></code></p></td>
<td><p>System architectural declarations</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_di.h</span></code></p></td>
<td><p>12821A HP-IB Disc Interface simulator declarations</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_disclib.h</span></code></p></td>
<td><p>13037D MAC/ICD disc controller simulator library declarations</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_io.h</span></code></p></td>
<td><p>Device-to-CPU interface declarations</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_baci.c</span></code></p></td>
<td><p>Buffered Asynchronous Communications Interface simulator</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_cpu.c</span></code></p></td>
<td><p>Central Processing Unit simulator</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_cpu0.c</span></code></p></td>
<td><p>UIG, user microcode, and unimplemented instruction simulator</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_cpu1.c</span></code></p></td>
<td><p>EAU, FP, and IOP instruction set simulator</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_cpu2.c</span></code></p></td>
<td><p>DMS and EIG instruction set simulator</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_cpu3.c</span></code></p></td>
<td><p>FFP and DBI instruction set simulator</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_cpu4.c</span></code></p></td>
<td><p>FPP and SIS instruction set simulator</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_cpu5.c</span></code></p></td>
<td><p>RTE-IV EMA, VIS, and SIGNAL/1000 instruction set simulator</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_cpu6.c</span></code></p></td>
<td><p>RTE-6/VM OS instruction set simulator</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_cpu7.c</span></code></p></td>
<td><p>RTE-6/VM VMA instruction set simulator</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_cpu_fp.c</span></code></p></td>
<td><p>Firmware floating point instructions simulator</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_cpu_fpp.c</span></code></p></td>
<td><p>Floating-Point Processor simulator</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_di.c</span></code></p></td>
<td><p>12821A HP-IB Disc Interface simulator</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_di_da.c</span></code></p></td>
<td><p>HP-IB Disc Interface simulator for Amigo disc drives</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_disclib.c</span></code></p></td>
<td><p>13037D MAC/ICD disc controller simulator library</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_dma.c</span></code></p></td>
<td><p>DMA/DCPC simulator</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_dp.c</span></code></p></td>
<td><p>12557A/13210A Disc Interface simulator</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_dq.c</span></code></p></td>
<td><p>12565A Disc Interface simulator</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_dr.c</span></code></p></td>
<td><p>12606B/12610B Disc/Drum Memory Interface simulator</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_ds.c</span></code></p></td>
<td><p>13175D Disc Controller Interface simulator</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_ipl.c</span></code></p></td>
<td><p>12875A Processor Interconnect simulator</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_lps.c</span></code></p></td>
<td><p>12653A Line Printer Interface simulator</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_lpt.c</span></code></p></td>
<td><p>12845B Line Printer Interface simulator</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_mc.c</span></code></p></td>
<td><p>12566B Microcircuit Interface simulator</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_mem.c</span></code></p></td>
<td><p>Main memory/Memory Expansion/Memory Protect simulator</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_mpx.c</span></code></p></td>
<td><p>12792C 8-Channel Asynchronous Multiplexer simulator</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_ms.c</span></code></p></td>
<td><p>13181B/13183B Digital Magnetic Tape Unit Interface simulator</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_mt.c</span></code></p></td>
<td><p>12559C 9-Track Magnetic Tape Unit Interface simulator</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_mux.c</span></code></p></td>
<td><p>12920A Asynchronous Multiplexer Interface simulator</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_pif.c</span></code></p></td>
<td><p>12620A/12936A Privileged Interrupt Fence simulator</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_pt.c</span></code></p></td>
<td><p>12597A-002/005 Paper Tape Reader/Punch Interface simulator</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_sys.c</span></code></p></td>
<td><p>SCP interface</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_tbg.c</span></code></p></td>
<td><p>12539C Time Base Generator Interface simulator</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_tty.c</span></code></p></td>
<td><p>12531C Buffered Teleprinter Interface simulator</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_bugfixes.txt</span></code></p></td>
<td><p>HP 2100 simulator bug fix reports (historical)</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_diag.txt</span></code></p></td>
<td><p>SIMH/HP 2100 diagnostics performance report</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hp2100_release.txt</span></code></p></td>
<td><p>SIMH/HP 2100 simulator release notes</p></td>
</tr>
</tbody>
</table>
<p>PDF files of the original HP 21xx and 1000-series hardware and software manuals are available from
<a class="reference external" href="http://www.bitsavers.org/">Bitsavers</a> and
<a class="reference external" href="http://www.hpmuseum.net/">The HP Computer Museum</a>.</p>
<p>A software kit containing an HP 7925 disc image with RTE-6/VM preinstalled is available from
<a class="reference external" href="http://www.bitsavers.org/bits/HP/tapes/rte-6vm/rte6200/">Bitsavers</a>.</p>
<p>A software kit containing an HP 7920H disc image with RTE-IVB preinstalled is available from
<a class="reference external" href="http://www.hpmuseum.net/display_item.php?sw=565">The HP Computer Museum</a>.</p>
<p>Software kits containing bootable disc images with HP 2000E,
2000F,
and 2000 Access Time-Shared BASIC preinstalled and associated command files to automate the system startup processes are available from
<a class="reference external" href="http://simh.trailing-edge.com/software.html">The SIMH Software Repository</a>.</p>
<p>QCTerm,
an HP 700 terminal emulator for Microsoft Windows,
is available from
<a class="reference external" href="http://www.hpmuseum.net/display_item.php?sw=585">The HP Computer Museum</a>.</p>
<p>Use of an HP terminal via a serial port or a terminal emulator via Telnet enables the advanced screen editing features of the RTE operating systems.</p>
<p>The simulator supports the dual-CPU HP 2000 Time-Shared BASIC systems (2000C’, 2000F, and 2000 Access).
A paper describing the implications involved in synchronizing two independent simulator processes is available in PDF format from SIMH’s papers on simulation and historic systems:
<a class="reference external" href="http://simh.trailing-edge.com/docs/running_hp_2000_tsb.pdf">Running HP Time-Shared BASIC on SIMH</a>.</p>
<p>A paper describing the internal design of the I/O hardware simulation is available in PDF format from SIMH’s papers on simulation and historic systems:
<a class="reference external" href="http://simh.trailing-edge.com/docs/hp_1000_io_simulation.pdf">The Evolution of the HP21xx/1000 I/O Simulation</a>.</p>
<p>Additional software and documentation resources are listed in the <a class="reference external" href="../HP2100/hp2100_release.txt"><code class="docutils literal notranslate"><span class="pre">hp2100_release.txt</span></code></a> file.
In addition,
the reference manuals used to develop the various simulated devices are listed in the comments at the start of the respective simulator source modules.</p>
</section>
</section>
<section id="simulator-features">
<h2><span class="sectnum">1.2. </span>Simulator features<a class="headerlink" href="#simulator-features" title="Permalink to this heading">¶</a></h2>
<p>The HP 2100 simulator provides the following device simulations:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Device name(s)</p></th>
<th class="head"><p>Simulates</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>CPU</strong></p></td>
<td><div class="line-block">
<div class="line">2114C Computer with up to 16K words of memory</div>
<div class="line">2115A Computer with up to 8K words of memory</div>
<div class="line">2116C Computer with up to 32K words of memory</div>
<div class="line">2100A Computer with up to 32K words of memory</div>
<div class="line">1000 M/E/F-Series Computer with up to 1024K words of memory</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><strong>DCPC1, DCPC2</strong></p></td>
<td><p>12897B Dual-Channel Port Controller</p></td>
</tr>
<tr class="row-even"><td><p><strong>DMA1, DMA2</strong></p></td>
<td><p>12578A/12607B/12895A Direct Memory Access</p></td>
</tr>
<tr class="row-odd"><td><p><strong>MEM</strong></p></td>
<td><p>12731A Memory Expansion Module</p></td>
</tr>
<tr class="row-even"><td><p><strong>MP</strong></p></td>
<td><p>12581A/12892B Memory Protect</p></td>
</tr>
<tr class="row-odd"><td><p><strong>BACI</strong></p></td>
<td><p>12966A Buffered Asynchronous Communications Interface</p></td>
</tr>
<tr class="row-even"><td><p><strong>DA</strong></p></td>
<td><p>12821A Disc Interface with four 7906H/7920H/7925H drives</p></td>
</tr>
<tr class="row-odd"><td><p><strong>DPD, DPC</strong></p></td>
<td><div class="line-block">
<div class="line">12557A Cartridge Disc Interface with four 2870 drives</div>
<div class="line">13210A Disc Drive Interface with four 7900 drives</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><strong>DQD, DQC</strong></p></td>
<td><p>12565A Disc Interface with two 2883 drives</p></td>
</tr>
<tr class="row-odd"><td><p><strong>DRD, DRC</strong></p></td>
<td><div class="line-block">
<div class="line">12606B Disc Memory Interface with one 2770/2771 disc</div>
<div class="line">12610B Drum Memory Interface with one 2773/2774/2775 drum</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><strong>DS</strong></p></td>
<td><p>13175D Disc Controller Interface with eight 7905/7906/7920/7925 drives</p></td>
</tr>
<tr class="row-odd"><td><p><strong>IPLI, IPLO</strong></p></td>
<td><p>12875A Processor Interconnect</p></td>
</tr>
<tr class="row-even"><td><p><strong>LPS</strong></p></td>
<td><p>12653A Line Printer Interface with one 2767 line printer</p></td>
</tr>
<tr class="row-odd"><td><p><strong>LPT</strong></p></td>
<td><p>12845B Line Printer Interface with one 2607/13/17/18 line printer</p></td>
</tr>
<tr class="row-even"><td><p><strong>MC1, MC2</strong></p></td>
<td><p>12566B Microcircuit Interface</p></td>
</tr>
<tr class="row-odd"><td><p><strong>MPX</strong></p></td>
<td><p>12792C 8-Channel Asynchronous Multiplexer</p></td>
</tr>
<tr class="row-even"><td><p><strong>MSD, MSC</strong></p></td>
<td><div class="line-block">
<div class="line">13181B Digital Magnetic Tape Unit Interface with four 7970B drives</div>
<div class="line">13183B Digital Magnetic Tape Unit Interface with four 7970E drives</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><strong>MTD, MTC</strong></p></td>
<td><p>12559C 9-Track Magnetic Tape Unit Interface with one 3030 drive</p></td>
</tr>
<tr class="row-even"><td><p><strong>MUX, MUXL, MUXC</strong></p></td>
<td><p>12920A Asynchronous Multiplexer Interface</p></td>
</tr>
<tr class="row-odd"><td><p><strong>PIF</strong></p></td>
<td><p>12620A/12936A Privileged Interrupt Fence</p></td>
</tr>
<tr class="row-even"><td><p><strong>PTP</strong></p></td>
<td><p>12597A-005 Tape Punch Interface with one 2895 paper tape punch</p></td>
</tr>
<tr class="row-odd"><td><p><strong>PTR</strong></p></td>
<td><p>12597A-002 Tape Reader Interface with one 2748 paper tape reader</p></td>
</tr>
<tr class="row-even"><td><p><strong>TBG</strong></p></td>
<td><p>12539C Time Base Generator Interface</p></td>
</tr>
<tr class="row-odd"><td><p><strong>TTY</strong></p></td>
<td><p>12531C Buffered Teleprinter Interface with one 2752/54 teleprinter</p></td>
</tr>
</tbody>
</table>
<p>One instance of each listed device may be installed in the simulated computer chassis.
Many devices support multiple connected units.
As an example,
the DS device simulates a single 13175D Disc Controller Interface that connects up to eight drives.
However,
installing a second 13175D to connect an additional eight drives is not supported.</p>
<p>The simulator has been tested with and supports the following operating systems:</p>
<ul class="simple">
<li><p>2000E Time-Shared BASIC revision 1534</p></li>
<li><p>2000F Time-Shared BASIC revision 1410</p></li>
<li><p>2000 Access Time-Shared BASIC revision 1812</p></li>
<li><p>DOS Disc Operating System revision C</p></li>
<li><p>DOS-M Disc Operating System revision F</p></li>
<li><p>DOS-III Disc Operating System revision 1511</p></li>
<li><p>RTE-II Real-Time Executive revision 1926</p></li>
<li><p>RTE-III Real-Time Executive revision 1926</p></li>
<li><p>RTE-IV Real-Time Executive revision 2013</p></li>
<li><p>RTE-IVB Real-Time Executive revision 5010</p></li>
<li><p>RTE-6/VM Real-Time Executive revision 6210</p></li>
</ul>
<p>In addition, the simulator generally passes the HP 24396 Stand-Alone Diagnostics suite;
see <a class="reference external" href="../HP2100/hp2100_diag.txt"><code class="docutils literal notranslate"><span class="pre">hp2100_diag.txt</span></code></a> for details.</p>
<p>The simulator may be configured to stop for any of these conditions:</p>
<ul class="simple">
<li><p>Attempted execution of an unimplemented or undefined instruction.</p></li>
<li><p>Attempted execution of an I/O instruction that addresses an unassigned select code.</p></li>
<li><p>Attempted execution of a memory reference instruction with too many indirect references.</p></li>
<li><p>Occurrence of an I/O error on a device that does not report error status to the CPU.</p></li>
</ul>
<p>The simulator also provides extensive facilities for tracing CPU and I/O device operations.</p>
<section id="hardware-equivalent-actions">
<h3><span class="sectnum">1.2.1. </span>Hardware-equivalent actions<a class="headerlink" href="#hardware-equivalent-actions" title="Permalink to this heading">¶</a></h3>
<p>The current implementation does not provide simulations of the CPU or peripheral device front panels.
Instead, commands entered through the simulation console are used to perform hardware actions.
The simulation commands that substitute for CPU front-panel actions are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Hardware front-panel action</p></th>
<th class="head"><p>Equivalent simulation command</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Pressing the <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> button</p></td>
<td><p><span class="html"><samp>GO</samp></span></p></td>
</tr>
<tr class="row-odd"><td><p>Pressing the <span class="html"><samp class="guilabel"><b>HALT</b></samp></span> button</p></td>
<td><p><span class="html"><samp>CTRL+E</samp></span></p></td>
</tr>
<tr class="row-even"><td><p>Pressing the <span class="html"><samp class="guilabel"><b>INSTR STEP</b></samp></span> button</p></td>
<td><p><span class="html"><samp>STEP</samp></span></p></td>
</tr>
<tr class="row-odd"><td><p>Pressing the <span class="html"><samp class="guilabel"><b>PRESET</b></samp></span> button</p></td>
<td><p><span class="html"><samp>RESET</samp></span></p></td>
</tr>
<tr class="row-even"><td><p>Pressing the <span class="html"><samp class="guilabel"><b>PRESET</b></samp></span> and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> buttons</p></td>
<td><p><span class="html"><samp>RUN</samp></span></p></td>
</tr>
<tr class="row-odd"><td><p>Pressing the <span class="html"><samp class="guilabel"><b>IBL</b></samp></span> button</p></td>
<td><p><span class="html"><samp>LOAD CPU</samp></span></p></td>
</tr>
<tr class="row-even"><td><p>Pressing the <span class="html"><samp class="guilabel"><b>IBL</b></samp></span>, <span class="html"><samp class="guilabel"><b>PRESET</b></samp></span>, and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> buttons</p></td>
<td><p><span class="html"><samp>BOOT CPU</samp></span></p></td>
</tr>
<tr class="row-odd"><td><p>Pressing the <span class="html"><samp class="guilabel"><b>LOADER ENABLE</b></samp></span> button</p></td>
<td><p><span class="html"><samp>SET CPU LOADERENABLE</samp></span></p></td>
</tr>
<tr class="row-even"><td><p>Displaying memory</p></td>
<td><p><span class="html"><samp>EXAMINE <var>address</var></samp></span></p></td>
</tr>
<tr class="row-odd"><td><p>Displaying registers</p></td>
<td><p><span class="html"><samp>EXAMINE <var>register</var></samp></span></p></td>
</tr>
<tr class="row-even"><td><p>Setting memory</p></td>
<td><p><span class="html"><samp>DEPOSIT <var>address</var> <var>value</var></samp></span></p></td>
</tr>
<tr class="row-odd"><td><p>Setting registers</p></td>
<td><p><span class="html"><samp>DEPOSIT <var>register</var> <var>value</var></samp></span></p></td>
</tr>
<tr class="row-even"><td><p>Setting the switch register</p></td>
<td><p><span class="html"><samp>DEPOSIT S <var>value</var></samp></span></p></td>
</tr>
</tbody>
</table>
<p>Memory may also be displayed,
but not set,
by setting the M (memory address) register to the desired memory address and displaying the T (memory data) register.</p>
<p>Mounting media on a peripheral device is simulated by the <span class="html"><samp><b>ATTACH</b></samp></span> command.
For example,
entering the <span class="html"><samp><b>ATTACH PTR</b> <var>tape-image-filename</var></samp></span> command is equivalent to loading the paper tape into an HP 2748B Tape Reader.
Inserting a disc pack into an HP 7900A disc drive set for unit 2 is simulated by the <span class="html"><samp><b>ATTACH DPC2</b> <var>disc-image-filename</var></samp></span> command.</p>
<p>Each of these commands is explained in more detail below.</p>
<p>In hardware,
loading programs into memory from a device is accomplished by running a bootstrap loader that is configured for the select code(s) used by the device interface.
For the 2114, 2115, 2116, and 2100 CPUs,
this involves enabling the protected area of core memory containing the loader,
setting the P register to point at the loader’s starting address,
and pressing <span class="html"><samp class="guilabel"><b>PRESET</b></samp></span> (or <span class="html"><samp class="guilabel"><b>INTERNAL PRESET</b></samp></span> and <span class="html"><samp class="guilabel"><b>EXTERNAL PRESET</b></samp></span> for the 2100) and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span>.
For the 1000 M/E/F-Series CPUs,
loading involves setting the S register to select the bootstrap loader ROM and interface select code,
and pressing <span class="html"><samp class="guilabel">STORE</samp></span>, <span class="html"><samp class="guilabel"><b>IBL</b></samp></span>, <span class="html"><samp class="guilabel"><b>PRESET</b></samp></span>, and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span>.</p>
<p>In simulation,
bootstrap loaders may be loaded and run explicitly or implicitly.
Explicit operation is described in the <a class="reference internal" href="#bootstrap-loaders">Bootstrap Loaders</a> section of the CPU device description below.
As a convenience, <span class="html"><samp><b>BOOT</b> <var>device</var></samp></span> commands may be used to implicitly bootstrap their respective devices and are described in the individual device descriptions below.</p>
</section>
<section id="simulator-specific-commands">
<h3><span class="sectnum">1.2.2. </span>Simulator-specific commands<a class="headerlink" href="#simulator-specific-commands" title="Permalink to this heading">¶</a></h3>
<p>In general,
all of the commands documented in the <a class="reference external" href="./simh_doc.rst">SIMH Users’ Guide</a> manual are available for use with the HP 2100 simulator.
Commands whose execution or parameters are implementation-defined are specified below.</p>
<section id="numeric-display-and-entry">
<h4><span class="sectnum">1.2.2.1. </span>Numeric display and entry<a class="headerlink" href="#numeric-display-and-entry" title="Permalink to this heading">¶</a></h4>
<p>When examining or depositing into memory,
the radix for addresses is octal,
and the default radix for numeric data is octal.
The data default may be changed with the <span class="html"><samp><b>SET CPU</b> { <b>BIN</b> | <b>OCT</b> | <b>DEC</b> | <b>HEX</b> }</samp></span> command,
or the radix may be overridden temporarily with a command-line switch,
as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Switch</p></th>
<th class="head"><p>Interpretation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>-2</b></samp></span></p></td>
<td><p>A binary value</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>-8</b></samp></span>  or <span class="html"><samp><b>-O</b></samp></span></p></td>
<td><p>An octal value</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>-10</b></samp></span> or <span class="html"><samp><b>-D</b></samp></span></p></td>
<td><p>A decimal value</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>-16</b></samp></span> or <span class="html"><samp><b>-H</b></samp></span></p></td>
<td><p>A hexadecimal value</p></td>
</tr>
</tbody>
</table>
<p>When examining or depositing into device registers,
the default radix for the specified register is used unless overridden with one of the above command-line switches.
Defaults are listed in the register table associated with each device.</p>
</section>
<section id="symbolic-display-and-entry">
<h4><span class="sectnum">1.2.2.2. </span>Symbolic display and entry<a class="headerlink" href="#symbolic-display-and-entry" title="Permalink to this heading">¶</a></h4>
<p>When examining or depositing into memory or certain registers,
command-line switches specifying the symbolic mode and format may be used to override the default numeric mode,
as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Switch</p></th>
<th class="head"><p>Mode interpretation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>-A</b></samp></span></p></td>
<td><p>A single character in the right-hand byte</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>-C</b></samp></span></p></td>
<td><p>A two-character packed string</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>-M</b></samp></span></p></td>
<td><p>A CPU instruction mnemonic</p></td>
</tr>
</tbody>
</table>
<p>In the absence of a mode-switch or a specified symbolic default,
entering values with a leading <code class="docutils literal notranslate"><span class="pre">'</span></code> (apostrophe) implies <span class="html"><samp><b>-A</b></samp></span>,
a leading <code class="docutils literal notranslate"><span class="pre">&quot;</span></code> (quotation mark) implies <span class="html"><samp><b>-C</b></samp></span>,
and a leading alphabetic or punctuation character implies <span class="html"><samp><b>-M</b></samp></span>.
The specific registers supporting symbolic mode are indicated in their respective device sections below.</p>
<p>If the <span class="html"><samp><b>-C</b></samp></span> switch is specified,
the value is displayed as two characters separated by a comma.
Alphanumeric, punctuation, and symbol characters are displayed within apostrophes,
control characters are displayed as ASCII name abbreviations,
and characters above 128 decimal are displayed in escaped numeric form with a leading backslash followed by an octal number.
Depositing with <span class="html"><samp><b>-C</b></samp></span> accepts two displayable characters.
If a single character is supplied,
the low byte of the resulting value will be zero;
follow the character with a space to pad the low byte with a blank.</p>
<p>If the <span class="html"><samp><b>-M</b></samp></span> switch is specified,
the value is displayed or accepted as a CPU machine instruction mnemonic if it is defined and implemented in the currently enabled firmware set.
If it is not,
it is displayed as a numeric value in the CPU’s data radix or is rejected if depositing.
Any numeric operands present are displayed or accepted in a default radix unless overridden by the addition of one of these mutually exclusive format switches:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Switch</p></th>
<th class="head"><p>Format interpretation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>-A</b></samp></span></p></td>
<td><p>A single character in the right-hand byte</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>-B</b></samp></span></p></td>
<td><p>A binary value</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>-O</b></samp></span></p></td>
<td><p>An octal value</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>-D</b></samp></span></p></td>
<td><p>A decimal value</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>-H</b></samp></span></p></td>
<td><p>A hexadecimal value</p></td>
</tr>
</tbody>
</table>
<p>Operand values use a default radix suitable to the type of the value,
as follows:</p>
<ul class="simple">
<li><p>Operand memory addresses and I/O instruction select codes use the CPU’s address radix,
which is octal.</p></li>
<li><p>Extended Arithmetic Unit instruction shift and rotate counts and I/O Processor instruction index displacements use decimal unless overridden by a format switch on the command-line.</p></li>
<li><p>I/O Processor and Scientific Instruction Set instruction operand data values use the CPU’s data radix,
which defaults to octal but may be set to a different radix or overridden by a format switch on the command-line.</p></li>
</ul>
<p>If the CPU data radix is set to hexadecimal,
caution must be exercised when entering hex values without a leading digit.
A value that is the same as an instruction mnemonic will be interpreted as the latter.
For example,
<span class="html"><samp><b>CCE</b></samp></span> is an instruction mnemonic,
but <span class="html"><samp><b>CCEE</b></samp></span> is a hex value.
To avoid confusion,
always enter hex values with the <span class="html"><samp><b>-H</b></samp></span> switch or with a leading zero (i.e., <span class="html"><samp><b>0CCE</b></samp></span>).</p>
<p>Machine instruction entry uses the HP Assembler syntax,
with the exceptions noted below.
The set of recognized mnemonics depends on the current machine configuration.
Instructions not implemented by the current CPU model and installed firmware extensions are displayed in octal form and rejected during symbolic entry.</p>
<p>Operands must be numeric and are interpreted by default in a radix suitable to the type of the value,
rather than the HP Assembler convention of assuming a decimal value unless the letter B,
indicating an octal value,
follows the digits.
For example, LDA 1000 loads from memory location 1000 octal,
LIA 12 loads from select code 12 octal,
and RRR 12 rotates the registers right by 12 decimal places.</p>
<div class="compound">
<p>Memory Reference Group instructions use this extended syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">opcode</span><span class="o">&gt;</span> <span class="p">{</span><span class="n">C</span> <span class="o">|</span> <span class="n">Z</span><span class="p">}</span> <span class="o">&lt;</span><span class="n">address</span><span class="o">&gt;</span><span class="p">{,</span><span class="n">I</span><span class="p">}</span>
</pre></div>
</div>
<p>…where the optional <code class="docutils literal notranslate"><span class="pre">C</span></code> or <code class="docutils literal notranslate"><span class="pre">Z</span></code> specifies a current-page or a zero-page (base-page) address,
and the optional <code class="docutils literal notranslate"><span class="pre">I</span></code> specifies indirect addressing.
If <code class="docutils literal notranslate"><span class="pre">C</span></code> or <code class="docutils literal notranslate"><span class="pre">Z</span></code> is specified,
the address is restricted to the octal range 0-1777;
otherwise,
the full 32K logical addressing range 0-77777 is allowed.</p>
</div>
<p>Memory Reference Group machine instructions address locations in either the 1024-word base page (page 0) or the 1024-word current page (the page containing the instruction).
Normally,
the base/current selection and page offset are implied by the address given:
an address from 0-1777 is a base-page reference,
an address within the page containing the deposited instruction is a current-page reference,
and any other address is illegal.
For example, entering <span class="html"><samp><b>DEPOSIT 11000 LDA 10000</b></samp></span> stores a current-page reference with an offset of 0.
Entering <span class="html"><samp><b>DEPOSIT 11000 LDA 1000</b></samp></span> stores a base-page reference with an offset of 1000.
Entering <span class="html"><samp><b>DEPOSIT 11000 LDA 12000</b></samp></span> is rejected as illegal,
as the address is neither within the current page nor the base page.</p>
<p><code class="docutils literal notranslate"><span class="pre">C</span></code> or <code class="docutils literal notranslate"><span class="pre">Z</span></code> must be specified when the instruction is being entered into memory above the 32K logical address space or into a device (e.g., disc) buffer.
In these cases,
the eventual containing address is unknown,
making the implied current/base page determination impossible.
Therefore,
the current/zero indicator and the page offset must be entered explicitly.</p>
</section>
<section id="examine-deposit-iexamine-and-ideposit">
<span id="ideposit"></span><span id="iexamine"></span><span id="deposit"></span><span id="examine"></span><h4><span class="sectnum">1.2.2.3. </span><code class="docutils literal notranslate"><span class="pre">EXAMINE</span></code>, <code class="docutils literal notranslate"><span class="pre">DEPOSIT</span></code>, <code class="docutils literal notranslate"><span class="pre">IEXAMINE</span></code>, and <code class="docutils literal notranslate"><span class="pre">IDEPOSIT</span></code><a class="headerlink" href="#examine-deposit-iexamine-and-ideposit" title="Permalink to this heading">¶</a></h4>
<div class="compound">
<p>For these commands,
the following address forms are valid:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">page</span><span class="o">&gt;.&lt;</span><span class="n">offset</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">logical</span><span class="o">-</span><span class="n">address</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>…where <code class="docutils literal notranslate"><span class="pre">page</span></code> is a 10-bit physical page number and <code class="docutils literal notranslate"><span class="pre">offset</span></code> is a 10-bit offset within the page
(e.g., <span class="html"><samp>1777.1777</samp></span>),
and <code class="docutils literal notranslate"><span class="pre">logical-address</span></code> is a 15-bit offset within the 32K logical address space
(e.g., <span class="html"><samp>77777</samp></span>).
Command-line switches modify the mapping of logical addresses to physical addresses as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Switch</p></th>
<th class="head"><p>Interpretation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>-N</b></samp></span></p></td>
<td><p>Use the address directly with no mapping</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>-S</b></samp></span></p></td>
<td><p>If memory expansion is enabled, use the system map</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>-U</b></samp></span></p></td>
<td><p>If memory expansion is enabled, use the user map</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>-P</b></samp></span></p></td>
<td><p>If memory expansion is enabled, use the port A map</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>-Q</b></samp></span></p></td>
<td><p>If memory expansion is enabled, use the port B map</p></td>
</tr>
</tbody>
</table>
</div>
<p>If no switch is specified,
the address is interpreted using <span class="html"><samp><b>-N</b></samp></span> if memory expansion is currently disabled,
otherwise it is interpreted using <span class="html"><samp><b>-S</b></samp></span> if the system map or <span class="html"><samp><b>-U</b></samp></span> if the user map is currently enabled.
If mapping is requested,
then memory expansion must be enabled,
and the address must lie within the 32K logical address space.</p>
<p>Addresses within the first 32K are displayed in logical form.
Addresses above 32K are displayed in physical form.</p>
</section>
<section id="break-and-nobreak">
<span id="nobreak"></span><span id="break"></span><h4><span class="sectnum">1.2.2.4. </span><code class="docutils literal notranslate"><span class="pre">BREAK</span></code> and <code class="docutils literal notranslate"><span class="pre">NOBREAK</span></code><a class="headerlink" href="#break-and-nobreak" title="Permalink to this heading">¶</a></h4>
<p>The <span class="html"><samp class="guilabel"><b>BREAK</b></samp></span> and <span class="html"><samp class="guilabel"><b>NOBREAK</b></samp></span> commands accept only logical addresses consisting of 15-bit offsets within the 32K logical address space
(e.g., <span class="html"><samp>77777</samp></span>).
If the breakpoint address is not supplied,
it defaults to the current P-register value.
Breakpoint addresses are always displayed in logical form.</p>
<p>The CPU implements four different kinds of instruction breakpoints, as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Switch</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>-E</b></samp></span></p></td>
<td><p>Break unconditionally</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>-N</b></samp></span></p></td>
<td><p>Break if memory expansion is disabled</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>-S</b></samp></span></p></td>
<td><p>Break if memory expansion and the system map are enabled</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>-U</b></samp></span></p></td>
<td><p>Break if memory expansion and the user map are enabled</p></td>
</tr>
</tbody>
</table>
<p>If no switch is specified,
the default is to use <span class="html"><samp><b>-N</b></samp></span> if memory expansion is currently disabled,
otherwise to use <span class="html"><samp><b>-S</b></samp></span> if the system map or <span class="html"><samp><b>-U</b></samp></span> if the user map is currently enabled.
In a DMS environment,
breakpoints on interrupt trap cells should specify the <span class="html"><samp><b>-S</b></samp></span> switch,
as the system map will be enabled when the instruction is executed.</p>
</section>
<section id="reset">
<span id="reset-p"></span><h4><span class="sectnum">1.2.2.5. </span><code class="docutils literal notranslate"><span class="pre">RESET</span></code><a class="headerlink" href="#reset" title="Permalink to this heading">¶</a></h4>
<p>The <span class="html"><samp class="guilabel"><b>RESET</b></samp></span> command is equivalent in hardware to pressing the <span class="html"><samp class="guilabel"><b>PRESET</b></samp></span> front-panel button on the 211x and 1000 M/E/F-Series machines,
and the <span class="html"><samp class="guilabel"><b>INTERNAL PRESET</b></samp></span> and <span class="html"><samp class="guilabel"><b>EXTERNAL PRESET</b></samp></span> buttons on the 2100.
It presets all of the installed I/O interfaces.
The <span class="html"><samp class="guilabel"><b>RESET -P</b></samp></span> command is equivalent to cycling power on the CPU chassis and all installed peripheral devices.
The <span class="html"><samp><b>RESET</b> <var>device</var></samp></span> and <span class="html"><samp><b>RESET -P</b> <var>device</var></samp></span> commands have no direct hardware analogs.
They are functionally equivalent to presetting or power-cycling just the specified device and its associated interface card.</p>
</section>
<section id="run-and-go">
<span id="go"></span><span id="run"></span><h4><span class="sectnum">1.2.2.6. </span><code class="docutils literal notranslate"><span class="pre">RUN</span></code> and <code class="docutils literal notranslate"><span class="pre">GO</span></code><a class="headerlink" href="#run-and-go" title="Permalink to this heading">¶</a></h4>
<p>The <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> and <span class="html"><samp class="guilabel"><b>GO</b></samp></span> commands accept only logical addresses consisting of 15-bit offsets within the 32K logical address space
(e.g., <span class="html"><samp>77777</samp></span>).
If the starting address is supplied,
it is stored in the P register before execution begins.
Otherwise,
execution begins at the current P-register location.</p>
<p>The <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> command does an implied <span class="html"><samp class="guilabel"><b>RESET</b></samp></span>,
so it is equivalent in hardware to pressing the front-panel <span class="html"><samp class="guilabel"><b>PRESET</b></samp></span> and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> buttons on the CPU.
As <span class="html"><samp class="guilabel"><b>PRESET</b></samp></span> initializes all of the I/O interfaces,
the <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> command is almost never the proper command to use after a program has been started.
The <span class="html"><samp class="guilabel"><b>GO</b></samp></span> command is equivalent to pressing the <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> button on the CPU and is the usual way of resuming execution after a programmed halt.
If a <span class="html"><samp class="guilabel"><b>PRESET</b></samp></span> is required before resuming,
the <span class="html"><samp class="guilabel"><b>RESET</b></samp></span> and <span class="html"><samp class="guilabel"><b>GO</b></samp></span> commands are direct analogs of pressing the <span class="html"><samp class="guilabel"><b>PRESET</b></samp></span> and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> buttons,
respectively.</p>
</section>
<section id="load-dump-and-boot">
<span id="boot"></span><span id="dump"></span><span id="load"></span><h4><span class="sectnum">1.2.2.7. </span><code class="docutils literal notranslate"><span class="pre">LOAD</span></code>, <code class="docutils literal notranslate"><span class="pre">DUMP</span></code>, and <code class="docutils literal notranslate"><span class="pre">BOOT</span></code><a class="headerlink" href="#load-dump-and-boot" title="Permalink to this heading">¶</a></h4>
<p>The <span class="html"><samp><b>LOAD</b></samp></span> command is used to install a bootstrap loader into the last 64 words of available memory within the 32K logical address space.
The command accepts two forms.
The syntax of the first form is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LOAD</span> <span class="o">&lt;</span><span class="n">device</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This command copies the loader associated with the specified bootable device into memory,
configures the loader to the select code(s) currently used by the device interface,
and sets the P register to the starting address of the loader program.
For a given device,
the loader selected depends on the current CPU model,
as shown in the following table:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Device name</p></th>
<th class="head"><p>HP 21xx bootstrap</p></th>
<th class="head"><p>HP 1000 bootstrap</p></th>
<th class="head"><p>Boot device</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>DA</strong></p></td>
<td><p>—</p></td>
<td><p>12992H</p></td>
<td><p>7906H/7920H/7925H/9895 ICD Disc</p></td>
</tr>
<tr class="row-odd"><td><p><strong>DPC</strong></p></td>
<td><p>BMDL-7900</p></td>
<td><p>12992F</p></td>
<td><p>2870/7900 Disc</p></td>
</tr>
<tr class="row-even"><td><p><strong>DQC</strong></p></td>
<td><p>BMDL-2883</p></td>
<td><p>12992A</p></td>
<td><p>2883 Disc</p></td>
</tr>
<tr class="row-odd"><td><p><strong>DRC</strong></p></td>
<td><p>BBDL</p></td>
<td><p>—</p></td>
<td><p>277x Fixed-Head Disc/Drum</p></td>
</tr>
<tr class="row-even"><td><p><strong>DS</strong></p></td>
<td><p>BMDL-7905</p></td>
<td><p>12992B</p></td>
<td><p>7905/7906/7920/7925 MAC Disc</p></td>
</tr>
<tr class="row-odd"><td><p><strong>IPL</strong></p></td>
<td><p>BBL-IOP</p></td>
<td><p>12992K</p></td>
<td><p>12875A Processor Interconnect</p></td>
</tr>
<tr class="row-even"><td><p><strong>MSC</strong></p></td>
<td><p>BMTL</p></td>
<td><p>12992D</p></td>
<td><p>7970B/E Magnetic Tape</p></td>
</tr>
<tr class="row-odd"><td><p><strong>PTR</strong></p></td>
<td><p>BBL</p></td>
<td><p>12992K</p></td>
<td><p>2748 Paper Tape Reader</p></td>
</tr>
<tr class="row-even"><td><p><strong>CPU</strong></p></td>
<td><p>—</p></td>
<td><p>(various)</p></td>
<td><p>Selected by S-register bits 15-14</p></td>
</tr>
</tbody>
</table>
<p>The BMDL (Basic Moving-Head Disc Loader),
BBDL (Basic Binary Disc Loader),
BMTL (Basic Magnetic Tape Loader),
and the BBL-IOP (Basic Binary Loader for the I/O Processor) are dual-purpose loaders.
In addition to the specified device,
they also permit booting from the paper tape reader by manually starting the loader from an alternate address.
When one of these loaders is specified,
the paper-tape portion is configured to use the select code of the paper tape reader interface.
The BBL (Basic Binary Loader) and all of the 12992 boot loader ROMs for the 1000 are single-purpose loaders.</p>
<p>For 1000 systems, the <span class="html"><samp><b>LOAD CPU</b></samp></span> command is equivalent to pressing the front-panel <span class="html"><samp class="guilabel"><b>IBL</b></samp></span> (Initial Binary Loader) button.
This copies the content of one of four installed boot loader ROMs into memory.
The ROM is selected by setting bits 15-14 of the S register to the desired ROM socket number before issuing the command.
The <span class="html"><samp class="guilabel"><b>IBL</b></samp></span> operation is described in the <a class="reference internal" href="#bootstrap-loaders">Bootstrap Loaders</a> section of the CPU device description below.</p>
<p>The DA and CPU devices are not supported on 21xx CPUs,
and the DRC device is not supported on 1000 CPUs.
Consequently,
there are no loaders for these device/CPU combinations,
and a corresponding <span class="html"><samp><b>LOAD</b></samp></span> command will be rejected with a <strong>Command not allowed</strong> error.</p>
<p>The second command form installs a loader from an absolute binary file.
The syntax is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LOAD</span> <span class="o">&lt;</span><span class="n">image</span><span class="o">-</span><span class="n">filename</span><span class="o">&gt;</span> <span class="p">{</span><span class="o">&lt;</span><span class="n">select</span><span class="o">-</span><span class="n">code</span><span class="o">&gt;</span><span class="p">}</span>
</pre></div>
</div>
<p>The file is read into the last 64 words of memory.
If the optional select code is supplied,
the loader I/O instructions are configured to the specified device;
otherwise, the loader is not modified.</p>
<p>The binary file must be targeted to addresses in the octal range <span class="html"><samp><var>x</var>7700-<var>x</var>7777</samp></span>,
where <span class="html"><samp><var>x</var></samp></span> may be 0-7.
The loaded program will be relocated to the last 64 words of available memory,
so the desired memory size must be set before issuing the <span class="html"><samp><b>LOAD</b></samp></span> command.
If the optional configuration select code is supplied,
all I/O instructions in the program that reference select codes ≥ 10 octal will be changed by adding the supplied value minus 10 to the instruction.
The effect of this is that instructions that reference select code 10 + <span class="html"><samp><var>n</var></samp></span> will be changed to reference the supplied select code + <span class="html"><samp><var>n</var></samp></span>.
This permits the configuration of loaders using two-card interfaces that reference select codes 10 and 11.</p>
<p>For 1000-series CPUs,
the <span class="html"><samp><b>LOAD</b></samp></span> command serves to install boot loader ROM images other than the ones included with the device simulators.
If the CPU is configured with more than 32K of memory,
the loader is installed in the last 64 words of the 32K logical address space.</p>
<p>For either <span class="html"><samp><b>LOAD</b></samp></span> command form,
if the CPU is configured as a 2114,
2115,
2116,
or 2100,
then the loader remains unprotected when the command completes to permit subsequent execution.
The loader should be protected with a <span class="html"><samp><b>SET CPU LOADERDISABLE</b></samp></span> command if it will not be used immediately.</p>
<p>The <span class="html"><samp><b>DUMP</b></samp></span> command writes the bootstrap loader currently residing in memory to an absolute binary file.
The command format is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DUMP</span> <span class="o">&lt;</span><span class="n">image</span><span class="o">-</span><span class="n">filename</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For 21xx CPUs,
the loader must be unprotected with a <span class="html"><samp><b>SET CPU LOADERENABLE</b></samp></span> command before entering the <span class="html"><samp><b>DUMP</b></samp></span> command;
if the loader is protected,
the output file will contain all zeros.
When the command completes,
the loader remains unprotected.
The resulting file may be used in a subsequent <span class="html"><samp><b>LOAD</b></samp></span> command to reload the bootstrap program.</p>
<p>The <span class="html"><samp><b>BOOT</b></samp></span> command is equivalent to a sequence of <span class="html"><samp><b>LOAD</b></samp></span>, <span class="html"><samp class="guilabel"><b>RESET</b></samp></span>, and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> commands.
The same list of bootable devices accepted by the <span class="html"><samp><b>LOAD</b></samp></span> command above may be used with the <span class="html"><samp><b>BOOT</b></samp></span> command.
Entering a <span class="html"><samp><b>BOOT</b></samp></span> command for one of these devices will preset the S register to the appropriate value before loading and executing the applicable binary loader.
The bootstrap loaders support booting only from unit 0 of the target device.</p>
</section>
<section id="device-configuration">
<h4><span class="sectnum">1.2.2.8. </span>Device configuration<a class="headerlink" href="#device-configuration" title="Permalink to this heading">¶</a></h4>
<p>Most devices support user configuration.
The general forms of the configuration commands are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="p">{</span><span class="o">&lt;</span><span class="n">switch</span><span class="o">&gt;</span> <span class="o">...</span><span class="p">}</span> <span class="o">&lt;</span><span class="n">device</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">option</span><span class="o">&gt;</span><span class="p">{,</span><span class="o">&lt;</span><span class="n">option</span><span class="o">&gt;</span> <span class="o">...</span><span class="p">}</span>
<span class="n">SET</span> <span class="p">{</span><span class="o">&lt;</span><span class="n">switch</span><span class="o">&gt;</span> <span class="o">...</span><span class="p">}</span> <span class="o">&lt;</span><span class="n">unit</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">option</span><span class="o">&gt;</span><span class="p">{,</span><span class="o">&lt;</span><span class="n">option</span><span class="o">&gt;</span> <span class="o">...</span><span class="p">}</span>
</pre></div>
</div>
<p>The options available and applicable switches are described in the individual device descriptions below.</p>
</section>
<section id="enabling-and-disabling-devices">
<h4><span class="sectnum">1.2.2.9. </span>Enabling and disabling devices<a class="headerlink" href="#enabling-and-disabling-devices" title="Permalink to this heading">¶</a></h4>
<p>All devices other than the CPU may be disabled or enabled.
Disabling a device simulates removing the associated accessory or interface from the system chassis.
To disable or enable a device, use:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SET</b> <var>device</var> <b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SET</b> <var>device</var> <b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device</p></td>
</tr>
</tbody>
</table>
<p>For devices that use two interface cards,
enabling or disabling either card also enables or disables the other card.
For example, entering <span class="html"><samp><b>SET DPC DISABLED</b></samp></span> to disable the DPC interface also disables the DPD interface.</p>
<p>Devices that consist of multiple addressable units connected to a controller allow the units to be individually disabled or enabled.
Disabling simulates disconnecting the associated unit from the controller.
The commands to disable or enable a unit are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SET <var>unit</var> DISABLED</b></samp></span></p></td>
<td><p>Disable the unit</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SET <var>unit</var> ENABLED</b></samp></span></p></td>
<td><p>Enable the unit</p></td>
</tr>
</tbody>
</table>
<p>Each of the above command options is replicated in the option tables of the devices to which they apply.</p>
</section>
<section id="i-o-interface-select-code-assignments">
<h4><span class="sectnum">1.2.2.10. </span>I/O Interface select code assignments<a class="headerlink" href="#i-o-interface-select-code-assignments" title="Permalink to this heading">¶</a></h4>
<p>HP hardware I/O interfaces receive their select code assignments from the CPU backplane slots into which they are plugged.
The first I/O slot corresponds to select code 10 octal and has the highest interrupt priority,
with priority decreasing with increasing select code number.
Empty slots may not exist between interface cards;
if all interfaces are not in contiguous slots,
HP 12777A Priority Jumper Cards must be installed in the unused slots.</p>
<p>A device’s select code may be set with the <span class="html"><samp><b>SET</b> <var>dev</var> <b>SC=</b><var>n</var></samp></span> command.
The valid range of select code values is 10-77 octal.
The current select code assignment for a device may be displayed with the <span class="html"><samp>SHOW <var>dev</var> SC</samp></span> command.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">MSC</span> <span class="n">SC</span><span class="o">=</span><span class="mi">26</span>
<span class="n">SHOW</span> <span class="n">PTR</span> <span class="n">SC</span>
</pre></div>
</div>
<p>The current select codes of all devices are displayed with the <span class="html"><samp><b>SHOW DEVICES</b></samp></span> command.
The default settings are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Device Name</p></th>
<th class="head"><p>Select code</p></th>
<th class="head"><p>Initially disabled</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>PTR</strong></p></td>
<td><p>10</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>TTY</strong></p></td>
<td><p>11</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>PTP</strong></p></td>
<td><p>12</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>TBG</strong></p></td>
<td><p>13</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>LPS</strong></p></td>
<td><p>14</p></td>
<td><p>⬤</p></td>
</tr>
<tr class="row-odd"><td><p><strong>LPT</strong></p></td>
<td><p>15</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>MTD</strong></p></td>
<td><p>20</p></td>
<td><p>⬤</p></td>
</tr>
<tr class="row-odd"><td><p><strong>MTC</strong></p></td>
<td><p>21</p></td>
<td><p>⬤</p></td>
</tr>
<tr class="row-even"><td><p><strong>DPD</strong></p></td>
<td><p>22</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>DPC</strong></p></td>
<td><p>23</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>DQD</strong></p></td>
<td><p>24</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>DQC</strong></p></td>
<td><p>25</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>DRD</strong></p></td>
<td><p>26</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>DRC</strong></p></td>
<td><p>27</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>MSD</strong></p></td>
<td><p>30</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>MSC</strong></p></td>
<td><p>31</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>IPLI</strong></p></td>
<td><p>32</p></td>
<td><p>⬤</p></td>
</tr>
<tr class="row-odd"><td><p><strong>IPLO</strong></p></td>
<td><p>33</p></td>
<td><p>⬤</p></td>
</tr>
<tr class="row-even"><td><p><strong>DS</strong></p></td>
<td><p>34</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>BACI</strong></p></td>
<td><p>35</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>MPX</strong></p></td>
<td><p>36</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>PIF</strong></p></td>
<td><p>37</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>MUX</strong></p></td>
<td><p>40</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>MUXL</strong></p></td>
<td><p>41</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>MUXC</strong></p></td>
<td><p>42</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>DA</strong></p></td>
<td><p>43</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>MC1</strong></p></td>
<td><p>45</p></td>
<td><p>⬤</p></td>
</tr>
<tr class="row-odd"><td><p><strong>MC2</strong></p></td>
<td><p>46</p></td>
<td><p>⬤</p></td>
</tr>
</tbody>
</table>
<p>For devices with two interface cards
(e.g., DP),
specify the lower select code with either device name;
the higher select code will be set automatically,
and the cards will be assigned in the correct order.
If a select code conflict occurs,
the simulator will report the error when program execution is attempted.
In simulation,
empty slots behave as though they contain HP 12777A Priority Jumper Cards,
so the device assignments need not be contiguous.</p>
<p>Because they are used infrequently,
the LPS,
MTD and MTC,
IPLI and IPLO,
and MC1 and MC2 devices are initially disabled.</p>
<p>The select codes of the CPU,
MP,
and DMA/DCPC devices are fixed and cannot be changed or displayed.
The MEM device does not have a select code,
as DMS instructions,
and not I/O instructions,
are used to control it.</p>
</section>
<section id="save-and-restore">
<span id="save"></span><span id="restore"></span><h4><span class="sectnum">1.2.2.11. </span><code class="docutils literal notranslate"><span class="pre">SAVE</span></code> and <code class="docutils literal notranslate"><span class="pre">RESTORE</span></code><a class="headerlink" href="#save-and-restore" title="Permalink to this heading">¶</a></h4>
<p><span class="html"><samp><b>SAVE</b></samp></span> and <span class="html"><samp><b>RESTORE</b></samp></span> are supported only when the simulator executable used to restore the simulator state file is the same simulator executable used to save the file.
Correctly restoring the state of the simulator depends on the layout of internal structure variables being identical to the layout of the structure variables that were saved.
This is guaranteed only when using the same executable,
as the layout used is implementation-defined.</p>
</section>
</section>
<section id="realistic-calibrated-and-optimized-timing">
<h3><span class="sectnum">1.2.3. </span>Realistic, calibrated, and optimized timing<a class="headerlink" href="#realistic-calibrated-and-optimized-timing" title="Permalink to this heading">¶</a></h3>
<p>Devices simulate their I/O operation delays (disc seeks,
magnetic tape reads,
printer paper movements, etc.)
by counting specified numbers of “event ticks”.
For example,
a disc seek completion might be scheduled to occur 500 event ticks after command initiation.
Generally,
one event tick is counted for each machine instruction executed,
although some complex instructions may count an event tick for each internal step of the instruction
(e.g., for each word moved within a block-move instruction).
Device simulations provide commands that determine how the appropriate tick counts are selected for I/O operations timing:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SET</b> <var>device</var> <b>REALTIME</b></samp></span></p></td>
<td><p>Configure the device to use <a class="reference internal" href="#realistic-timing">realistic timing</a></p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SET</b> <var>device</var> <b>CALTIME</b></samp></span></p></td>
<td><p>Configure the device to use <a class="reference internal" href="#calibrated-timing">calibrated timing</a></p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SET</b> <var>device</var> <b>FASTTIME</b></samp></span></p></td>
<td><p>Configure the device to use <a class="reference internal" href="#optimized-timing">optimized timing</a></p></td>
</tr>
</tbody>
</table>
<p id="realistic-timing">A device configured to use <em>realistic timing</em> selects its tick counts to encompass the same number of machine instructions as would be executed in hardware.
In real-time mode,
an operation taking ten milliseconds in hardware will complete after 15772 machine instructions have executed,
based on an average 1000 E-Series hardware instruction execution time of 0.634 microseconds.
In this mode,
a software program will execute approximately the same number of instructions during a device operation that it would do on a real machine.
Host machine speed and execution of concurrent host programs will not affect the number of simulated instructions executed for a given operation.</p>
<p id="calibrated-timing">A device configured to use <em>calibrated timing</em> selects its tick counts to align the simulated operation periods with the corresponding time periods on the host system.
In calibrated-time mode,
an operation taking ten milliseconds in hardware will complete after ten milliseconds has elapsed on the host system.
Because the simulator is generally one or two orders of magnitude faster than the hardware,
a software program will execute far more code during a device operation than it would do on a real machine.
In this mode,
the amount of code that executes will vary with the speed of the host machine and the load placed on that machine by other concurrent processes,
as the simulator continually adjusts the tick counts up and down to maintain synchronization with the host time.</p>
<p id="optimized-timing">A device configured to use <em>optimized timing</em> selects its tick counts to minimize the operation delays.
In fast-time mode,
an operation taking ten milliseconds in hardware will complete after the minimum amount of time acceptable to the executing software has elapsed.
In this mode,
device operations complete far more quickly than they do in hardware.
There are limits,
however,
to how fast I/O operations may occur without causing software malfunctions.
In practice,
system software often contains assumptions regarding the time certain operations take,
so event timing may not be arbitrarily reduced.
For instance,
an I/O driver may “know” that a line printer takes 50 milliseconds to print a line,
and therefore it can ignore interrupts safely for several milliseconds after initiating the print cycle.
If the printing time is reduced below that threshold,
the driver may fail to operate correctly.
The default optimized-timing settings have been empirically determined to work with the supported operating systems listed above,
and each device simulator allows the user to modify those settings via registers if needed.</p>
<p>To illustrate how the modes affect timing,
consider a simulation of a Teletype terminal that operates at 10 characters per second.
If the simulator runs 15 times faster than a real machine,
then a user would observe that printing 100 characters takes:</p>
<ul class="simple">
<li><p>10 seconds       in <span class="html"><samp><b>CALTIME</b></samp></span>  mode (100 characters × <span class="html"><samp><var>n</var></samp></span> event ticks per character adjusted to take exactly 100 mS each on the host system)</p></li>
<li><p>667 milliseconds in <span class="html"><samp><b>REALTIME</b></samp></span> mode (100 characters × 157,729 event ticks per character × 0.634 µS per tick ÷ 15 times hardware speed)</p></li>
<li><p>845 microseconds in <span class="html"><samp><b>FASTTIME</b></samp></span> mode (100 characters × 200 event ticks per character × 0.634 µS per tick ÷ 15 times hardware speed)</p></li>
</ul>
<p>If the SCP <span class="html"><samp><b>SET THROTTLE</b></samp></span> command is used to reduce the speed of the simulator,
<span class="html"><samp><b>CALTIME</b></samp></span> operations will not be affected,
but <span class="html"><samp><b>REALTIME</b></samp></span> and <span class="html"><samp><b>FASTTIME</b></samp></span> operations will slow proportionally.
Reducing simulator speed to that of the original hardware will cause REALTIME operation times to equal <span class="html"><samp><b>CALTIME</b></samp></span> times.</p>
<p>Devices offer only those modes that are generally useful.
For example,
the HP 12539C Time Base Generator may be configured to use <span class="html"><samp><b>REALTIME</b></samp></span> or <span class="html"><samp><b>CALTIME</b></samp></span> modes.
The real-time mode will satisfy the expectations of the TBG diagnostic that checks the timing of operations via delay loops,
whereas the calibrated mode will update the DOS, RTE, and TSB time-of-day clocks as expected by users of the simulated system.
<span class="html"><samp><b>FASTTIME</b></samp></span> mode is not offered,
as it makes no sense to ignore the programmed time period settings and use a fixed arbitrary period instead.</p>
<p>Devices performing input or output typically offer a <span class="html"><samp><b>REALTIME</b></samp></span> mode for use when running the diagnostics and a <span class="html"><samp><b>FASTTIME</b></samp></span> mode for use when running operating systems.
In general,
software running under simulation will run faster when devices are configured for optimized-time mode,
and this is the default for all peripheral devices.</p>
</section>
<section id="the-simulation-console-and-the-system-console">
<h3><span class="sectnum">1.2.4. </span>The simulation console and the system console<a class="headerlink" href="#the-simulation-console-and-the-system-console" title="Permalink to this heading">¶</a></h3>
<p>When the simulator is started,
the SCP command prompt appears at the <em>simulation console</em>.
For windowed host operating systems,
this is typically the same window from which the simulator was started.
Once an execution command is entered at the simulation console,
the standalone diagnostics and the operating systems begin their user interactions at the <em>system console</em>.
The TTY device is typically used as the system console.</p>
<p>For convenience and by default,
the system console is initially connected to the simulation console,
so that SCP and operating system commands may be entered from the same window.
Additional “user” terminals may be connected via Telnet or serial ports to the BACI,
MPX,
or MUX devices as described later.</p>
<p>The system console may be separated from the simulation console by using the <span class="html"><samp><b>SET CONSOLE TELNET=</b><var>port</var></samp></span> or <span class="html"><samp><b>SET CONSOLE SERIAL=</b><var>port</var></samp></span> command.
This leaves the simulation console at the initiating window and moves the system console to a Telnet or serial port,
allowing the use of an HP terminal or terminal emulator.
Entering the <span class="html"><samp><b>SET CONSOLE NOTELNET</b></samp></span> or <span class="html"><samp><b>SET CONSOLE NOSERIAL</b></samp></span> command will rejoin the consoles.</p>
</section>
<section id="the-keyboard-poll-device">
<h3><span class="sectnum">1.2.5. </span>The Keyboard Poll device<a class="headerlink" href="#the-keyboard-poll-device" title="Permalink to this heading">¶</a></h3>
<p>The simulator obtains asynchronous external input,
such as system console keystrokes,
by polling.
The poll interval is selected to provide good responsiveness while minimizing simulator overhead.
Polling is established by the Keyboard Poll device,
which is scheduled by a real-time clock with a ten-millisecond period.
The device’s event service routine is entered continuously while the simulator is running.
Devices that accept asynchronous input,
such as the TTY, BACI, MPX, and MUX devices,
co-schedule their event service routines with the poll device.
Entering the <span class="html"><samp><b>SHOW QUEUE</b></samp></span> command at the SCP prompt will display the poll device and any other devices currently polling for input.</p>
<p>The Keyboard Poll device provides no modifiers or registers,
and it cannot be disabled.</p>
</section>
<section id="tracing-simulator-operations">
<h3><span class="sectnum">1.2.6. </span>Tracing simulator operations<a class="headerlink" href="#tracing-simulator-operations" title="Permalink to this heading">¶</a></h3>
<p>The simulator provides options for extensive tracing of the internal operations of selected devices.
This is useful as an aid to hardware and software debugging as well as to gain an understanding of the internal operations of the simulated devices.
Devices offer multiple trace reporting levels,
from command overviews to detailed backplane signal assertions.
Tracing for each device and its separate reporting levels may be enabled independently.</p>
<p>To obtain a trace,
two SCP commands must be given.
First,
a <em>debug log</em> must be established with the <span class="html"><samp><b>SET DEBUG</b> <var>target</var></samp></span> command.
This command is described in detail in the <em>“Controlling debugging”</em> section of the <a class="reference external" href="./simh_doc.rst">SIMH Users’ Guide</a> manual.
Typically,
the target is a text file,
so that the trace may be reviewed after capture.
Second,
tracing must be enabled for the desired devices with <span class="html"><samp><b>SET</b> <var>device</var> <b>DEBUG=</b><var>option</var></samp></span> commands.
These are documented below in the sections that refer to the simulated devices.
The formats of the trace output are specific to the devices being traced.
Examples are provided in each device description section below.</p>
<p>The reporting level options table given for each device is arranged in order of increasing detail.  The first option listed provides the broadest overview with the least specific detail and generates the smallest number of trace lines, thereby slowing program execution the least.  Subsequent options provide increasing detail at the expense of larger debug log files.
Enabling all trace options with a <span class="html"><samp><b>SET</b> <var>device</var> <b>DEBUG</b></samp></span> command provides the fullest picture of device operation but may generate very large log files.</p>
<p>Some options enable tracing of periodic events,
e.g., a clock tick or a device poll.
Use caution when specifying these options,
as the trace log may fill rapidly.
Options that trace periodic behavior are noted in the option descriptions.</p>
<p>Tracing does impose some overhead on the simulator,
with more detailed tracing slowing the simulator more than higher-level tracing.
No overhead is incurred when tracing is suspended with the <span class="html"><samp><b>SET NODEBUG</b></samp></span> command,
even if individual device tracing options remain in effect.</p>
</section>
</section>
<section id="processor-device-simulations">
<h2><span class="sectnum">1.3. </span>Processor device simulations<a class="headerlink" href="#processor-device-simulations" title="Permalink to this heading">¶</a></h2>
<p>An HP-family computer consists of the following subsystems:</p>
<ul class="simple">
<li><p>a 2114, 2115, 2116, 2100, or 1000 M/E/F-Series <a class="reference internal" href="#central-processing-unit">Central Processing Unit</a></p></li>
<li><p>an optional <a class="reference internal" href="#a-12607b-12895a-dma-controller">12578A/12607B/12895A DMA Controller</a> or <a class="reference internal" href="#b-dcpc-controller">12897B DCPC Controller</a></p></li>
<li><p>an optional <a class="reference internal" href="#a-12892b-memory-protect">12581A/12892B Memory Protect</a></p></li>
<li><p>an optional <a class="reference internal" href="#a-memory-expansion-module">12731A Memory Expansion Module</a></p></li>
</ul>
<section id="central-processing-unit">
<span id="cpu"></span><h3><span class="sectnum">1.3.1. </span>Central processing unit<a class="headerlink" href="#central-processing-unit" title="Permalink to this heading">¶</a></h3>
<p>The HP computer Central Processing Unit contains the machine-instruction execution unit and main memory.
CPU options specify the memory size,
installed firmware,
and simulation configuration.
The CPU is configured with commands of the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="p">{</span><span class="o">-</span><span class="n">F</span><span class="p">}</span> <span class="n">CPU</span> <span class="o">&lt;</span><span class="n">option</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Device options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>2114</b></samp></span></p></td>
<td><p>Use a 2114 computer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>2115</b></samp></span></p></td>
<td><p>Use a 2115 computer</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>2116</b></samp></span></p></td>
<td><p>Use a 2116 computer; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>2100</b></samp></span></p></td>
<td><p>Use a 2100 computer</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>1000-M</b></samp></span></p></td>
<td><p>Use a 1000 M-Series computer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>1000-E</b></samp></span></p></td>
<td><p>Use a 1000 E-Series computer</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>1000-F</b></samp></span></p></td>
<td><p>Use a 1000 F-Series computer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>21MX-M</b></samp></span></p></td>
<td><p>Use a 21MX M-Series computer (same as a 1000 M-Series)</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>21MX-E</b></samp></span></p></td>
<td><p>Use a 21MX E-Series computer (same as a 1000 E-Series)</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>8K</b></samp></span></p></td>
<td><p>Set the memory size to 8K words</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>12K</b></samp></span></p></td>
<td><p>Set the memory size to 12K words</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>16K</b></samp></span></p></td>
<td><p>Set the memory size to 16K words</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>24K</b></samp></span></p></td>
<td><p>Set the memory size to 24K words</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>32K</b></samp></span></p></td>
<td><p>Set the memory size to 32K words; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>64K</b></samp></span></p></td>
<td><p>Set the memory size to 64K words</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>128K</b></samp></span></p></td>
<td><p>Set the memory size to 128K words</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>256K</b></samp></span></p></td>
<td><p>Set the memory size to 256K words</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>512K</b></samp></span></p></td>
<td><p>Set the memory size to 512K words</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>1024K</b></samp></span></p></td>
<td><p>Set the memory size to 1024K words</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>EAU</b></samp></span></p></td>
<td><p>Enable the Extended Arithmetic Unit instructions</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NOEAU</b></samp></span></p></td>
<td><p>Disable the Extended Arithmetic Unit instructions; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FP</b></samp></span></p></td>
<td><p>Enable the Floating Point instructions</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NOFP</b></samp></span></p></td>
<td><p>Disable the Floating Point instructions; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>IOP</b></samp></span></p></td>
<td><p>Enable the 2000/Access I/O Processor instructions</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NOIOP</b></samp></span></p></td>
<td><p>Disable the 2000/Access I/O Processor; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DMS</b></samp></span></p></td>
<td><p>Enable the Dynamic Mapping System instructions</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NODMS</b></samp></span></p></td>
<td><p>Disable the Dynamic Mapping System instructions; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FFP</b></samp></span></p></td>
<td><p>Enable the Fast FORTRAN Processor instructions</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NOFFP</b></samp></span></p></td>
<td><p>Disable Fast FORTRAN Processor instructions; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DBI</b></samp></span></p></td>
<td><p>Enable the Double Integer Instructions</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NODBI</b></samp></span></p></td>
<td><p>Disable the Double Integer Instructions; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>EMA</b></samp></span></p></td>
<td><p>Enable the Extended Memory Array instructions</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NOEMA</b></samp></span></p></td>
<td><p>Disable the Extended Memory Array instructions; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>VMAOS</b></samp></span></p></td>
<td><p>Enable the Virtual Memory and Operating System instructions</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NOVMAOS</b></samp></span></p></td>
<td><p>Disable the Virtual Memory and Operating System instructions; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>VIS</b></samp></span></p></td>
<td><p>Enable the Vector Instruction Set</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NOVIS</b></samp></span></p></td>
<td><p>Disable the Vector Instruction Set; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SIGNAL</b></samp></span></p></td>
<td><p>Enable the SIGNAL/1000 instructions</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NOSIGNAL</b></samp></span></p></td>
<td><p>Disable the SIGNAL/1000 Instructions; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>LOADERENABLE</b></samp></span></p></td>
<td><p>Enable access to the protected binary loader</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>LOADERDISABLE</b></samp></span></p></td>
<td><p>Disable access to the protected binary loader; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ROMS=</b><var>rom-list</var></samp></span></p></td>
<td><p>Change the set of installed boot loader ROMs</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>IDLE</b></samp></span></p></td>
<td><p>Enable idle detection</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>NOIDLE</b></samp></span></p></td>
<td><p>Disable idle detection; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>STOP=</b><var>option</var>[<b>;</b><var>option</var>]</samp></span></p></td>
<td><p>Enable simulation stops</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>NOSTOP=</b><var>option</var>[<b>;</b><var>option</var>]</samp></span></p></td>
<td><p>Disable simulation stops; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>INDIR=</b><var>limit</var></samp></span></p></td>
<td><p>Set the maximum indirect addressing chain length; default is 16</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>EXEC=</b><var>match</var>[<b>;</b><var>mask</var>]</samp></span></p></td>
<td><p>Enable execution tracing of matching instructions</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NOEXEC</b></samp></span></p></td>
<td><p>Disable execution tracing; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DEBUG=</b><var>option</var></samp></span></p></td>
<td><p>Enable tracing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NODEBUG</b></samp></span></p></td>
<td><p>Disable tracing; default</p></td>
</tr>
</tbody>
</table>
<p>The abbreviated <span class="html"><samp><b>SET CPU 1000</b></samp></span> and <span class="html"><samp><b>SET CPU 21MX</b></samp></span> commands configure the CPU models as 1000 E-Series and 1000 M-Series machines,
respectively.</p>
<p>If the memory size is being reduced,
and the memory being truncated contains non-zero data,
the simulator asks for confirmation before proceeding.
The confirmation request may be suppressed by using the <span class="html"><samp><b>-F</b></samp></span> (force) switch.
Data in the truncated portion of memory is lost.</p>
<p>The following standard microcode is automatically enabled when the applicable 1000-series CPU is selected:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Instruction Set</p></th>
<th class="head"><p>Applicable to</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Extended Instruction Group</p></td>
<td><p>1000 M/E/F-Series</p></td>
</tr>
<tr class="row-odd"><td><p>Floating-Point Processor</p></td>
<td><p>1000 F-Series</p></td>
</tr>
<tr class="row-even"><td><p>Scientific Instruction Set</p></td>
<td><p>1000 F-Series</p></td>
</tr>
</tbody>
</table>
<p>The 1000 E/F-Series microcode self-test diagnostics are not simulated.</p>
<p id="eau">The <span class="html"><samp><b>EAU</b></samp></span> option simulates the installation of the 12579A Extended Arithmetic Unit providing hardware multiply,
divide,
double load,
double store,
and 32-bit rotate and shift instructions.
EAU instructions are standard equipment on the 2100 and 1000 CPUs.</p>
<p id="fp">The <span class="html"><samp><b>FP</b></samp></span> option simulates the installation of the 12901A Floating Point firmware ROMs,
providing single-precision (two-word) floating-point add,
subtract,
multiply,
divide,
fix,
and float instructions.
FP instructions are standard equipment on 1000 CPUs.</p>
<p id="iop">The <span class="html"><samp><b>IOP</b></samp></span> option simulates the installation of the 13206A (2100),
13207A (1000 M-Series),
or 22702A (1000 E-Series) 2000/Access I/O Processor firmware ROMs.
These instructions accelerate certain common operations of the I/O processor for the HP 2000/Access Time-Shared BASIC operating system.</p>
<p id="dms">The <span class="html"><samp><b>DMS</b></samp></span> option simulates the installation of the <a class="reference internal" href="#a-memory-expansion-module">12731A Memory Expansion Module</a> and the 12976B (1000 M-Series) or 13307B (1000 E/F-Series) Dynamic Mapping System firmware ROMs,
providing 38 instructions that control the MEM to expand the basic 32K-word logical address space to a 1024K-word physical space.
The MEM is automatically enabled or disabled with the DMS instruction set.</p>
<p id="ffp">The <span class="html"><samp><b>FFP</b></samp></span> option simulates the installation of the 12907A (2100),
12977B (1000 M-Series),
or 13306B (1000 E-Series) Fast FORTRAN Processor firmware ROMs,
providing several frequently used FORTRAN operations and extended-precision (three-word) floating-point instructions.</p>
<p id="dbi">The <span class="html"><samp><b>DBI</b></samp></span> option simulates the installation of the 93585A Double Integer Instructions firmware ROMs.
A product of the HP “specials group”, the microcode added twelve 32-bit integer instructions to the 1000 E-Series repertoire.
DBI instructions are standard equipment on the 1000 F-Series CPU.</p>
<p id="ema">The <span class="html"><samp><b>EMA</b></samp></span> option simulates the installation of the 92067A Extended Memory Area firmware ROMs.
The RTE-IV operating system introduced the EMA instructions.
EMA provided a mapped data area up to one megaword in size.
These three instructions accelerated data accesses to variables stored in EMA partitions.</p>
<p id="vmaos">The <span class="html"><samp><b>VMAOS</b></samp></span> option simulates the installation of the 92084A Virtual Memory and Operating System firmware ROMs.
The RTE-6/VM operating system introduced Virtual Memory Area (VMA) instructions —
a superset of the RTE-IV EMA instructions —
and a set of OS instructions that accelerate certain time-consuming internal operations.</p>
<p>The VMA/OS firmware cannot be installed on a 1000 M-Series;
RTE-6/VM will automatically use software replacements on this machine.
The firmware must be installed when running on 1000 E/F-Series hardware;
if it is not,
the firmware self-test instruction will fail,
and RTE will halt with <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">=</span> <span class="pre">102021</span></code>.
Under simulation,
however,
it is possible to configure the self-test instruction to use the software simulations on an E/F-Series.
Entering the command <span class="html"><samp><b>SET CPU DEBUG=NOOS</b></samp></span> will return a firmware revision code of 0 to RTE,
which will permit the use of the software replacements.</p>
<p id="vis">The <span class="html"><samp><b>VIS</b></samp></span> option simulates the installation of the 12824A (for RTE-IVB) or 12829A (for RTE-6/VM) Vector Instruction Set ROMs,
providing vector arithmetic instructions using single- and double-precision values.
Vectors may reside either in EMA/VMA or in regular memory.</p>
<p id="signal">The <span class="html"><samp><b>SIGNAL</b></samp></span> option simulates the installation of the 92835A SIGNAL/1000 firmware ROMs.
These instructions provide fast Fourier transforms and complex arithmetic.
They use the F-Series floating-point processor and the Vector Instruction Set.</p>
<p>The 2100 and 1000 CPUs support user microprogramming.
Under simulation,
execution on these machines of all instructions in the octal ranges 101400-101777 (2100 and 1000) and 105000-105777 (1000 only) that are not allocated to installed firmware options will be dispatched to a user-alterable module to aid in the implementation of user-written microcode simulations.
In the absence of such simulations,
execution will cause unimplemented instruction stops.
See the comments in the <code class="docutils literal notranslate"><span class="pre">hp2100_cpu0.c</span></code> source file for details.</p>
<p>The 2114,
2115,
2116,
and 2100 models support a protected area of memory containing an initial binary loader.
The loader always resides in the highest 64 memory locations,
regardless of capacity.
Entering the <span class="html"><samp><b>SET CPU LOADERENABLE</b></samp></span> command makes this area available.
Entering the <span class="html"><samp><b>SET CPU LOADERDISABLE</b></samp></span> command renders this area non-existent,
so that reads from the area return zero,
and writes to the area are ignored.
The Basic Binary Loader (BBL),
configured for the select code of the paper tape reader,
initially resides in this area when the simulator is started.
The <span class="html"><samp><b>LOAD</b></samp></span> command may be used with an appropriate device name or absolute binary file to install a different loader,
such as the Basic Binary Disc Loader (BBDL) or Basic Moving-head Disc Loader (BMDL).</p>
<p>The <span class="html"><samp><b>SET CPU ROMS</b></samp></span> command is used to change the set of installed boot loader ROMs on the 1000 M/E/F-Series of machines.
It is described in the <a class="reference internal" href="#bootstrap-loaders">Bootstrap Loaders</a> section below.</p>
<p>When enabled by a <span class="html"><samp><b>SET CPU IDLE</b></samp></span> command,
execution of the idle loop instructions within the DOS and RTE operating systems will idle the simulator.
While idle,
the simulator does not use any host system processor time.
Idle detection is operating-system specific and is disabled by default.
When disabled,
the simulator will use 100% of the host-processor CPU time while executing simulated instructions.</p>
<p>Instruction execution trace behavior changes when idling is enabled.
See the <a class="reference internal" href="#tracing">Tracing</a> section below for details.</p>
<p>The <span class="html"><samp><b>SET CPU STOP</b></samp></span> command enables one or more simulation stop conditions,
<span class="html"><samp><b>SET CPU NOSTOP</b></samp></span> disables the specified conditions,
and <span class="html"><samp><b>SET CPU INDIR</b></samp></span> sets the maximum number of indirection levels permitted.
These commands are described in the <a class="reference internal" href="#simulation-stops">Simulation Stops</a> section below.</p>
<p>The <span class="html"><samp><b>SET CPU EXEC</b></samp></span> command configures instruction execution tracing.
This command is described in the <a class="reference internal" href="#tracing">Tracing</a> section below.</p>
<p>The CPU models and feature applicability are shown in the following table:</p>
<table class="docutils align-center" id="id16">
<caption><span class="caption-text"><strong>Key:</strong> ❌ = unavailable, ⭕ = optional, ✓ = standard</span><a class="headerlink" href="#id16" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Feature</p></th>
<th class="head"><p>2114</p></th>
<th class="head"><p>2115</p></th>
<th class="head"><p>2116</p></th>
<th class="head"><p>2100</p></th>
<th class="head"><p>1000 M</p></th>
<th class="head"><p>1000 E</p></th>
<th class="head"><p>1000 F</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Maximum Memory</p></td>
<td><p>16K</p></td>
<td><p>8K</p></td>
<td><p>32K</p></td>
<td><p>32K</p></td>
<td><p>1024K</p></td>
<td><p>1024K</p></td>
<td><p>1024K</p></td>
</tr>
<tr class="row-odd"><td><p>Memory Expansion</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>⭕</p></td>
<td><p>⭕</p></td>
<td><p>⭕</p></td>
</tr>
<tr class="row-even"><td><p>Memory Protect</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>⭕</p></td>
<td><p>✓</p></td>
<td><p>⭕</p></td>
<td><p>⭕</p></td>
<td><p>⭕</p></td>
</tr>
<tr class="row-odd"><td><p>Direct Memory Access</p></td>
<td><p>⭕</p></td>
<td><p>⭕</p></td>
<td><p>⭕</p></td>
<td><p>⭕</p></td>
<td><p>⭕</p></td>
<td><p>⭕</p></td>
<td><p>⭕</p></td>
</tr>
<tr class="row-even"><td><p>EAU</p></td>
<td><p>❌</p></td>
<td><p>⭕</p></td>
<td><p>⭕</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
</tr>
<tr class="row-odd"><td><p>FP</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>⭕</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
</tr>
<tr class="row-even"><td><p>IOP</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>⭕</p></td>
<td><p>⭕</p></td>
<td><p>⭕</p></td>
<td><p>❌</p></td>
</tr>
<tr class="row-odd"><td><p>FFP</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>⭕</p></td>
<td><p>⭕</p></td>
<td><p>⭕</p></td>
<td><p>✓</p></td>
</tr>
<tr class="row-even"><td><p>EIG</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
</tr>
<tr class="row-odd"><td><p>DMS</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>⭕</p></td>
<td><p>⭕</p></td>
<td><p>⭕</p></td>
</tr>
<tr class="row-even"><td><p>DBI</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>⭕</p></td>
<td><p>✓</p></td>
</tr>
<tr class="row-odd"><td><p>EMA</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>⭕</p></td>
<td><p>⭕</p></td>
</tr>
<tr class="row-even"><td><p>VMA/OS</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>⭕</p></td>
<td><p>⭕</p></td>
</tr>
<tr class="row-odd"><td><p>FPP</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>✓</p></td>
</tr>
<tr class="row-even"><td><p>SIS</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>✓</p></td>
</tr>
<tr class="row-odd"><td><p>VIS</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>⭕</p></td>
</tr>
<tr class="row-even"><td><p>SIGNAL</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>❌</p></td>
<td><p>⭕</p></td>
</tr>
</tbody>
</table>
<p>If a feature is standard for a given CPU,
it cannot be disabled;
if a feature is unavailable,
it cannot be enabled.</p>
<p>On the 2100,
the FP or FFP option and the IOP option are mutually exclusive.
On the 1000 E/F-Series,
the RTE-IV EMA and RTE-6/VM VMA and OS options are mutually exclusive.</p>
<p>Setting the CPU model establishes a consistent set of standard features and common options.
Additional <span class="html"><samp><b>SET CPU</b></samp></span> commands may follow to fine-tune the desired feature set.</p>
<p>The CPU configuration may be displayed with the following commands:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW CPU</b></samp></span></p></td>
<td><p>Display the device configuration</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SHOW CPU ROMS</b></samp></span></p></td>
<td><p>Display the set of installed boot loader ROMs</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW CPU IOCAGE</b></samp></span></p></td>
<td><p>Display the set of installed I/O interfaces</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SHOW CPU STOPS</b></samp></span></p></td>
<td><p>Display the enabled simulation stops</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW CPU INDIR</b></samp></span></p></td>
<td><p>Display the indirect chain length limit</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SHOW CPU EXEC</b></samp></span></p></td>
<td><p>Display the matching criteria for execution tracing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW CPU SPEED</b></samp></span></p></td>
<td><p>Display the current simulation speed</p></td>
</tr>
</tbody>
</table>
<p>The current simulation speed,
expressed as a multiple of the speed of a real HP 1000 E-Series,
may be obtained with the <span class="html"><samp><b>SHOW CPU SPEED</b></samp></span> command.
The speed reported will not be representative if the simulator was idling when it was stopped.</p>
<section id="bootstrap-loaders">
<h4><span class="sectnum">1.3.1.1. </span>Bootstrap loaders<a class="headerlink" href="#bootstrap-loaders" title="Permalink to this heading">¶</a></h4>
<p>When the CPU is configured as a 2114, 2115, 2116, or 2100,
the Basic Binary Loader is initially installed in the highest 64 words of core memory.
The BBL reads an absolute binary program from the paper tape reader into memory.
Alternate loaders for other devices may be installed by entering <a class="reference internal" href="#load"><span class="html"><samp><b>LOAD</b></samp></span></a> commands as described above.</p>
<div class="compound">
<p>To execute the BBL, the following sequence of commands is used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="n">PTR</span> <span class="o">&lt;</span><span class="n">tape</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">filename</span><span class="o">&gt;</span>
<span class="n">SET</span> <span class="n">CPU</span> <span class="n">LOADERENABLE</span>
<span class="n">DEPOSIT</span> <span class="n">S</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span>
<span class="n">DEPOSIT</span> <span class="n">P</span> <span class="o">&lt;</span><span class="n">address</span><span class="o">&gt;</span>
<span class="n">RESET</span>
<span class="n">GO</span>
</pre></div>
</div>
<p>…where <code class="docutils literal notranslate"><span class="pre">address</span></code> is the appropriate loader starting address —
07700 for 4K,
17700 for 8K,
27700 for 12K,
37700 for 16K,
57700 for 24K,
or 77700 for 32K.
The S-register value is set to 000000 to load the paper tape,
000001 to verify the paper tape,
or 100000 to compare the paper tape to memory.
Loader execution ends with one of the following halt instructions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 00</span></code> — the tape does not compare with memory; A = the tape value that did not compare.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 11</span></code> — a checksum error occurred; A = the tape value, B = the calculated value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 55</span></code> — the load address would overlay the BBL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 77</span></code> — the end of tape was reached with a successful read.</p></li>
</ul>
</div>
<p>The loader is automatically disabled when the CPU executes the halt instruction within the loader.</p>
<p>1000-series CPUs contain up to four Initial Binary Loaders stored in ROM.
In hardware,
a loader is selected by setting S register bits 15-14 to the ROM number,
bits 13-12 and 5-0 to the ROM-specific options,
and bits 11-6 to the device select code.
Then the <span class="html"><samp class="guilabel"><b>IBL</b></samp></span>, <span class="html"><samp class="guilabel"><b>PRESET</b></samp></span>, and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> front-panel buttons are pressed in sequence to copy the selected ROM into the highest 64 words of memory,
initialize the I/O device interfaces,
and begin execution.</p>
<p>In simulation,
the <span class="html"><samp><b>LOAD CPU</b></samp></span> command implements the IBL facility.
The following set of ROMs is initially installed in the CPU:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>ROM number</p></th>
<th class="head"><p>Product number</p></th>
<th class="head"><p>Boot device description</p></th>
<th class="head"><p>Boot device</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>00</p></td>
<td><p>12992K</p></td>
<td><p>2748B paper tape reader</p></td>
<td><p>PTR</p></td>
</tr>
<tr class="row-odd"><td><p>01</p></td>
<td><p>12992A</p></td>
<td><p>7900 or 2883 disc</p></td>
<td><p>DPC or DQC</p></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p>12992D</p></td>
<td><p>7970B or 7970E magnetic tape</p></td>
<td><p>MSC</p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>12992B</p></td>
<td><p>7905, 7906, 7920, or 7925 disc</p></td>
<td><p>DS</p></td>
</tr>
</tbody>
</table>
<p>To copy and execute a loader,
the following sequence of commands is used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="o">&lt;</span><span class="n">dev</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">image</span><span class="o">-</span><span class="n">filename</span><span class="o">&gt;</span>
<span class="n">DEPOSIT</span> <span class="n">S</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span>
<span class="n">LOAD</span> <span class="n">CPU</span>
<span class="n">RESET</span>
<span class="n">GO</span>
</pre></div>
</div>
<p>A successful copy will set the O (overflow) register to 0 and the P register to the starting address of the loader.
If bits 15-14 of the S register specify an empty ROM socket,
the command will be rejected with a <strong>Non-existent device</strong> error.
If the select code specified in the S register is invalid (less than 10 octal),
the O register will be set to 1,
and the command will be rejected with an <strong>Invalid argument</strong> error.
The P register and memory will not be altered in either case.
No error is reported if the select code does not reference the correct device.
The <span class="html"><samp><b>BOOT CPU</b></samp></span> command may be used in place of the <span class="html"><samp><b>LOAD CPU-RESET-GO</b></samp></span> sequence.
The specific S-register configurations required,
supported image file types,
and the associated loader halt codes are listed under their respective devices below.</p>
<p>The set of boot loaders installed in a 1000-series CPU may be changed with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">CPU</span> <span class="n">ROMS</span><span class="o">=&lt;</span><span class="n">rom</span><span class="o">-</span><span class="nb">list</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The ROM list may be omitted or contain from one to four device names,
separated by semicolons,
that specify the corresponding loaders to install in the ROM sockets.
All four ROM sockets are altered for each command.
If no devices are specified,
then all sockets are emptied.
Otherwise,
specifying a valid device name installs the device loader ROM into the socket corresponding to the position of the device name in the list.
Sockets may be left empty by omitting the corresponding device name or by supplying fewer than four device names.
For example:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SET CPU ROMS=</b></samp></span></p></td>
<td><p>Remove ROMs from sockets 0-3</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SET CPU ROMS=PTR</b></samp></span></p></td>
<td><p>Install the PTR ROM in socket 0; leave sockets 1-3 empty</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SET CPU ROMS=DS;MS</b></samp></span></p></td>
<td><p>Install the DS ROM in 0 and the MS ROM in 1; leave 2 and 3 empty</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SET CPU ROMS=;;DPC</b></samp></span></p></td>
<td><p>Install the DPC ROM in 2; leave 0, 1, and 3 empty</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SET CPU ROMS=DQC;;;DA</b></samp></span></p></td>
<td><p>Install the DQC ROM in 0 and the DA ROM in 3; leave 1 and 2 empty</p></td>
</tr>
</tbody>
</table>
<p>The current CPU model must be a 1000-series machine,
and each device must be bootable and have a loader ROM assigned,
or the command will be rejected.
A rejected command does not alter any of the ROM assignments.</p>
<p>The <span class="html"><samp><b>SHOW CPU ROMS</b></samp></span> command displays the set of loader ROMs currently installed.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Socket</span>  <span class="n">Device</span>  <span class="n">ROM</span> <span class="n">Description</span>
<span class="o">------</span>  <span class="o">------</span>  <span class="o">-----------------------------------------</span>
  <span class="mi">0</span>      <span class="n">PTR</span>    <span class="mi">12992</span><span class="n">K</span> <span class="n">Paper</span> <span class="n">Tape</span> <span class="n">Loader</span>
  <span class="mi">1</span>      <span class="n">DQC</span>    <span class="mi">12992</span><span class="n">A</span> <span class="mi">7900</span><span class="o">/</span><span class="mi">7901</span><span class="o">/</span><span class="mi">2883</span> <span class="n">Disc</span> <span class="n">Loader</span>
  <span class="mi">2</span>      <span class="n">MSC</span>    <span class="mi">12992</span><span class="n">D</span> <span class="mi">7970</span> <span class="n">Magnetic</span> <span class="n">Tape</span> <span class="n">Loader</span>
  <span class="mi">3</span>      <span class="n">DS</span>     <span class="mi">12992</span><span class="n">B</span> <span class="mi">7905</span><span class="o">/</span><span class="mi">7906</span><span class="o">/</span><span class="mi">7920</span><span class="o">/</span><span class="mi">7925</span> <span class="n">Disc</span> <span class="n">Loader</span>
</pre></div>
</div>
<p>The <span class="html"><samp><b>SHOW CPU IOCAGE</b></samp></span> command displays the set of interfaces currently installed in the I/O card cage.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SC</span>  <span class="n">Device</span>  <span class="n">Interface</span> <span class="n">Description</span>
<span class="o">--</span>  <span class="o">------</span>  <span class="o">------------------------------------------------------------------</span>
<span class="mi">10</span>   <span class="n">PTR</span>    <span class="mi">12597</span><span class="n">A</span><span class="o">-</span><span class="mi">002</span> <span class="n">Tape</span> <span class="n">Reader</span> <span class="n">Interface</span>
<span class="mi">11</span>   <span class="n">TBG</span>    <span class="mi">12539</span><span class="n">C</span> <span class="n">Time</span> <span class="n">Base</span> <span class="n">Generator</span> <span class="n">Interface</span>
<span class="mi">12</span>   <span class="n">DS</span>     <span class="mi">13175</span><span class="n">D</span> <span class="n">Disc</span> <span class="n">Controller</span> <span class="n">Interface</span>
<span class="mi">13</span>   <span class="n">MSD</span>    <span class="mi">13181</span><span class="n">B</span><span class="o">/</span><span class="mi">13183</span><span class="n">B</span> <span class="n">Digital</span> <span class="n">Magnetic</span> <span class="n">Tape</span> <span class="n">Unit</span> <span class="n">Interface</span> <span class="n">Data</span> <span class="n">Channel</span>
<span class="mi">14</span>   <span class="n">MSC</span>    <span class="mi">13181</span><span class="n">B</span><span class="o">/</span><span class="mi">13183</span><span class="n">B</span> <span class="n">Digital</span> <span class="n">Magnetic</span> <span class="n">Tape</span> <span class="n">Unit</span> <span class="n">Interface</span> <span class="n">Command</span> <span class="n">Channel</span>
<span class="mi">15</span>  <span class="p">(</span><span class="n">none</span><span class="p">)</span>  <span class="mi">12777</span><span class="n">A</span> <span class="n">Priority</span> <span class="n">Jumper</span> <span class="n">Card</span>
<span class="mi">16</span>   <span class="n">TTY</span>    <span class="mi">12531</span><span class="n">C</span> <span class="n">Buffered</span> <span class="n">Teleprinter</span> <span class="n">Interface</span>
<span class="mi">17</span>   <span class="n">PTP</span>    <span class="mi">12597</span><span class="n">A</span><span class="o">-</span><span class="mi">005</span> <span class="n">Tape</span> <span class="n">Punch</span> <span class="n">Interface</span>
<span class="mi">20</span>   <span class="n">LPT</span>    <span class="mi">12845</span><span class="n">B</span> <span class="n">Line</span> <span class="n">Printer</span> <span class="n">Interface</span>
</pre></div>
</div>
<p>The devices appear in select code order,
beginning with select code 10 and ending with the last occupied select code.
Empty card cage slots between devices behave as though they contain HP 12777A Priority Jumper Cards as shown above.
Multiple devices assigned to the same select code are reported as a conflict.
For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">&gt;</span> <span class="n">SET</span> <span class="n">PTP</span> <span class="n">SC</span><span class="o">=</span><span class="mi">12</span>
<span class="n">sim</span><span class="o">&gt;</span> <span class="n">SHOW</span> <span class="n">CPU</span> <span class="n">IOCAGE</span>

<span class="n">Select</span> <span class="n">code</span> <span class="mi">12</span> <span class="n">conflict</span> <span class="p">(</span><span class="n">PTP</span> <span class="ow">and</span> <span class="n">DS</span><span class="p">)</span>

<span class="n">SC</span>  <span class="n">Device</span>  <span class="n">Interface</span> <span class="n">Description</span>
<span class="o">--</span>  <span class="o">------</span>  <span class="o">------------------------------------------------------------------</span>
<span class="mi">10</span>   <span class="n">PTR</span>    <span class="mi">12597</span><span class="n">A</span><span class="o">-</span><span class="mi">002</span> <span class="n">Tape</span> <span class="n">Reader</span> <span class="n">Interface</span>
<span class="mi">11</span>   <span class="n">TBG</span>    <span class="mi">12539</span><span class="n">C</span> <span class="n">Time</span> <span class="n">Base</span> <span class="n">Generator</span> <span class="n">Interface</span>
<span class="mi">12</span>   <span class="o">---</span>    <span class="p">(</span><span class="n">multiple</span> <span class="n">assignments</span><span class="p">)</span>
<span class="mi">13</span>   <span class="n">MSD</span>    <span class="mi">13181</span><span class="n">B</span><span class="o">/</span><span class="mi">13183</span><span class="n">B</span> <span class="n">Digital</span> <span class="n">Magnetic</span> <span class="n">Tape</span> <span class="n">Unit</span> <span class="n">Interface</span> <span class="n">Data</span> <span class="n">Channel</span>
<span class="mi">14</span>   <span class="n">MSC</span>    <span class="mi">13181</span><span class="n">B</span><span class="o">/</span><span class="mi">13183</span><span class="n">B</span> <span class="n">Digital</span> <span class="n">Magnetic</span> <span class="n">Tape</span> <span class="n">Unit</span> <span class="n">Interface</span> <span class="n">Command</span> <span class="n">Channel</span>
<span class="mi">15</span>  <span class="p">(</span><span class="n">none</span><span class="p">)</span>  <span class="mi">12777</span><span class="n">A</span> <span class="n">Priority</span> <span class="n">Jumper</span> <span class="n">Card</span>
<span class="mi">16</span>   <span class="n">TTY</span>    <span class="mi">12531</span><span class="n">C</span> <span class="n">Buffered</span> <span class="n">Teleprinter</span> <span class="n">Interface</span>
<span class="mi">17</span>  <span class="p">(</span><span class="n">none</span><span class="p">)</span>  <span class="mi">12777</span><span class="n">A</span> <span class="n">Priority</span> <span class="n">Jumper</span> <span class="n">Card</span>
<span class="mi">20</span>   <span class="n">LPT</span>    <span class="mi">12845</span><span class="n">B</span> <span class="n">Line</span> <span class="n">Printer</span> <span class="n">Interface</span>
</pre></div>
</div>
<p>The simulator will not begin program execution until the conflict is resolved.</p>
</section>
<section id="simulation-stops">
<h4><span class="sectnum">1.3.1.2. </span>Simulation stops<a class="headerlink" href="#simulation-stops" title="Permalink to this heading">¶</a></h4>
<p>The simulator can be configured to detect certain machine instruction conditions and stop execution when one of them occurs.
Stops may be enabled or disabled individually with these commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">CPU</span> <span class="n">STOP</span><span class="o">=&lt;</span><span class="n">option</span><span class="o">&gt;</span><span class="p">[;</span><span class="o">&lt;</span><span class="n">option</span><span class="p">]</span>
<span class="n">SET</span> <span class="n">CPU</span> <span class="n">NOSTOP</span><span class="o">=&lt;</span><span class="n">option</span><span class="o">&gt;</span><span class="p">[;</span><span class="o">&lt;</span><span class="n">option</span><span class="p">]</span>
</pre></div>
</div>
<p>The <span class="html"><samp><b>SET CPU STOP</b></samp></span> and <span class="html"><samp><b>SET CPU NOSTOP</b></samp></span> commands enable or disable all of the configurable stops.</p>
<p>These options control the simulation stop conditions:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Stop condition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>UNIMPL</b></samp></span></p></td>
<td><p>Stop when an unimplemented instruction is executed</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>UNDEF</b></samp></span></p></td>
<td><p>Stop when an undefined instruction is executed</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>UNSC</b></samp></span></p></td>
<td><p>Stop when an unused select code is referenced</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>IOERR</b></samp></span></p></td>
<td><p>Stop when an unreported I/O error occurs</p></td>
</tr>
</tbody>
</table>
<p id="unimpl">Setting the <span class="html"><samp><b>UNIMPL</b></samp></span> option stops the simulator if execution of an unimplemented instruction is attempted.
An instruction is unimplemented if it is provided by a firmware option that is not currently installed
(e.g., a DAD instruction when the double-integer firmware is not installed)
or is an opcode provided by an installed option but not assigned to an instruction
(e.g., opcode 105335 from the double-integer firmware set).
If the stop is not set,
unimplemented instructions execute as NOP (no-operation),
as in hardware.</p>
<p id="undef">Setting the <span class="html"><samp><b>UNDEF</b></samp></span> option stops the simulator if execution is attempted of an instruction containing a decoded reserved bit pattern other than the one defined in the Operating and Reference Manual for the CPU.
For example,
opcodes 101700 and 105700 are not defined as DMS instructions,
but the microcode executes them as XMM instructions,
rather than as NOPs.
The EAU opcode 100060 is defined as the 1000 E/F-Series TIMER instruction;
it is undefined on other machines,
but it executes as MPY on the M-Series and NOP on the 2100.
The intent of this stop is to catch instructions containing reserved fields with values that change the meaning of those instructions.
If the stop is not set,
undefined instructions execute in the same manner as on the selected CPU hardware.</p>
<p>Certain programs,
such as the HP diagnostic configurator,
intentionally execute unimplemented instructions to determine the CPU model and configuration.
For example,
the configurator executes an RRR 16 instruction to detect the presence of the EAU.
If the EAU is installed,
the A- and B-register contents are exchanged;
otherwise,
the instruction executes as NOP,
and the contents are unaltered.
Also,
the 1000 M-Series is differentiated from the E/F-Series by executing the TIMER instruction;
on the M-Series,
it decodes as MPY and so returns to P+2,
while TIMER returns to P+1 on the E/F-Series.
Enabling the <span class="html"><samp><b>UNIMPL</b></samp></span> and <span class="html"><samp><b>UNDEF</b></samp></span> options prevent this feature detection code from working as expected.
Disabling or bypassing these stops is required to permit correct operation.</p>
<p id="unsc">Setting the <span class="html"><samp><b>UNSC</b></samp></span> option stops the simulator if an I/O instruction references the select code of an I/O backplane slot that does not contain an interface card.
If this option is not set,
referencing an empty slot results in a no-operation,
as in hardware.</p>
<p id="ioerr">Setting the <span class="html"><samp><b>IOERR</b></samp></span> option stops the simulator if an I/O error occurs on a device that does not return error status to the CPU.
For example,
the paper tape punch returns low- or out-of-tape status,
the line printer returns out-of-paper and offline status,
and the disc drive returns not-ready and drive-fault status.
By contrast,
the paper tape reader gives no indication that a tape is loaded.
If the reader is commanded to read when no tape is mounted,
the interface hangs while waiting for the handshake with the device to complete.
In hardware,
the CPU can detect this condition only by timing the operation and concluding that the tape is missing if the timeout is exceeded.
However, if a <span class="html"><samp><b>SET CPU STOP=IOERR</b></samp></span> command has been issued,
then the simulator will stop with an error message to permit the condition to be fixed.
For instance,
attempting to read from the paper tape reader with no paper tape image file attached will print <strong>No tape loaded in the PTR device</strong> and will stop the simulator.
After issuing an <span class="html"><samp><b>ATTACH PTR</b></samp></span> command to load the tape into the reader,
resuming simulation will retry the read.
Devices that respond to the <span class="html"><samp><b>IOERR</b></samp></span> stop are indicated in their respective sections below.</p>
<p>After a simulation stop,
execution may be resumed in one of two ways.
If the cause of the stop has not been remedied and the stop option has not been disabled,
resuming execution with <span class="html"><samp><b>CONTINUE</b></samp></span>,
<span class="html"><samp><b>STEP</b></samp></span>,
<span class="html"><samp class="guilabel"><b>GO</b></samp></span>,
or <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> will cause the stop to occur again.
Alternately,
specifying the <span class="html"><samp><b>-B</b></samp></span> switch with any of the preceding commands will resume execution while bypassing the stop for the current instruction.
Bypassing a stop has the following effect:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Bypass action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>UNIMPL</b></samp></span></p></td>
<td><p>Resume execution with the instruction ignored</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>UNDEF</b></samp></span></p></td>
<td><p>Resume execution with the instruction decoded as in hardware</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>UNSC</b></samp></span></p></td>
<td><p>Resume execution with the I/O instruction ignored</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>IOERR</b></samp></span></p></td>
<td><p>Resume execution with the action as in hardware</p></td>
</tr>
</tbody>
</table>
<div class="compound">
<p>In addition to these configurable stops,
an unconditional simulation stop will occur if an indirect addressing chain exceeds the maximum length specified by a <span class="html"><samp><b>SET CPU INDIR=</b><var>limit</var></samp></span> command.
HP computer family memory addresses may be indirect to indicate that the values point to the target addresses rather than contain the target addresses.
The target of an indirect address may itself be indirect,
and the CPU follows this chain of addresses until it finds a direct address.
Indirect addressing is typically only one or two levels deep,
but if the chain loops back on itself
(e.g., if an indirect address points to itself),
then instruction execution will be stopped.
For example, these commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DEPOSIT</span> <span class="mi">0</span> <span class="n">LDA</span> <span class="mi">1</span><span class="p">,</span><span class="n">I</span>
<span class="n">DEPOSIT</span> <span class="mi">1</span> <span class="mi">100001</span>
<span class="n">RUN</span> <span class="mi">0</span>
</pre></div>
</div>
<p>…will stop the simulator with an <strong>Indirect address loop</strong> message.</p>
</div>
<p>The limit may be set to any number of levels up to 32,768.
This is the absolute maximum number of levels that can be created without an infinite loop —
each location in memory points to the next one except for the last,
which contains the target value.
In practice,
anything over a few levels likely represents a programming error.
The default setting is 16 levels.</p>
</section>
<section id="stop-messages">
<h4><span class="sectnum">1.3.1.3. </span>Stop messages<a class="headerlink" href="#stop-messages" title="Permalink to this heading">¶</a></h4>
<p>When the CPU executes a HLT instruction,
simulated execution terminates,
and control returns to the SCP prompt.
The contents of the T and P registers,
and the halt instruction and the next instruction to execute are displayed.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Programmed</span> <span class="n">halt</span><span class="p">,</span> <span class="n">T</span><span class="p">:</span> <span class="mi">102023</span> <span class="p">(</span><span class="n">HLT</span> <span class="mi">23</span><span class="p">),</span> <span class="n">P</span><span class="p">:</span> <span class="mi">00101</span> <span class="p">(</span><span class="n">CLA</span><span class="p">,</span><span class="n">INA</span><span class="p">)</span>
<span class="n">sim</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>When the simulator stops for a user request or after reaching a breakpoint or completing a <span class="html"><samp><b>STEP</b></samp></span> command,
the P-register value and the next instruction to execute are displayed.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Simulation</span> <span class="n">stopped</span><span class="p">,</span> <span class="n">P</span><span class="p">:</span> <span class="mi">03306</span> <span class="p">(</span><span class="n">JMP</span> <span class="mi">3311</span><span class="p">)</span>
<span class="n">sim</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>If an interrupt is pending,
however,
the instruction contained in the trap cell corresponding to the highest-priority interrupting device will be displayed instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Simulation</span> <span class="n">stopped</span><span class="p">,</span> <span class="n">P</span><span class="p">:</span> <span class="mi">03306</span> <span class="p">(</span><span class="n">IAK</span> <span class="mi">11</span><span class="p">:</span> <span class="n">JSB</span> <span class="mi">1644</span><span class="p">,</span><span class="n">I</span><span class="p">)</span>
<span class="n">sim</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This indicates that when simulation resumes,
the device with select code 11 will receive the interrupt acknowledgement,
and <code class="docutils literal notranslate"><span class="pre">JSB</span> <span class="pre">1644,I</span></code> will be executed.
Note that P does not change when an interrupt occurs and a trap cell instruction is executed.</p>
</section>
<section id="tracing">
<h4><span class="sectnum">1.3.1.4. </span>Tracing<a class="headerlink" href="#tracing" title="Permalink to this heading">¶</a></h4>
<p>When a debug log has been established,
tracing may be configured by specifying one or more of the reporting level options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#instr"><span class="html"><samp><b>INSTR</b></samp></span></a></p></td>
<td><p>Machine instructions executed</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#data"><span class="html"><samp><b>DATA</b></samp></span></a></p></td>
<td><p>Memory data accesses</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#fetch"><span class="html"><samp><b>FETCH</b></samp></span></a></p></td>
<td><p>Memory instruction fetches</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#reg"><span class="html"><samp><b>REG</b></samp></span></a></p></td>
<td><p>Register values</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#opnd"><span class="html"><samp><b>OPND</b></samp></span></a></p></td>
<td><p>Memory operand values</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#exec"><span class="html"><samp><b>EXEC</b></samp></span></a></p></td>
<td><p>Matching instruction execution states</p></td>
</tr>
</tbody>
</table>
<p>A section of an example trace is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span><span class="n">CPU</span> <span class="n">instr</span><span class="p">:</span> <span class="n">S</span> <span class="mi">0002</span> <span class="mi">05756</span>  <span class="mi">102705</span>  <span class="n">STC</span> <span class="mi">5</span>
<span class="o">&gt;&gt;</span><span class="n">CPU</span> <span class="n">fetch</span><span class="p">:</span> <span class="n">S</span> <span class="mi">0002</span> <span class="mi">05757</span>  <span class="mi">105736</span>    <span class="n">instruction</span> <span class="n">fetch</span>
<span class="o">&gt;&gt;</span><span class="n">CPU</span>   <span class="n">reg</span><span class="p">:</span> <span class="n">P</span> <span class="o">****</span> <span class="mi">01011</span>  <span class="mi">042200</span>    <span class="n">A</span> <span class="mi">177777</span><span class="p">,</span> <span class="n">B</span> <span class="mi">177777</span><span class="p">,</span> <span class="n">X</span> <span class="mi">177777</span><span class="p">,</span> <span class="n">Y</span> <span class="mi">000000</span><span class="p">,</span> <span class="n">E</span> <span class="n">O</span> <span class="n">I</span>
<span class="o">&gt;&gt;</span><span class="n">CPU</span> <span class="n">instr</span><span class="p">:</span> <span class="n">S</span> <span class="mi">0002</span> <span class="mi">05757</span>  <span class="mi">105736</span>  <span class="n">UJP</span> <span class="mi">2111</span>
<span class="o">&gt;&gt;</span><span class="n">CPU</span> <span class="n">fetch</span><span class="p">:</span> <span class="n">S</span> <span class="mi">0002</span> <span class="mi">05760</span>  <span class="mi">002111</span>    <span class="n">instruction</span> <span class="n">fetch</span>
<span class="o">&gt;&gt;</span><span class="n">CPU</span> <span class="n">fetch</span><span class="p">:</span> <span class="n">U</span> <span class="mi">0001</span> <span class="mi">02111</span>  <span class="mi">026111</span>    <span class="n">instruction</span> <span class="n">fetch</span>
<span class="o">&gt;&gt;</span><span class="n">CPU</span>   <span class="n">reg</span><span class="p">:</span> <span class="n">P</span> <span class="o">****</span> <span class="mi">01011</span>  <span class="mi">042200</span>    <span class="n">A</span> <span class="mi">177777</span><span class="p">,</span> <span class="n">B</span> <span class="mi">177777</span><span class="p">,</span> <span class="n">X</span> <span class="mi">177777</span><span class="p">,</span> <span class="n">Y</span> <span class="mi">000000</span><span class="p">,</span> <span class="n">E</span> <span class="n">O</span> <span class="n">I</span>
<span class="o">&gt;&gt;</span><span class="n">CPU</span> <span class="n">instr</span><span class="p">:</span> <span class="n">U</span> <span class="mi">0001</span> <span class="mi">02111</span>  <span class="mi">026111</span>  <span class="n">JMP</span> <span class="mi">2111</span>
<span class="o">&gt;&gt;</span><span class="n">CPU</span> <span class="n">instr</span><span class="p">:</span> <span class="n">U</span> <span class="mi">0001</span> <span class="mi">02111</span>  <span class="mi">000011</span>  <span class="n">interrupt</span>
<span class="o">&gt;&gt;</span><span class="n">CPU</span> <span class="n">fetch</span><span class="p">:</span> <span class="n">S</span> <span class="mi">0000</span> <span class="mi">00011</span>  <span class="mi">115013</span>    <span class="n">instruction</span> <span class="n">fetch</span>
<span class="o">&gt;&gt;</span><span class="n">CPU</span>   <span class="n">reg</span><span class="p">:</span> <span class="o">-</span> <span class="o">****</span> <span class="mi">01011</span>  <span class="mi">042200</span>    <span class="n">A</span> <span class="mi">177777</span><span class="p">,</span> <span class="n">B</span> <span class="mi">177777</span><span class="p">,</span> <span class="n">X</span> <span class="mi">177777</span><span class="p">,</span> <span class="n">Y</span> <span class="mi">000000</span><span class="p">,</span> <span class="n">E</span> <span class="n">O</span> <span class="n">I</span>
<span class="o">&gt;&gt;</span><span class="n">CPU</span>   <span class="n">reg</span><span class="p">:</span> <span class="o">-</span> <span class="o">****</span> <span class="o">*****</span>  <span class="o">******</span>    <span class="n">MPF</span> <span class="mi">000000</span><span class="p">,</span> <span class="n">MPV</span> <span class="mi">002111</span><span class="p">,</span> <span class="n">MES</span> <span class="mi">163011</span><span class="p">,</span> <span class="n">MEV</span> <span class="mi">030000</span>
<span class="o">&gt;&gt;</span><span class="n">CPU</span> <span class="n">instr</span><span class="p">:</span> <span class="n">S</span> <span class="mi">0000</span> <span class="mi">00011</span>  <span class="mi">115013</span>  <span class="n">JSB</span> <span class="mi">1013</span><span class="p">,</span><span class="n">I</span>
<span class="o">&gt;&gt;</span><span class="n">CPU</span>  <span class="n">data</span><span class="p">:</span> <span class="n">S</span> <span class="mi">0000</span> <span class="mi">01013</span>  <span class="mi">005557</span>    <span class="n">data</span> <span class="n">read</span>
<span class="o">&gt;&gt;</span><span class="n">CPU</span>  <span class="n">data</span><span class="p">:</span> <span class="n">S</span> <span class="mi">0002</span> <span class="mi">05557</span>  <span class="mi">002111</span>    <span class="n">data</span> <span class="n">write</span>
<span class="o">&gt;&gt;</span><span class="n">CPU</span> <span class="n">fetch</span><span class="p">:</span> <span class="n">S</span> <span class="mi">0002</span> <span class="mi">05560</span>  <span class="mi">103100</span>    <span class="n">instruction</span> <span class="n">fetch</span>
<span class="o">&gt;&gt;</span><span class="n">CPU</span>   <span class="n">reg</span><span class="p">:</span> <span class="o">-</span> <span class="o">****</span> <span class="mi">01011</span>  <span class="mi">042200</span>    <span class="n">A</span> <span class="mi">177777</span><span class="p">,</span> <span class="n">B</span> <span class="mi">177777</span><span class="p">,</span> <span class="n">X</span> <span class="mi">177777</span><span class="p">,</span> <span class="n">Y</span> <span class="mi">000000</span><span class="p">,</span> <span class="n">E</span> <span class="n">O</span> <span class="n">I</span>
</pre></div>
</div>
<p id="instr">The <span class="html"><samp><b>INSTR</b></samp></span> option traces instruction executions.
Each instruction is printed before it is executed.</p>
<p id="data">The <span class="html"><samp><b>DATA</b></samp></span> option traces reads from and writes to memory.
Each is classified by the type of access —
data or unprotected.
Normal data accesses are translated by the current map if DMS is enabled and are subject to memory and DMS page protections.
Unprotected accesses are translated by the specified map if DMS is enabled and have unrestricted access to memory.
Certain firmware extension instructions make unprotected accesses through the system or user maps.</p>
<p id="fetch">The <span class="html"><samp><b>FETCH</b></samp></span> option traces instruction fetches from memory.
Interrupt trap cell instructions and the additional words of multiword instructions are included in this classification.</p>
<p id="reg">The <span class="html"><samp><b>REG</b></samp></span> option traces register values.
Two sets of registers may be printed.
After executing each instruction,
the accumulators,
index registers,
extend and overflow registers,
and the state of the interrupt system are printed.
After executing an instruction that may alter the memory-protect or memory-expansion registers,
the fence,
violation,
and status registers are printed.</p>
<p id="opnd">The <span class="html"><samp><b>OPND</b></samp></span> option traces instruction operand values.
Some instructions take memory and register operands that are difficult to decode from <a class="reference internal" href="#data"><span class="html"><samp><b>DATA</b></samp></span></a> or <a class="reference internal" href="#reg"><span class="html"><samp><b>REG</b></samp></span></a> traces.
This option presents these operands in a higher-level format.
The memory bank and address values are always those of the operands.
The operand data and values printed are specific to the instruction.</p>
<p id="exec">The <span class="html"><samp><b>EXEC</b></samp></span> option traces the execution of instructions that match user-specified criteria.
When a match occurs,
all CPU trace options are turned on for the duration of the execution of the matched instruction.
The prior trace settings are restored when a match fails.
This option allows detailed tracing of specified instructions while minimizing the log file size compared to a full instruction trace.</p>
<p id="set-cpu-exec">The <span class="html"><samp><b>SET CPU EXEC</b></samp></span> command configures the match and mask values used to qualify instructions for execution tracing.
Qualification is performed by ANDing the current instruction with the specified <em>mask</em> value and then comparing the result with the specified <em>match</em> value.
If the <em>mask</em> value is omitted,
the <em>match</em> value must match the instruction exactly.
The values are entered in the CPU’s data radix,
which defaults to octal but may be set to a different radix or overridden by a switch on the command-line.</p>
<p>Setting the <em>mask</em> value allows matching a range of instructions or an instruction with a range of operand values.
For example, <span class="html"><samp><b>SET CPU EXEC=105240;177760</b></samp></span> will trace execution of all EMA or VMA firmware instructions,
<span class="html"><samp><b>SET CPU EXEC=102700;177700</b></samp></span> will trace execution of STC instructions,
and <span class="html"><samp><b>SET CPU EXEC=105040</b></samp></span> will trace execution of FMP instructions.</p>
<p id="set-cpu-idle">If idling has been enabled with the <span class="html"><samp><b>SET CPU IDLE</b></samp></span> command,
tracing will be suspended when the simulator detects an entry into the operating system idle loop.
This is done to avoid printing the hundreds or thousands of loop instructions that are executed while awaiting an interrupt.
Tracing is automatically resumed when the idle loop is exited either by an interrupt or a simulation stop.</p>
<p>The trace formats are interpreted as follows:</p>
<pre class="literal-block" id="trace-formats">&gt;&gt;CPU instr: <span class="html"><ins>S</ins></span> <span class="html"><ins>0002</ins></span> <span class="html"><ins>05757</ins></span>  <span class="html"><ins>105736</ins></span>  <span class="html"><ins>UJP 2111</ins></span>
             │ │    │      │       │
             │ │    │      │       └── Instruction mnemonic
             │ │    │      └────────── Octal data (instruction opcode)
             │ │    └───────────────── Octal address (P register)
             │ └────────────────────── Octal physical page number
             └──────────────────────── Memory map (system/user/disabled)

&gt;&gt;CPU instr: <span class="html"><ins>U</ins></span> <span class="html"><ins>0001</ins></span> <span class="html"><ins>02111</ins></span>  <span class="html"><ins>000011</ins></span>  <span class="html"><ins>interrupt</ins></span>
             │ │    │      │       │
             │ │    │      │       └── Interrupt classification
             │ │    │      └────────── Octal interrupting select code
             │ │    └───────────────── Octal address (P register) at interrupt
             │ └────────────────────── Octal physical page number at interrupt
             └──────────────────────── Memory map (system/user/disabled) at interrupt

&gt;&gt;CPU  data: <span class="html"><ins>-</ins></span> <span class="html"><ins>0000</ins></span> <span class="html"><ins>01013</ins></span>  <span class="html"><ins>005557</ins></span>    <span class="html"><ins>data read</ins></span>
&gt;&gt;CPU  data: <span class="html"><ins>U</ins></span> <span class="html"><ins>0000</ins></span> <span class="html"><ins>01776</ins></span>  <span class="html"><ins>000104</ins></span>    <span class="html"><ins>unprotected write</ins></span>
&gt;&gt;CPU fetch: <span class="html"><ins>S</ins></span> <span class="html"><ins>0002</ins></span> <span class="html"><ins>05757</ins></span>  <span class="html"><ins>105736</ins></span>    <span class="html"><ins>instruction fetch</ins></span>
             │ │    │      │         │
             │ │    │      │         └── Memory access classification
             │ │    │      └──────────── Octal data (memory contents)
             │ │    └─────────────────── Octal logical address (effective address)
             │ └──────────────────────── Octal physical page number
             └────────────────────────── Memory map (system/user/disabled)

&gt;&gt;CPU   reg: <span class="html"><ins>P</ins></span> **** <span class="html"><ins>01011</ins></span>  <span class="html"><ins>042200</ins></span>    <span class="html"><ins>A 177777, B 177777, X 177777, Y 000000, e O I</ins></span>
             │      │      │         │
             │      │      │         └── Register values and interrupt system status
             │      │      └──────────── S register
             │      └─────────────────── MEM base-page fence register
             └────────────────────────── Protection status (protected/unprotected)

&gt;&gt;CPU   reg: <span class="html"><ins>-</ins></span> **** *****  ******    <span class="html"><ins>MPF 000000, MPV 002111, MES 163011, MEV 030000</ins></span>
             │                       │
             │                       └── MP and MEM register values
             └────────────────────────── Protection status (protected/unprotected)

&gt;&gt;CPU  opnd: * **** <span class="html"><ins>20056</ins></span>  <span class="html"><ins>105251</ins></span>    <span class="html"><ins>virtual address 1400006</ins></span>
&gt;&gt;CPU  opnd: * **** <span class="html"><ins>20056</ins></span>  <span class="html"><ins>105251</ins></span>    <span class="html"><ins>dimension 1 element count 1024</ins></span>
&gt;&gt;CPU  opnd: * **** <span class="html"><ins>20056</ins></span>  <span class="html"><ins>105251</ins></span>    <span class="html"><ins>element size 2 offset 00000000000</ins></span>
                    │      │         │
                    │      │         └── Instruction-specific operand value
                    │      └──────────── Associated instruction opcode
                    └─────────────────── Octal address (P register)

&gt;&gt;CPU instr: <span class="html"><ins>-</ins></span> <span class="html"><ins>0001</ins></span> <span class="html"><ins>02200</ins></span>  <span class="html"><ins>102077</ins></span>  <span class="html"><ins>simulation stop: Programmed halt</ins></span>
             │ │    │      │       │
             │ │    │      │       └── Reason for the simulation stop
             │ │    │      └────────── Octal data (T register)
             │ │    └───────────────── Octal address (M register)
             │ └────────────────────── Octal physical page number
             └──────────────────────── Memory map (system/user/disabled)</pre>
<p>Enabling CPU tracing can produce a very large number of lines very quickly,
so care should be used to enable tracing only around the area of interest.
Breakpoint actions may be used to implement this;
for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BREAK</span> <span class="mi">100</span><span class="p">;</span> <span class="n">SET</span> <span class="n">CPU</span> <span class="n">DEBUG</span><span class="p">;</span> <span class="n">GO</span>
<span class="n">BREAK</span> <span class="mi">200</span><span class="p">;</span> <span class="n">SET</span> <span class="n">CPU</span> <span class="n">NODEBUG</span><span class="p">;</span> <span class="n">GO</span>
</pre></div>
</div>
<p>These commands will enable tracing when the program counter reaches location 100 and disable tracing when it reaches location 200,
thereby producing a trace of instructions executed between locations 100 and 200.
Alternately,
if the execution of specific instructions is of interest,
the <span class="html"><samp><b>EXEC</b></samp></span> trace option may be used to reduce the debug log file size.</p>
</section>
<section id="registers">
<h4><span class="sectnum">1.3.1.5. </span>Registers<a class="headerlink" href="#registers" title="Permalink to this heading">¶</a></h4>
<p>The CPU state contains the registers visible to the programmer and the interrupt and dynamic mapping system control registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Symbolic</p></th>
<th class="head"><p>Read-only</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>P</b></samp></span></p></td>
<td><p>15</p></td>
<td><p>8</p></td>
<td></td>
<td></td>
<td><p>Program counter</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>A</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td></td>
<td><p>Accumulator A</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>B</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td></td>
<td><p>Accumulator B</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>M</b></samp></span></p></td>
<td><p>15</p></td>
<td><p>8</p></td>
<td></td>
<td></td>
<td><p>Memory address register</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>T</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td><p>✓</p></td>
<td><p>Memory data register</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>X</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td></td>
<td><p>Index register X</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>Y</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td></td>
<td><p>Index register Y</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>S</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td></td>
<td><p>Display register</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>E</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td></td>
<td><p>Extend register</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>O</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td></td>
<td><p>Overflow register</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CIR</b></samp></span></p></td>
<td><p>6</p></td>
<td><p>8</p></td>
<td></td>
<td></td>
<td><p>Central interrupt register</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>INTSYS</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td></td>
<td><p>Interrupt system enabled</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>INTEN</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td></td>
<td><p>Interrupt recognition enabled</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>IOPSP</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td></td>
<td><p>I/O processor stack pointer</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>PCQ</b></samp></span> [0:63]</p></td>
<td><p>15</p></td>
<td><p>8</p></td>
<td></td>
<td><p>✓</p></td>
<td><p>Program counter queue</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>A</b></samp></span>, <span class="html"><samp><b>B</b></samp></span>, <span class="html"><samp><b>T</b></samp></span>, <span class="html"><samp><b>X</b></samp></span>, <span class="html"><samp><b>Y</b></samp></span>, and <span class="html"><samp><b>S</b></samp></span> registers may be examined or deposited using any of the modes described in the <a class="reference internal" href="#symbolic-display-and-entry">Symbolic display and entry</a> section above.</p>
</section>
</section>
<section id="a-12607b-12895a-direct-memory-access-controllers-12897b-dual-channel-port-controller">
<span id="b-dcpc-controller"></span><span id="a-12607b-12895a-dma-controller"></span><h3><span class="sectnum">1.3.2. </span>12578A/12607B/12895A Direct Memory Access controllers, 12897B Dual-Channel Port Controller<a class="headerlink" href="#a-12607b-12895a-direct-memory-access-controllers-12897b-dual-channel-port-controller" title="Permalink to this heading">¶</a></h3>
<p>Direct memory access controllers permit the computer to transfer data directly between an I/O device and memory on a cycle-stealing basis.
Depending on the CPU,
the device interface,
and main memory speed,
DMA is capable of transferring data blocks from 1 to 32,768 words in length at rates between 500,000 and 1,000,000 words per second.</p>
<p>The HP 12578A DMA controller provides two channels for the 2115 and 2116 computers.
The channels support configurable byte packing and unpacking between memory and the I/O interface;
blocks are limited to 16,384 words in length.
The HP 12607B DMA controller provides a single channel for the 2114 computer.
Block length is limited to 8,192 words,
and byte packing and unpacking are not supported.
The 12895A DMA controller provides two channels for the 2100 computer,
and the HP 12897B Dual-Channel Port Controller provides two channels for the 1000 M/E/F-Series computers.
Neither provides byte packing or unpacking,
and blocks up to 32,768 words may be transferred.
The channels are permanently assigned select codes 2 and 6 for channel 1,
and select codes 3 and 7 for channel 2.</p>
<p id="dcpc2"><span id="dcpc1"></span><span id="dma2"></span><span id="dma1"></span>The device names are <span class="html"><samp><b>DMA1</b></samp></span> for the 12607B,
<span class="html"><samp><b>DMA1</b></samp></span> and <span class="html"><samp><b>DMA2</b></samp></span> for the 12578A and 12895A,
and <span class="html"><samp><b>DCPC1</b></samp></span> and <span class="html"><samp><b>DCPC2</b></samp></span> for the 12897B.
Device options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>DEBUG=</b><var>option</var></samp></span></p></td>
<td><p>Enable tracing</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>NODEBUG</b></samp></span></p></td>
<td><p>Disable tracing; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device</p></td>
</tr>
</tbody>
</table>
<p>When a debug log has been established,
tracing may be configured by specifying one or more of the reporting level options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CMD</b></samp></span></p></td>
<td><p>Channel commands</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CSRW</b></samp></span></p></td>
<td><p>Control, status, read, and write actions</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SR</b></samp></span></p></td>
<td><p>Service requests received</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DATA</b></samp></span></p></td>
<td><p>Direct memory data accesses</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>CMD</b></samp></span> option traces the initiation and completion of channel transfers.
The <span class="html"><samp><b>CSRW</b></samp></span> option traces control, status, read, and write commands sent to the channel.
The <span class="html"><samp><b>SR</b></samp></span> option traces service requests received from the device.
The <span class="html"><samp><b>DATA</b></samp></span> option traces memory accesses performed by the port controller.
The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned via the controller.</p>
<p>The trace formats are interpreted as follows:</p>
<pre class="literal-block">&gt;&gt;DCPC1   cmd: Channel transfer completed
&gt;&gt;DCPC1  csrw: Control word 1 is STC | CLC | select code 23
&gt;&gt;DCPC1    sr: Select code 23 asserted SRQ
&gt;&gt;DCPC1 iobus: <span class="html"><ins>Received data 000000 with signals STC | CLF | SIR | PRH</ins></span>
               └──────────────────────────┬──────────────────────────┘
                                Operational message

&gt;&gt;DCPC1 data: <span class="html"><ins>B</ins></span> <span class="html"><ins>0002</ins></span> <span class="html"><ins>05757</ins></span>  <span class="html"><ins>105736</ins></span>    <span class="html"><ins>dma write</ins></span>
              │ │    │      │         │
              │ │    │      │         └── Memory access classification
              │ │    │      └──────────── Octal data (memory contents)
              │ │    └─────────────────── Octal logical address (effective address)
              │ └──────────────────────── Octal physical page number
              └─────────────────────────  Memory map (port A/port B/disabled)</pre>
<p>Each DMA/DCPC channel state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Symbolic</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>XFR</b></samp></span></p></td>
<td><p>6</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Channel is active if &gt; 0</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Channel interrupt is enabled</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Channel is ready</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Channel is ready (buffer)</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CTL2</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Command word 2/3 selector</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CW1</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Command word 1</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CW2</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Command word 2</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CW3</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Command word 3</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>BYTE</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Byte-packing register is occupied</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>PACKER</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td><p>Byte-packing register</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>BYTE</b></samp></span> and <span class="html"><samp><b>PACKER</b></samp></span> registers are applicable only to the 12578A controller.
The <span class="html"><samp><b>PACKER</b></samp></span> register defaults to single-character format display and entry but may be overridden with a numeric-format switch,
if desired.</p>
</section>
<section id="a-12892b-memory-protect">
<h3><span class="sectnum">1.3.3. </span>12581A/12892B Memory Protect<a class="headerlink" href="#a-12892b-memory-protect" title="Permalink to this heading">¶</a></h3>
<p>Memory protection is standard equipment on the 2100
(although it may be disabled by removing a jumper)
and optional on the 2116 and 1000.
It provides a Fence Register whose setting divides the logical address space of the CPU into protected and unprotected parts.
When enabled,
memory locations below the fence cannot be altered,
nor can execution jump to addresses below the fence.
Violations cause the offending instruction to be aborted,
the address of the instruction to be recorded in the Violation Register,
and an interrupt to select code 5.
The 12892B Memory Protect option for the 1000 has three feature options that are implemented by jumper settings.
The default configuration provides compatibility with 12581A Memory Protect option for the 2116 and the standard memory protection for the 2100.</p>
<p>Device options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>JSBIN</b></samp></span></p></td>
<td><p>Install jumper W5; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>JSBOUT</b></samp></span></p></td>
<td><p>Remove jumper W5</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>INTIN</b></samp></span></p></td>
<td><p>Install jumper W6; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>INTOUT</b></samp></span></p></td>
<td><p>Remove jumper W6</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SEL1IN</b></samp></span></p></td>
<td><p>Install jumper W7</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SEL1OUT</b></samp></span></p></td>
<td><p>Remove jumper W7; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device</p></td>
</tr>
</tbody>
</table>
<p>W5 determines whether JSB instructions referencing memory locations 0 and 1 are legal (installed) or illegal (removed).
W6 controls whether the first three levels of indirect addressing hold off (installed) or permit (removed) pending interrupts.
W7 determines whether I/O instructions referencing select codes other than 1 are legal (installed) or illegal (removed).
I/O instructions referencing select code 1 are legal,
and HLT instructions are illegal,
regardless of the setting of W7.</p>
<p>Memory Protect works in conjunction with the Memory Expansion Module to abort programs that cause MEM violations.
If Memory Protect is not installed (i.e., is disabled),
then MEM violations are recorded in the Violation Register,
but the offending program is allowed to continue.</p>
<p>When a debug log has been established,
tracing may be configured by specifying the reporting level option:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned by the device.</p>
<p>Examples of the trace formats follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span><span class="n">MP</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">ENF</span> <span class="o">|</span> <span class="n">SIR</span> <span class="o">|</span> <span class="n">IEN</span> <span class="o">|</span> <span class="n">PRH</span>
<span class="o">&gt;&gt;</span><span class="n">MP</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">FLG</span> <span class="o">|</span> <span class="n">IRQ</span>
<span class="o">&gt;&gt;</span><span class="n">MP</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">IAK</span> <span class="o">|</span> <span class="n">SIR</span> <span class="o">|</span> <span class="n">IEN</span> <span class="o">|</span> <span class="n">PRH</span>
<span class="o">&gt;&gt;</span><span class="n">MP</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">PRL</span>
<span class="o">&gt;&gt;</span><span class="n">MP</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">IOI</span>
<span class="o">&gt;&gt;</span><span class="n">MP</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">024601</span> <span class="k">with</span> <span class="n">signals</span> <span class="p">(</span><span class="n">none</span><span class="p">)</span>
</pre></div>
</div>
<p>The Memory Protect state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Control flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag buffer flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FR</b></samp></span></p></td>
<td><p>15</p></td>
<td><p>8</p></td>
<td><p>Fence register</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>VR</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Violation register</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>EVR</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Enable violation register flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>MEV</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Memory expansion violation flip-flop</p></td>
</tr>
</tbody>
</table>
</section>
<section id="a-memory-expansion-module">
<h3><span class="sectnum">1.3.4. </span>12731A Memory Expansion Module<a class="headerlink" href="#a-memory-expansion-module" title="Permalink to this heading">¶</a></h3>
<p>The HP 12731A Memory Expansion Module is an option for the HP 1000 M/E/F-Series computers.
The MEM provides mapping of the 32 1024-word logical memory pages into a one-megaword physical memory.
Four separate maps are provided:
system, user, DCPC port A, and DCPC port B.
The MEM is controlled by the associated Dynamic Mapping System instructions and contains Status and Violation Registers.
If the MEM is disabled,
logical memory addresses access the first 32K of physical memory.
If the MEM is enabled,
logical memory addresses are translated to physical memory addresses via the system map or user map,
depending on which one is currently enabled.
DCPC memory addresses are translated via the port A map for channel 1 accesses and the port B map for channel 2 accesses.</p>
<p>The MEM simulator is enabled and disabled by the <span class="html"><samp><b>SET CPU DMS</b></samp></span> and <span class="html"><samp><b>SET CPU NODMS</b></samp></span> commands,
rather than the <span class="html"><samp><b>SET MEM ENABLED</b></samp></span> and <span class="html"><samp><b>DISABLED</b></samp></span> commands.
The MEM state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Memory expansion is enabled</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CURMAP</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>The user map is currently selected</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>STATUS</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Status register</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>VIOL</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Violation register</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SMAP</b></samp></span> [0:31]</p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>System map registers</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>UMAP</b></samp></span> [0:31]</p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>User map registers</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>PAMAP</b></samp></span> [0:31]</p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>DCPC port A registers</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>PBMAP</b></samp></span> [0:31]</p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>DCPC port B registers</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="general-i-o-device-simulations">
<h2><span class="sectnum">1.4. </span>General I/O device simulations<a class="headerlink" href="#general-i-o-device-simulations" title="Permalink to this heading">¶</a></h2>
<p>The simulator provides these general I/O device interfaces and their associated peripherals:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#c-buffered-teleprinter-interface">12531C Buffered Teleprinter Interface</a></p></li>
<li><p><a class="reference internal" href="#c-time-base-generator">12539C Time Base Generator</a></p></li>
<li><p><a class="reference internal" href="#b-microcircuit-interface">12566B Microcircuit Interface</a></p></li>
<li><p><a class="reference internal" href="#a-002-tape-reader-interface">12597A-002 Tape Reader Interface</a></p></li>
<li><p><a class="reference internal" href="#a-005-tape-punch-interface">12597A-005 Tape Punch Interface</a></p></li>
<li><p><a class="reference internal" href="#a-12936a-privileged-interrupt-fence">12620A/12936A Privileged Interrupt Fence</a></p></li>
<li><p><a class="reference internal" href="#a-line-printer-interface">12653A Line Printer Interface</a></p></li>
<li><p><a class="reference internal" href="#c-8-channel-asynchronous-multiplexer">12792C 8-Channel Asynchronous Multiplexer</a></p></li>
<li><p><a class="reference internal" href="#b-line-printer-interface">12845B Line Printer Interface</a></p></li>
<li><p><a class="reference internal" href="#a-processor-interconnect">12875A Processor Interconnect</a></p></li>
<li><p><a class="reference internal" href="#a-asynchronous-multiplexer-interface">12920A Asynchronous Multiplexer Interface</a></p></li>
<li><p><a class="reference internal" href="#a-buffered-asynchronous-communications-interface">12966A Buffered Asynchronous Communications Interface</a></p></li>
</ul>
<section id="c-buffered-teleprinter-interface-with-one-2752-54-teleprinter">
<span id="one-2752-54-teleprinter"></span><span id="c-buffered-teleprinter-interface"></span><h3><span class="sectnum">1.4.1. </span>12531C Buffered Teleprinter Interface with One 2752/54 Teleprinter<a class="headerlink" href="#c-buffered-teleprinter-interface-with-one-2752-54-teleprinter" title="Permalink to this heading">¶</a></h3>
<p>The 12531C Buffered Teleprinter Interface connects current-loop devices,
such as the HP 2752A (ASR33) and 2754A (ASR35) teleprinters,
as well as EIA RS-232 devices,
such as the HP 2749A (ASR33) teleprinter and HP 2600 CRT terminal,
to the HP computer family.</p>
<p>This simulation provides three units.
Unit 0 reads from the teleprinter keyboard.
Unit 1 writes to the teleprinter printer.
Unit 2 writes to the teleprinter paper tape punch.
Attaching a paper tape image file to unit 2 simulates loading blank paper tape into the punch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="p">{</span><span class="o">-</span><span class="n">N</span><span class="p">}</span> <span class="n">TTY2</span> <span class="o">&lt;</span><span class="n">image</span><span class="o">-</span><span class="n">filename</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Adding the <span class="html"><samp><b>-N</b></samp></span> (new file) switch clears the contents of the image file if present.
Without the <span class="html"><samp><b>-N</b></samp></span> switch,
punch output will be appended to any preexisting image file content.
Detaching the image simulates removing the punched tape.</p>
<p>The interface may be programmed to enable printing and punching separately.
Only the HP 2754A teleprinter responds to the individual enables.
All other supported devices print if either the printer or the punch is enabled.
The TTY device simulates an HP 2754A only if the punch unit is attached.
When the unit is detached,
an HP 2752A is simulated,
which will print if either printing or punching is enabled.</p>
<p>If the host operating system returns an error when writing to the paper tape image file,
the simulator will report the error to the simulation console, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HP</span> <span class="mi">2100</span> <span class="n">simulator</span> <span class="n">teleprinter</span> <span class="n">punch</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span> <span class="n">error</span><span class="p">:</span> <span class="n">Permission</span> <span class="n">denied</span>
</pre></div>
</div>
<p>…and the simulator stops.
Simulation may be resumed and the operation retried if the problem has been corrected or with the punch operation incomplete if the problem is uncorrectable.</p>
<p>Device options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>FASTTIME</b></samp></span></p></td>
<td><p>Use optimized timing; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>REALTIME</b></samp></span></p></td>
<td><p>Use realistic timing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select code; default is 11</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device</p></td>
</tr>
</tbody>
</table>
<p>The interface supports realistic and optimized timing modes.
Realistic timing accurately models the 10 character per second print and punch rates (in machine instructions).
Optimized timing reduces operation delays to the minimums necessary to operate correctly;
this is much faster than a real teleprinter would operate.</p>
<p>The delay used by the simulator in <span class="html"><samp><b>FASTTIME</b></samp></span> mode may be set via the register interface.
The value may be adjusted as necessary to work around any HP software problems that are triggered by the unusually rapid print and punch operations.
Resetting the device with the <span class="html"><samp class="guilabel"><b>RESET -P</b></samp></span> (power-on reset) command restores the original optimized time.</p>
<p>If the TTY device disabled while the simulator is running,
the simulation console will respond only to the SCP interrupt character,
which defaults to <span class="html"><samp>CTRL+E</samp></span>.</p>
<p>Device configuration may be displayed with the following commands:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW TTY</b></samp></span></p></td>
<td><p>Display the device and unit configuration</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SHOW TTY MODE</b></samp></span></p></td>
<td><p>Display the timing mode</p></td>
</tr>
</tbody>
</table>
<p>Unit options that may be specified for the keyboard and printer are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>UC</b></samp></span></p></td>
<td><p>Upshift lowercase characters to uppercase; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>7B</b></samp></span></p></td>
<td><p>Transfer characters with the high-order bit cleared</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>7P</b></samp></span></p></td>
<td><p>Transfer characters with the high-order bit cleared, non-printing suppressed</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>8B</b></samp></span></p></td>
<td><p>Transfer characters without changing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>AUTOLF</b></samp></span></p></td>
<td><p>Enable automatic output of line-feed characters</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>NOAUTOLF</b></samp></span></p></td>
<td><p>Disable automatic output of line-feed characters; default</p></td>
</tr>
</tbody>
</table>
<p id="set-console-pchar">The printer may be set to mode <span class="html"><samp><b>UC</b></samp></span>, <span class="html"><samp><b>7B</b></samp></span>, <span class="html"><samp><b>7P</b></samp></span>, or <span class="html"><samp><b>8B</b></samp></span>.
The set of non-printing characters allowed by mode <span class="html"><samp><b>7P</b></samp></span> is configured independently by the <span class="html"><samp><b>SET CONSOLE PCHAR</b></samp></span> command as described in the <a class="reference external" href="./simh_doc.rst">SIMH Users’ Guide</a> and defaults to CR, LF, HT, BS, and BEL.
The keyboard may be set to mode <span class="html"><samp><b>UC</b></samp></span>, <span class="html"><samp><b>7B</b></samp></span>, or <span class="html"><samp><b>8B</b></samp></span>;
mode <span class="html"><samp><b>7P</b></samp></span> is not supported for input and will be changed to mode <span class="html"><samp><b>7B</b></samp></span> if specified.
The default mode is <span class="html"><samp><b>UC</b></samp></span> for both units.</p>
<p>Some HP software systems expect the console terminal to transmit line feed characters automatically following each carriage return.
As an aid to avoid typing LF characters after pressing ENTER,
the <span class="html"><samp><b>AUTOLF</b></samp></span> option may be specified for the keyboard unit.
This simulates pressing the <span class="html"><samp>AUTO LF</samp></span> latching key on an HP 264x terminal.</p>
<p>When a debug log has been established,
tracing may be configured by specifying one or more of the reporting level options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CSRW</b></samp></span></p></td>
<td><p>Interface control, status, read, and write actions</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SERV</b></samp></span></p></td>
<td><p>Printer and punch unit service events</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>PSERV</b></samp></span></p></td>
<td><p>Keyboard unit service events (periodic)</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>XFER</b></samp></span></p></td>
<td><p>Data receptions and transmissions</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>CSRW</b></samp></span> option traces control, status, read, and write commands sent to the interface.
The <span class="html"><samp><b>SERV</b></samp></span> option traces print and punch output service scheduling and entries.
The <span class="html"><samp><b>PSERV</b></samp></span> option traces keyboard poll unit service scheduling and entries.
The poll service is entered once every 10 milliseconds to poll for input characters to be received by the interface.
The <span class="html"><samp><b>XFER</b></samp></span> option traces the characters entered at the keyboard and output to the printer and punch.
The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned by the interface.</p>
<p>Examples of the trace formats follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span><span class="n">TTY</span>  <span class="n">csrw</span><span class="p">:</span> <span class="n">Control</span> <span class="ow">is</span> <span class="n">output</span> <span class="o">|</span> <span class="n">printer</span> <span class="n">enabled</span>
<span class="o">&gt;&gt;</span><span class="n">TTY</span>  <span class="n">csrw</span><span class="p">:</span> <span class="n">Output</span> <span class="n">data</span> <span class="ow">is</span> <span class="n">CR</span>
<span class="o">&gt;&gt;</span><span class="n">TTY</span>  <span class="n">csrw</span><span class="p">:</span> <span class="n">Status</span> <span class="ow">is</span> <span class="n">idle</span> <span class="o">|</span> <span class="s1">&#39;T&#39;</span>
<span class="o">&gt;&gt;</span><span class="n">TTY</span>  <span class="n">serv</span><span class="p">:</span> <span class="n">Unit</span> <span class="n">delay</span> <span class="mi">200</span> <span class="n">service</span> <span class="n">scheduled</span>
<span class="o">&gt;&gt;</span><span class="n">TTY</span>  <span class="n">serv</span><span class="p">:</span> <span class="n">Printer</span> <span class="ow">and</span> <span class="n">punch</span> <span class="n">service</span> <span class="n">entered</span>
<span class="o">&gt;&gt;</span><span class="n">TTY</span> <span class="n">pserv</span><span class="p">:</span> <span class="n">Poll</span> <span class="n">delay</span> <span class="mi">221566</span> <span class="n">service</span> <span class="n">entered</span>
<span class="o">&gt;&gt;</span><span class="n">TTY</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Character</span> <span class="s1">&#39;T&#39;</span> <span class="n">entered</span> <span class="n">at</span> <span class="n">keyboard</span>
<span class="o">&gt;&gt;</span><span class="n">TTY</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Character</span> <span class="n">CR</span> <span class="n">sent</span> <span class="n">to</span> <span class="n">printer</span>
<span class="o">&gt;&gt;</span><span class="n">TTY</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">IOI</span>
<span class="o">&gt;&gt;</span><span class="n">TTY</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">000115</span> <span class="k">with</span> <span class="n">signals</span> <span class="p">(</span><span class="n">none</span><span class="p">)</span>
<span class="o">&gt;&gt;</span><span class="n">TTY</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">ENF</span> <span class="o">|</span> <span class="n">SIR</span> <span class="o">|</span> <span class="n">IEN</span> <span class="o">|</span> <span class="n">PRH</span>
<span class="o">&gt;&gt;</span><span class="n">TTY</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">FLG</span> <span class="o">|</span> <span class="n">IRQ</span> <span class="o">|</span> <span class="n">SRQ</span>
</pre></div>
</div>
<p>The teleprinter interface state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>BUF</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>8</p></td>
<td><p>Output data buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>MODE</b></samp></span></p></td>
<td><p>3</p></td>
<td><p>2</p></td>
<td><p>Control word bits 14-12</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Control flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag buffer flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>KPOS</b></samp></span></p></td>
<td><p>32</p></td>
<td><p>10</p></td>
<td><p>Number of characters input</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>TPOS</b></samp></span></p></td>
<td><p>32</p></td>
<td><p>10</p></td>
<td><p>Number of characters printed</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>PPOS</b></samp></span></p></td>
<td><p>32</p></td>
<td><p>10</p></td>
<td><p>Position in the punch output file</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>TTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td><p>Fast print/punch time</p></td>
</tr>
</tbody>
</table>
</section>
<section id="c-time-base-generator">
<h3><span class="sectnum">1.4.2. </span>12539C Time Base Generator<a class="headerlink" href="#c-time-base-generator" title="Permalink to this heading">¶</a></h3>
<p>The HP 12539C Time Base Generator provides a programmable interval clock employed as the DOS, RTE, and TSB time-of-day and process-switching clocks.
The TBG provides programmable periods of 100 microseconds to 1000 seconds in decade increments.
Each “tick” of the clock may request an interrupt,
and a status indication is provided if the TBG ticks a second time without acknowledgement.</p>
<p>Device options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CALTIME</b></samp></span></p></td>
<td><p>Use calibrated timing; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>REALTIME</b></samp></span></p></td>
<td><p>Use realistic timing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>W1A</b></samp></span></p></td>
<td><p>Install jumper W1 in the A position; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>W1B</b></samp></span></p></td>
<td><p>Install jumper W1 in the B position</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>W2A</b></samp></span></p></td>
<td><p>Install jumper W2 in the A position; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>W2B</b></samp></span></p></td>
<td><p>Install jumper W2 in the B position</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select code; default is 13</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device</p></td>
</tr>
</tbody>
</table>
<p>Calibrated timing aligns the simulated clock periods with the clock on the host system.
When calibrated,
each of the programmable periods will elapse after the corresponding amount of host-system time.</p>
<p>When realistic timing is enabled,
the simulator models the programmable periods in terms of machine instructions executed.
Calibrated timing is required to enable CPU idling and is generally preferred when running operating systems that provide time-of-day clocks.
Realistic timing is necessary to pass the hardware diagnostic.</p>
<p>Hardware jumpers W1 and W2 may be installed in either their A or B positions.
With W1 in the A position,
lost ticks are reported in bit 4 of the status word.
In the B position,
lost ticks are reported in both bits 5 and 4.
With W2 in the A position,
the four longest intervals are 1, 10, 100, and 1000 seconds per tick.
In the B position,
these intervals are divided by 1000 and tick after 1, 10, 100, and 1000 milliseconds to facilitate testing with the diagnostic.</p>
<p>When a debug log has been established,
tracing may be configured by specifying one or more of the reporting level options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CSRW</b></samp></span></p></td>
<td><p>Interface control, status, read, and write actions</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>PSERV</b></samp></span></p></td>
<td><p>Clock unit service events (periodic)</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>CSRW</b></samp></span> option traces control, status, read, and write commands sent to the interface.
The <span class="html"><samp><b>PSERV</b></samp></span> option traces event service scheduling and entries,
which occur at a periodic rate dependent on the programmable configuration.
The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned via the interface.</p>
<p>Examples of the trace formats follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span><span class="n">TBG</span>  <span class="n">csrw</span><span class="p">:</span> <span class="n">Control</span> <span class="ow">is</span> <span class="mi">10</span> <span class="n">millisecond</span> <span class="n">rate</span>
<span class="o">&gt;&gt;</span><span class="n">TBG</span>  <span class="n">csrw</span><span class="p">:</span> <span class="n">Status</span> <span class="ow">is</span> <span class="n">lost</span> <span class="n">tick</span>
<span class="o">&gt;&gt;</span><span class="n">TBG</span> <span class="n">pserv</span><span class="p">:</span> <span class="n">Rate</span> <span class="mi">100</span> <span class="n">millisecond</span> <span class="n">delay</span> <span class="mi">157729</span> <span class="n">service</span> <span class="n">scheduled</span>
<span class="o">&gt;&gt;</span><span class="n">TBG</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">STC</span> <span class="o">|</span> <span class="n">CLF</span> <span class="o">|</span> <span class="n">SIR</span> <span class="o">|</span> <span class="n">PRH</span>
<span class="o">&gt;&gt;</span><span class="n">TBG</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">000020</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">PRL</span>
</pre></div>
</div>
<p>The Time Base Generator state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SEL</b></samp></span></p></td>
<td><p>3</p></td>
<td><p>8</p></td>
<td><p>Time base selector</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CTR</b></samp></span></p></td>
<td><p>14</p></td>
<td><p>10</p></td>
<td><p>Prescale counter for &lt; 1 Hz operation</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Control flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag buffer flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ERR</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Error flip-flop</p></td>
</tr>
</tbody>
</table>
</section>
<section id="b-microcircuit-interface">
<h3><span class="sectnum">1.4.3. </span>12566B Microcircuit Interface<a class="headerlink" href="#b-microcircuit-interface" title="Permalink to this heading">¶</a></h3>
<p>The HP 12566B Microcircuit Interface provides a general-purpose 16-bit bidirectional data path at TTL logic levels for interfacing to a variety of peripheral devices.
The card contains a 16-bit Data Output register and a 16-bit Data Input register for transfers between the CPU and the device.
A Device Command signal from the card enables the device to transfer data,
while a Device Flag signal from the device indicates transfer completion to the CPU.
The card supports skip-on-flag and interrupt I/O modes,
as well as DMA transfers up to half bandwidth (approximately 300K-400K words per second).</p>
<p>In simulation,
this interface is not connected to an associated peripheral.
Instead, it provides a configurable target for several diagnostics that test input, output, and interrupt responses.
Two identical cards are provided with device names MC1 and MC2.
They are disabled by default,
as they are only useful when running diagnostics.</p>
<p>Device options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>DEVICE</b></samp></span></p></td>
<td><p>Remove the diagnostic loopback connector; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DIAGNOSTIC</b></samp></span></p></td>
<td><p>Install the diagnostic loopback connector</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select code; defaults are 44 and 45</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device; default</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>DIAGNOSTIC</b></samp></span> option simulates the installation of the HP 1251-0332 diagnostic test (loopback) connector in place of the device cable.
It also configures hardware jumpers W1-W3 on the interface as required by the following diagnostics:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>W1</p></th>
<th class="head"><p>W2</p></th>
<th class="head"><p>W3</p></th>
<th class="head"><p>DSN</p></th>
<th class="head"><p>Diagnostic</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>C</strong></p></td>
<td><p><strong>B</strong></p></td>
<td><p><strong>B</strong></p></td>
<td><p><strong>143300</strong></p></td>
<td><p>General purpose register</p></td>
</tr>
<tr class="row-odd"><td><p><strong>C</strong></p></td>
<td><p><strong>B</strong></p></td>
<td><p><strong>B</strong></p></td>
<td><p><strong>141203</strong></p></td>
<td><p>I/O instruction group</p></td>
</tr>
<tr class="row-even"><td><p><strong>C</strong></p></td>
<td><p><strong>B</strong></p></td>
<td><p><strong>B</strong></p></td>
<td><p><strong>102103</strong></p></td>
<td><p>Memory expansion unit</p></td>
</tr>
<tr class="row-odd"><td><p><strong>C</strong></p></td>
<td><p><strong>B</strong></p></td>
<td><p><strong>B</strong></p></td>
<td><p><strong>101220</strong></p></td>
<td><p>DMA/DCPC for 2100/1000</p></td>
</tr>
<tr class="row-even"><td><p><strong>B</strong></p></td>
<td><p><strong>A</strong></p></td>
<td><p><strong>A</strong></p></td>
<td><p><strong>—</strong></p></td>
<td><p>DMA for 2100 (HP 24195)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>B</strong></p></td>
<td><p><strong>A</strong></p></td>
<td><p><strong>A</strong></p></td>
<td><p><strong>101105</strong></p></td>
<td><p>DMA for 2114/2115/2116</p></td>
</tr>
<tr class="row-even"><td><p><strong>B</strong></p></td>
<td><p><strong>C</strong></p></td>
<td><p><strong>B</strong></p></td>
<td><p><strong>—</strong></p></td>
<td><p>DMA for 2115/2116 (HP 24185)</p></td>
</tr>
</tbody>
</table>
<p>Setting the <span class="html"><samp><b>DEVICE</b></samp></span> option removes the loopback connector and leaves the device interface disconnected.</p>
<p>When a debug log has been established,
tracing may be configured by specifying one or more of the reporting level options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>XFER</b></samp></span></p></td>
<td><p>Data transmissions or receptions</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>XFER</b></samp></span> option traces the words sent or received by the interface during diagnostic operation.
The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned via the interface.</p>
<p>Examples of the trace formats follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span><span class="n">MC1</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Output</span> <span class="n">data</span> <span class="n">word</span> <span class="mi">062140</span> <span class="n">looped</span> <span class="n">back</span> <span class="n">to</span> <span class="nb">input</span>
<span class="o">&gt;&gt;</span><span class="n">MC1</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">ENF</span> <span class="o">|</span> <span class="n">SIR</span> <span class="o">|</span> <span class="n">IEN</span> <span class="o">|</span> <span class="n">PRH</span>
<span class="o">&gt;&gt;</span><span class="n">MC1</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">FLG</span> <span class="o">|</span> <span class="n">IRQ</span> <span class="o">|</span> <span class="n">SRQ</span>
<span class="o">&gt;&gt;</span><span class="n">MC2</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">IOI</span>
<span class="o">&gt;&gt;</span><span class="n">MC2</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">000145</span> <span class="k">with</span> <span class="n">signals</span> <span class="p">(</span><span class="n">none</span><span class="p">)</span>
</pre></div>
</div>
<p>The interface state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>IN</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Input data register</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>OUT</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Output data register</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Control flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag buffer flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CMD</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Command flip-flop</p></td>
</tr>
</tbody>
</table>
</section>
<section id="a-002-tape-reader-interface-with-one-2748-paper-tape-reader">
<span id="one-2748-paper-tape-reader"></span><span id="a-002-tape-reader-interface"></span><h3><span class="sectnum">1.4.4. </span>12597A-002 Tape Reader Interface with One 2748 Paper Tape Reader<a class="headerlink" href="#a-002-tape-reader-interface-with-one-2748-paper-tape-reader" title="Permalink to this heading">¶</a></h3>
<p>The 12597A-002 Tape Reader Interface is an 8-bit duplex register card that connects the HP 2748A/B Tape Reader to the HP computer family.
The 2748 is a photoreader capable of reading eight-level punched paper tapes at a rate of 500 bytes per second.</p>
<p>The 12597A interface contains nine configuration jumpers.
These are preset for proper tape reader operation.</p>
<p>The simulation provides one reader unit.
Attaching a paper tape image file to the unit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="n">PTR</span> <span class="o">&lt;</span><span class="n">image</span><span class="o">-</span><span class="n">filename</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>… simulates pressing the <span class="html"><samp><b>LOAD</b></samp></span> button on the reader’s front panel,
loading the paper tape into the reader,
and pressing the <span class="html"><samp><b>READ</b></samp></span> button.</p>
<p>The interface does not provide status to the CPU to indicate that a tape is not loaded or that the end of the tape has passed through the reader.
Attempting to read under these conditions will cause the reader to hang,
as it will in hardware.
Specifying the <span class="html"><samp><b>SET CPU STOP=IOERR</b></samp></span> command will cause a simulation stop with a <strong>No tape loaded</strong> error if either of these conditions occur.
If the error is corrected,
either by attaching the paper tape image file or by rewinding the tape,
then resuming simulation will retry the operation.</p>
<p>If the host operating system returns an error when reading from the paper tape image file,
the simulator will report the error to the simulation console, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HP</span> <span class="mi">2100</span> <span class="n">simulator</span> <span class="n">paper</span> <span class="n">tape</span> <span class="n">reader</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span> <span class="n">error</span><span class="p">:</span> <span class="n">Permission</span> <span class="n">denied</span>
</pre></div>
</div>
<p>…and the simulator stops.
Simulation may be resumed and the operation retried if the problem has been corrected or with the reader operation incomplete if the problem is uncorrectable.</p>
<p>Device options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>READER</b></samp></span></p></td>
<td><p>Use a normal paper tape; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DIAGNOSTIC</b></samp></span></p></td>
<td><p>Use a continuous paper tape loop or loopback connector</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FASTTIME</b></samp></span></p></td>
<td><p>Use optimized timing; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>REALTIME</b></samp></span></p></td>
<td><p>Use realistic timing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select code; default is 10</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device</p></td>
</tr>
</tbody>
</table>
<p>The simulator provides two diagnostic modes.
If a paper tape image file is not attached,
then the <span class="html"><samp><b>DIAGNOSTIC</b></samp></span> option simulates the installation of the HP 1251-0332 diagnostic test (loopback) connector in place of the reader cable.
This is needed to run the General Purpose Register Diagnostic (DSN 143300) as well as to serve as the standard I/O card for several other diagnostics that test interrupts.
If a file is attached,
then the <span class="html"><samp><b>DIAGNOSTIC</b></samp></span> option converts the paper tape image into a continuous loop by logically joining the ends of the tape.
This is used by the High-Speed Tape Reader/Punch Diagnostic (DSN 146200).
Setting the <span class="html"><samp><b>READER</b></samp></span> option returns the tape image to its normal linear configuration.</p>
<p>The reader supports realistic and optimized timing modes.
Realistic timing attempts to model the paper tape movement delay inherent in the physical hardware.
Optimized timing reduces the operation delay to the minimum necessary to operate correctly;
this is much faster than a real reader would operate.</p>
<p>The delay used by the simulation in <span class="html"><samp><b>FASTTIME</b></samp></span> mode may be set via the register interface.
The value may be adjusted as necessary to work around any HP software problems that are triggered by the unusually rapid reading operations.
Resetting the device with the <a class="reference internal" href="#reset-p"><span class="html"><samp class="guilabel"><b>RESET -P</b></samp></span></a> (power-on reset) command restores the original optimized time.</p>
<p>The interface supports the <span class="html"><samp><b>LOAD PTR</b></samp></span> and <span class="html"><samp><b>BOOT PTR</b></samp></span> commands to load an absolute binary paper tape image into memory.
Depending on the current CPU model,
the <span class="html"><samp><b>LOAD</b></samp></span> command copies either the Basic Binary Loader (BBL) or the 12992K boot loader ROM into memory,
configures it for the interface’s select code,
and sets the P register to the loader’s starting address.
The <span class="html"><samp><b>BOOT</b></samp></span> command performs these same actions and then presets the system and begins execution.</p>
<p>For a 2100/14/15/16 CPU containing a previously configured BBL in memory,
the commands are equivalent in hardware to setting the P register to the starting address,
pressing the <span class="html"><samp class="guilabel"><b>LOADER ENABLE</b></samp></span> button on the front panel,
and, for the <span class="html"><samp><b>BOOT</b></samp></span> command,
pressing the <span class="html"><samp class="guilabel"><b>INTERNAL PRESET</b></samp></span>, <span class="html"><samp class="guilabel"><b>EXTERNAL PRESET</b></samp></span>, and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> buttons to begin execution.
Before execution, the S register must be set as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>15</p></th>
<th class="head"><p>14</p></th>
<th class="head"><p>13</p></th>
<th class="head"><p>12</p></th>
<th class="head"><p>11</p></th>
<th class="head"><p>10</p></th>
<th class="head"><p>9</p></th>
<th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>0</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>⬤</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>⬤</p></td>
</tr>
</tbody>
</table>
<p>If bit 15 is set to 1,
the loader will compare the absolute program on tape to the contents of memory.
If bit 0 is set to 1,
the loader will verify the checksums of the absolute binary records on tape without altering memory.
If neither bit is set,
the loader will read the absolute program on the paper tape into memory.
Loader execution ends with one of the following halt instructions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 00</span></code> — a comparison error occurred; <em>A</em> = the tape value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 11</span></code> — a checksum error occurred; <em>A</em> = the tape value, <em>B</em> = the calculated value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 55</span></code> — the program load address would overlay the loader.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 77</span></code> — the end of tape was reached with a successful read.</p></li>
</ul>
<p>For a 1000 M/E/F-Series CPU,
the commands are equivalent in hardware to setting the S register to select and configure the HP 12992K boot loader ROM,
pressing the <span class="html"><samp class="guilabel"><b>IBL</b></samp></span> button to copy the ROM into memory,
and, for the <span class="html"><samp><b>BOOT</b></samp></span> command,
pressing the <span class="html"><samp class="guilabel"><b>PRESET</b></samp></span> and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> buttons to begin execution.
The S register is preset as follows:</p>
<table class="bitmask-layout docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>15</p></th>
<th class="head"><p>14</p></th>
<th class="head"><p>13</p></th>
<th class="head"><p>12</p></th>
<th class="head"><p>11</p></th>
<th class="head"><p>10</p></th>
<th class="head"><p>9</p></th>
<th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>0</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td colspan="6"><p>PTR select code</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<p>Loader execution ends with one of the following halt instructions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 11</span></code> — a checksum error occurred; <em>A</em> = the calculated value, <em>B</em> = the tape value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 55</span></code> — the load address would overlay the ROM loader.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 77</span></code> — the end of tape was reached with a successful read.</p></li>
</ul>
<p>When a debug log has been established,
tracing may be configured by specifying one or more of the reporting level options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SERV</b></samp></span></p></td>
<td><p>Reader unit service events</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>XFER</b></samp></span></p></td>
<td><p>Data bytes read from the tape</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>SERV</b></samp></span> option traces reader event service scheduling and entries.
The <span class="html"><samp><b>XFER</b></samp></span> option traces the bytes received from the reader.
The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned via the interface.</p>
<p>Examples of the trace formats follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span><span class="n">PTR</span>  <span class="n">serv</span><span class="p">:</span> <span class="n">Unit</span> <span class="n">delay</span> <span class="mi">3155</span> <span class="n">service</span> <span class="n">scheduled</span>
<span class="o">&gt;&gt;</span><span class="n">PTR</span>  <span class="n">serv</span><span class="p">:</span> <span class="n">Reader</span> <span class="n">service</span> <span class="n">entered</span>
<span class="o">&gt;&gt;</span><span class="n">PTR</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Data</span> <span class="mi">145</span> <span class="n">character</span> <span class="s1">&#39;e&#39;</span> <span class="n">received</span> <span class="kn">from</span> <span class="nn">reader</span>
<span class="o">&gt;&gt;</span><span class="n">PTR</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">ENF</span> <span class="o">|</span> <span class="n">SIR</span> <span class="o">|</span> <span class="n">IEN</span> <span class="o">|</span> <span class="n">PRH</span>
<span class="o">&gt;&gt;</span><span class="n">PTR</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">FLG</span> <span class="o">|</span> <span class="n">IRQ</span> <span class="o">|</span> <span class="n">SRQ</span>
<span class="o">&gt;&gt;</span><span class="n">PTR</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">IOI</span>
<span class="o">&gt;&gt;</span><span class="n">PTR</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">000145</span> <span class="k">with</span> <span class="n">signals</span> <span class="p">(</span><span class="n">none</span><span class="p">)</span>
</pre></div>
</div>
<p>The paper tape reader state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>BUF</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>8</p></td>
<td><p>Input data buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Control flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag buffer flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>TRLLIM</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>10</p></td>
<td><p>Trailing feed frame limit</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>POS</b></samp></span></p></td>
<td><p>32</p></td>
<td><p>10</p></td>
<td><p>Paper tape image file position</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>TIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td><p>Fast read time</p></td>
</tr>
</tbody>
</table>
<p id="pos"><span id="trllim"></span>The <span class="html"><samp><b>TRLLIM</b></samp></span> register specifies the number of feed frames (zero bytes) to supply as paper tape trailer when the end of the tape image file is reached;
the default is 40 frames.
If input is attempted when <span class="html"><samp><b>TRLLIM</b></samp></span> is set to zero or the count is exhausted,
the reader will hang.
The <span class="html"><samp><b>POS</b></samp></span> register specifies the current file position of the next data byte to read.
Setting <span class="html"><samp><b>POS</b></samp></span> to 0 rewinds the attached tape.</p>
</section>
<section id="a-005-tape-punch-interface-with-one-2895-paper-tape-punch">
<span id="one-2895-paper-tape-punch"></span><span id="a-005-tape-punch-interface"></span><h3><span class="sectnum">1.4.5. </span>12597A-005 Tape Punch Interface with One 2895 Paper Tape Punch<a class="headerlink" href="#a-005-tape-punch-interface-with-one-2895-paper-tape-punch" title="Permalink to this heading">¶</a></h3>
<p>The 12597A-005 Tape Punch Interface is an 8-bit duplex register card that connects the HP 2895A/B Tape Punch to the HP computer family.
The 2895 is an eight-level paper tape punch capable of punching at a rate of 75 bytes per second.</p>
<p>The 12597A interface contains nine configuration jumpers.
These are preset for proper tape punch operation.</p>
<p>The simulation provides one punch unit.
Attaching a paper tape image file to the unit simulates loading blank paper tape into the punch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="p">{</span><span class="o">-</span><span class="n">N</span><span class="p">}</span> <span class="n">PTP</span> <span class="o">&lt;</span><span class="n">image</span><span class="o">-</span><span class="n">filename</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Adding the <span class="html"><samp><b>-N</b></samp></span> (new file) switch clears the contents of the image file if present.
Without the <span class="html"><samp><b>-N</b></samp></span> switch,
punch output will be appended to any preexisting image file content.
Detaching the image simulates removing the punched tape.</p>
<p>If the host operating system returns an error when writing to the paper tape image file,
the simulator will report the error to the simulation console, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HP</span> <span class="mi">2100</span> <span class="n">simulator</span> <span class="n">paper</span> <span class="n">tape</span> <span class="n">punch</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span> <span class="n">error</span><span class="p">:</span> <span class="n">No</span> <span class="n">space</span> <span class="n">left</span> <span class="n">on</span> <span class="n">device</span>
</pre></div>
</div>
<p>…and the simulator stops.
Simulation may be resumed and the operation retried if the problem has been corrected or with the punch operation incomplete if the problem is uncorrectable.</p>
<p>Device options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>PUNCH</b></samp></span></p></td>
<td><p>Connect to the paper tape punch; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DIAGNOSTIC</b></samp></span></p></td>
<td><p>Use a loopback connector</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FASTTIME</b></samp></span></p></td>
<td><p>Use optimized timing; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>REALTIME</b></samp></span></p></td>
<td><p>Use realistic timing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select code; default is 12</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device</p></td>
</tr>
</tbody>
</table>
<p>Setting the <span class="html"><samp><b>DIAGNOSTIC</b></samp></span> option simulates the installation of the HP 1251-0332 diagnostic test (loopback) connector in place of the punch cable.
This is needed to run the General Purpose Register Diagnostic (DSN 143300) as well as to serve as the standard I/O card for several other diagnostics that test interrupts.
Setting the <span class="html"><samp><b>PUNCH</b></samp></span> option reinstalls the standard punch cable.</p>
<p>The punch supports realistic and optimized timing modes.
Realistic timing attempts to model the punch and tape advance delays inherent in the physical hardware.
Optimized timing reduces the operation delays to the minimums necessary to operate correctly;
this is much faster than a real punch would operate.</p>
<p>The delay used by the simulation in <span class="html"><samp><b>FASTTIME</b></samp></span> mode may be set via the register interface.
The value may be adjusted as necessary to work around any HP software problems that are triggered by the unusually rapid punching operations.
Resetting the device with the <a class="reference internal" href="#reset-p"><span class="html"><samp class="guilabel"><b>RESET -P</b></samp></span></a> (power-on reset) command restores the original optimized time.</p>
<p>When a debug log has been established,
tracing may be configured by specifying one or more of the reporting level options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CSRW</b></samp></span></p></td>
<td><p>Interface control, status, read, and write actions</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SERV</b></samp></span></p></td>
<td><p>Punch unit service events</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>XFER</b></samp></span></p></td>
<td><p>Data bytes written to the tape</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>CSRW</b></samp></span> option traces control, status, read, and write commands sent to the interface.
The <span class="html"><samp><b>SERV</b></samp></span> option traces punch event service scheduling and entries.
The <span class="html"><samp><b>XFER</b></samp></span> option traces the bytes sent to the punch.
The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned via the interface.</p>
<p>Examples of the trace formats follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span><span class="n">PTP</span>  <span class="n">csrw</span><span class="p">:</span> <span class="n">Status</span> <span class="ow">is</span> <span class="n">tape</span> <span class="n">low</span>
<span class="o">&gt;&gt;</span><span class="n">PTP</span>  <span class="n">serv</span><span class="p">:</span> <span class="n">Unit</span> <span class="n">delay</span> <span class="mi">20978</span> <span class="n">service</span> <span class="n">scheduled</span>
<span class="o">&gt;&gt;</span><span class="n">PTP</span>  <span class="n">serv</span><span class="p">:</span> <span class="n">Punch</span> <span class="n">service</span> <span class="n">entered</span>
<span class="o">&gt;&gt;</span><span class="n">PTP</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Data</span> <span class="mi">045</span> <span class="n">character</span> <span class="s1">&#39;%&#39;</span> <span class="n">sent</span> <span class="n">to</span> <span class="n">punch</span>
<span class="o">&gt;&gt;</span><span class="n">PTP</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000045</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">IOO</span>
<span class="o">&gt;&gt;</span><span class="n">PTP</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="p">(</span><span class="n">none</span><span class="p">)</span>
<span class="o">&gt;&gt;</span><span class="n">PTP</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">STC</span> <span class="o">|</span> <span class="n">CLF</span> <span class="o">|</span> <span class="n">SIR</span>
<span class="o">&gt;&gt;</span><span class="n">PTP</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="p">(</span><span class="n">none</span><span class="p">)</span>
</pre></div>
</div>
<p>The paper tape punch state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>BUF</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>8</p></td>
<td><p>Output data buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Control flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag buffer flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>POS</b></samp></span></p></td>
<td><p>32</p></td>
<td><p>10</p></td>
<td><p>Paper tape image file position</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>TIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td><p>Fast punch time</p></td>
</tr>
</tbody>
</table>
</section>
<section id="a-12936a-privileged-interrupt-fence">
<h3><span class="sectnum">1.4.6. </span>12620A/12936A Privileged Interrupt Fence<a class="headerlink" href="#a-12936a-privileged-interrupt-fence" title="Permalink to this heading">¶</a></h3>
<p>The Privileged Interrupt Fence (PIF) is used in DOS and RTE systems to provide privileged interrupt capability.
The PIF is installed in the I/O backplane to separate privileged from unprivileged devices by controlling the interrupt priority chain signal (PRL) to lower-priority devices.
The privileged cards located below the fence are allowed to interrupt the operating system and the service routines of the unprivileged cards located above the fence.
Privileged devices employ specially written device drivers that bypass the operating system during interrupts.
This provides very fast interrupt service time.</p>
<p>HP produced two PIF cards:
the 12620A Breadboard Interface for the RTE operating systems,
and the 12936A Privileged Interrupt Fence Accessory for DOS.
They behave quite differently and are not interchangeable.</p>
<p>Device options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>12620A</b></samp></span></p></td>
<td><p>Use a 12620A RTE fence; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>12936A</b></samp></span></p></td>
<td><p>Use a 12936A DOS fence</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select code; default is 37</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DEBUG=</b><var>option</var></samp></span></p></td>
<td><p>Enable tracing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NODEBUG</b></samp></span></p></td>
<td><p>Disable tracing; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device</p></td>
</tr>
</tbody>
</table>
<p>Device configuration may be displayed with the following commands:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW PIF TYPE</b></samp></span></p></td>
<td><p>Display the current fence type</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SHOW PIF DEBUG</b></samp></span></p></td>
<td><p>Display the current debug state</p></td>
</tr>
</tbody>
</table>
<p>When a debug log has been established,
tracing may be configured by specifying one or more of the reporting level options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CMD</b></samp></span></p></td>
<td><p>Interface commands</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>CMD</b></samp></span> option traces commands executed by the interface.
The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned via the interface.</p>
<p>Examples of the trace formats follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span><span class="n">PIF</span>   <span class="n">cmd</span><span class="p">:</span> <span class="n">Control</span> <span class="n">reset</span>
<span class="o">&gt;&gt;</span><span class="n">PIF</span>   <span class="n">cmd</span><span class="p">:</span> <span class="n">Fence</span> <span class="n">allows</span> <span class="n">lower</span><span class="o">-</span><span class="n">priority</span> <span class="n">interrupts</span>
<span class="o">&gt;&gt;</span><span class="n">PIF</span>   <span class="n">cmd</span><span class="p">:</span> <span class="n">Fence</span> <span class="n">inhibits</span> <span class="n">lower</span><span class="o">-</span><span class="n">priority</span> <span class="n">interrupts</span>
<span class="o">&gt;&gt;</span><span class="n">PIF</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">SFS</span> <span class="o">|</span> <span class="n">PRH</span>
<span class="o">&gt;&gt;</span><span class="n">PIF</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">SKF</span> <span class="o">|</span> <span class="n">PRL</span>
</pre></div>
</div>
<p>Because the PIF is accessed twice for each unprivileged interrupt,
systems employing the <a class="reference internal" href="#c-time-base-generator">12539C Time Base Generator</a> will generate a large number of debug statements very quickly.
In such cases,
tracing should be enabled for the minimum time necessary.</p>
<p>The Privileged Interrupt Fence state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Control flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag buffer flip-flop</p></td>
</tr>
</tbody>
</table>
</section>
<section id="a-line-printer-interface-with-one-2767-line-printer">
<span id="one-2767-line-printer"></span><span id="a-line-printer-interface"></span><h3><span class="sectnum">1.4.7. </span>12653A Line Printer Interface with One 2767 Line Printer<a class="headerlink" href="#a-line-printer-interface-with-one-2767-line-printer" title="Permalink to this heading">¶</a></h3>
<p>The HP 12653A Line Printer Interface connects the HP 2767A line printer to the HP computer family.
The printer provides 80-column output at rates from 356 to 1110 lines per minute,
depending on the number of columns printed.
It uses a 64-character repertoire (ASCII codes 32 through 95),
prints a fixed 60 lines per page,
and automatically skips page perforations.
It does not have a vertical format unit (VFU) but will slew to the top-of-form upon receipt of a form-feed character.</p>
<p>The simulation provides one printer unit.
Attaching a text file to the unit simulates loading paper into the printer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="p">{</span><span class="o">-</span><span class="n">N</span><span class="p">}</span> <span class="n">LPS</span> <span class="o">&lt;</span><span class="n">image</span><span class="o">-</span><span class="n">filename</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Adding the <span class="html"><samp><b>-N</b></samp></span> (new file) switch clears the contents of the image file if present.
Without the <span class="html"><samp><b>-N</b></samp></span> switch,
printer output will be appended to any preexisting image file content.</p>
<p>Printer output written to the image file is typically buffered by the host operating system’s underlying stream I/O routines.
While it is running,
the simulator flushes the file after each printer top-of-form request to permit convenient inspection of the image file.
Stopping the simulator also flushes the file.</p>
<p>If the host operating system returns an error when writing to the printer image file,
the simulator will report the error to the simulation console, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HP</span> <span class="mi">2100</span> <span class="n">simulator</span> <span class="n">printer</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span> <span class="n">error</span><span class="p">:</span> <span class="n">No</span> <span class="n">space</span> <span class="n">left</span> <span class="n">on</span> <span class="n">device</span>
</pre></div>
</div>
<p>The printer goes offline,
and the simulator stops.
Simulation may then be resumed,
either with the printer set back online if the problem is fixed,
or with the printer remaining offline if the problem is uncorrectable.</p>
<p>Device and unit options include configuring the printer type and timing,
turning the printer power off and on,
and the ability to set the printer offline or online.
The command forms are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">LPS</span> <span class="o">&lt;</span><span class="n">device</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
<span class="n">SET</span> <span class="n">LPS</span> <span class="o">&lt;</span><span class="n">unit</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Device options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>FASTTIME</b></samp></span></p></td>
<td><p>Use optimized timing; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>REALTIME</b></samp></span></p></td>
<td><p>Use realistic timing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>PRINTER</b></samp></span></p></td>
<td><p>Install the standard printer cable; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DIAGNOSTIC</b></samp></span></p></td>
<td><p>Install the diagnostic loopback connector</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select code; default is 14</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DEBUG=</b><var>option</var></samp></span></p></td>
<td><p>Enable tracing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NODEBUG</b></samp></span></p></td>
<td><p>Disable tracing; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device; default</p></td>
</tr>
</tbody>
</table>
<p>The printer supports realistic and optimized timing modes.
Realistic timing attempts to model the print buffer load and print-and-space operation delays inherent in the physical hardware.
For example,
output of lines with more characters takes longer than output of lines with fewer characters,
and spacing six lines takes approximately six times longer than spacing one line.</p>
<p>Optimized timing reduces operation delays to the minimums necessary to operate correctly;
this is much faster than a real line printer would operate.</p>
<p>The delays used by the simulation in <span class="html"><samp><b>FASTTIME</b></samp></span> mode may be set via the register interface.
The values may be adjusted as necessary to work around any HP software problems that are triggered by the unusually rapid print operations.
Resetting the device with the <a class="reference internal" href="#reset-p"><span class="html"><samp class="guilabel"><b>RESET -P</b></samp></span></a> (power-on reset) command restores the original optimized times.</p>
<p>The <span class="html"><samp><b>DIAGNOSTIC</b></samp></span> option simulates the installation of the HP 1251-0332 diagnostic test (loopback) connector in place of the printer cable.
This is needed to run the General Purpose Register Diagnostic (DSN 143300) as well as to serve as the standard I/O card for several other diagnostics that test interrupts.</p>
<p>Setting the <span class="html"><samp><b>PRINTER</b></samp></span> option reinstalls the standard printer cable.</p>
<p>Device configuration may be displayed with the following commands:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW LPS</b></samp></span></p></td>
<td><p>Display the device and unit configuration</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SHOW LPS TIMING</b></samp></span></p></td>
<td><p>Display the timing mode</p></td>
</tr>
</tbody>
</table>
<p>Unit options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>OFFLINE</b></samp></span></p></td>
<td><p>Set the printer offline; default when detached</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ONLINE</b></samp></span></p></td>
<td><p>Set the printer online; default when attached</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>POWEROFF</b></samp></span></p></td>
<td><p>Turn the printer power off</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>POWERON</b></samp></span></p></td>
<td><p>Turn the printer power on; default</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>OFFLINE</b></samp></span> and <span class="html"><samp><b>ONLINE</b></samp></span> options place the printer offline and online,
respectively.
The former provides a convenient method of setting the printer “down” without detaching the associated output file.</p>
<p>Entering the <span class="html"><samp><b>SET LPS POWEROFF</b></samp></span> command simulates removing power from the line printer.
A <span class="html"><samp><b>SET LPS POWERON</b></samp></span> command restores power to the printer.</p>
<p>When a debug log has been established,
tracing may be configured by specifying one or more of the reporting level options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CMDS</b></samp></span></p></td>
<td><p>Command initiations and completions</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CPU</b></samp></span></p></td>
<td><p>Words received from and sent to the CPU</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>XFER</b></samp></span></p></td>
<td><p>Data receptions and transmissions</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>STATE</b></samp></span></p></td>
<td><p>Printer state transitions</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>CMDS</b></samp></span> option traces the commands executed by the printer.
The <span class="html"><samp><b>CPU</b></samp></span> option traces words received from (control and write data) and sent to (status and read data) the CPU.
The <span class="html"><samp><b>XFER</b></samp></span> option traces the characters sent to the printer.
The <span class="html"><samp><b>STATE</b></samp></span> option traces printer state changes.
The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned via the interface.</p>
<p>Examples of the trace formats follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span><span class="n">LPS</span>  <span class="n">cmds</span><span class="p">:</span> <span class="n">Character</span> <span class="s1">&#39;M&#39;</span> <span class="n">scheduled</span> <span class="k">for</span> <span class="n">line</span> <span class="mi">6</span><span class="p">,</span> <span class="n">column</span> <span class="mi">20</span><span class="p">,</span> <span class="n">time</span> <span class="o">=</span> <span class="mi">13825</span>
<span class="o">&gt;&gt;</span><span class="n">LPS</span>  <span class="n">cmds</span><span class="p">:</span> <span class="n">Character</span> <span class="n">CR</span> <span class="n">scheduled</span> <span class="k">for</span> <span class="n">line</span> <span class="mi">6</span><span class="p">,</span> <span class="n">column</span> <span class="mi">81</span><span class="p">,</span> <span class="n">time</span> <span class="o">=</span> <span class="mi">0</span>
<span class="o">&gt;&gt;</span><span class="n">LPS</span>   <span class="n">cpu</span><span class="p">:</span> <span class="n">Control</span> <span class="mi">000015</span> <span class="p">(</span><span class="n">CR</span><span class="p">)</span> <span class="n">output</span>
<span class="o">&gt;&gt;</span><span class="n">LPS</span>   <span class="n">cpu</span><span class="p">:</span> <span class="n">Status</span> <span class="mi">100001</span> <span class="n">returned</span>
<span class="o">&gt;&gt;</span><span class="n">LPS</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Character</span> <span class="s1">&#39;D&#39;</span> <span class="n">printed</span>
<span class="o">&gt;&gt;</span><span class="n">LPS</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Character</span> <span class="n">ETX</span> <span class="n">erased</span>
<span class="o">&gt;&gt;</span><span class="n">LPS</span> <span class="n">state</span><span class="p">:</span> <span class="n">Power</span> <span class="n">state</span> <span class="ow">is</span> <span class="n">OFF</span>
<span class="o">&gt;&gt;</span><span class="n">LPS</span> <span class="n">state</span><span class="p">:</span> <span class="n">Power</span> <span class="n">state</span> <span class="ow">is</span> <span class="n">TURNING</span> <span class="n">ON</span><span class="p">,</span> <span class="n">scheduled</span> <span class="n">time</span> <span class="o">=</span> <span class="mi">39500</span>
<span class="o">&gt;&gt;</span><span class="n">LPS</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">CLC</span> <span class="o">|</span> <span class="n">CLF</span> <span class="o">|</span> <span class="n">SIR</span> <span class="o">|</span> <span class="n">PRH</span>
<span class="o">&gt;&gt;</span><span class="n">LPS</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">PRL</span>
</pre></div>
</div>
<p>The Line Printer Controller state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Symbolic</p></th>
<th class="head"><p>Read-only</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>BUF</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td></td>
<td><p>Output buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>STA</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td></td>
<td><p>Printer status</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>POWER</b></samp></span></p></td>
<td><p>2</p></td>
<td><p>8</p></td>
<td></td>
<td><p>✓</p></td>
<td><p>Printer power state</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td></td>
<td><p>Control flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td></td>
<td><p>Flag buffer flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CCNT</b></samp></span></p></td>
<td><p>7</p></td>
<td><p>10</p></td>
<td></td>
<td></td>
<td><p>Current character count</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>LCNT</b></samp></span></p></td>
<td><p>7</p></td>
<td><p>10</p></td>
<td></td>
<td></td>
<td><p>Current line count</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>POS</b></samp></span></p></td>
<td><p>32</p></td>
<td><p>10</p></td>
<td></td>
<td></td>
<td><p>Printer file position</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td></td>
<td></td>
<td><p>Character transfer time</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>PTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td></td>
<td></td>
<td><p>Per-zone print operation time</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>STIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td></td>
<td></td>
<td><p>Per-line paper slew time</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>RTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td></td>
<td></td>
<td><p>Power-on ready delay time</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>BUF</b></samp></span> register may be displayed in character format,
if desired.
Symbolic entry is also supported.</p>
</section>
<section id="c-8-channel-asynchronous-multiplexer">
<h3><span class="sectnum">1.4.8. </span>12792C 8-Channel Asynchronous Multiplexer<a class="headerlink" href="#c-8-channel-asynchronous-multiplexer" title="Permalink to this heading">¶</a></h3>
<p>The 12792C is an eight-channel asynchronous serial multiplexer that connects terminals,
modems,
serial line printers,
and “black box” devices that use the RS-232 standard to the CPU.
It uses an on-board Z80 microprocessor and provides input and output buffering to support block-mode reads from HP 264x and 262x terminals at speeds up to 19.2K baud.
The interface handles character editing,
echoing,
ENQ/ACK handshaking,
and read terminator detection,
substantially reducing the load on the CPU over the earlier 12920A multiplexer.</p>
<p>There are four major revisions to the multiplexer firmware,
designated revisions A-D.
Revisions A-C have an upward-compatible command set and are supported under RTE-M,
RTE-IVB,
and RTE-6/VM.
Revision D implements completely different commands,
requires different RTE drivers,
and is supported only under RTE-6/VM.
This simulation implements revision C.</p>
<p>Revisions B and C added support for the 37214A Systems Modem subsystem and the RTE-A Virtual Control Panel (VCP),
as the same firmware was used in the A-Series version of the multiplexer,
the HP 12040B/C.
Under simulation,
the modem commands return status codes indicating that no modems are present,
and the VCP commands are not implemented.</p>
<p>After pressing the CPU front-panel <span class="html"><samp class="guilabel"><b>PRESET</b></samp></span> button or executing a CLC 0 instruction,
the multiplexer enters “echoplex” mode.
In this mode,
each channel defaults to 9600 baud,
8 bits per character,
1 stop bit,
no parity,
and echoes characters as they are received.
Echoplex is implemented under simulation —
until a channel is configured by the appropriate RTE driver control call,
characters entered in a Telnet session will be echoed.</p>
<p>The 12792C has two baud-rate generators that are assigned to channels by the wiring configuration in the I/O cable connector hood.
Two counter/timer circuits on the interface are used to implement the BRGs for all eight channels.
For channels connected to the same BRG,
only subsets of the configurable rates are allowed,
and assigning mutually incompatible rates causes corruption of the rates on channels assigned earlier.
Under simulation,
any baud rate may be assigned to any channel without interaction.</p>
<p>While the multiplexer can connect to generic Telnet clients,
RTE programs generally assumed the use of HP terminals.</p>
<p id="attach">Under simulation,
the multiplexer performs input and output through Telnet sessions connected to a user-specified port or through individually specified host serial ports.
It supports concurrent Telnet and serial connections.
The <span class="html"><samp><b>ATTACH</b></samp></span> command specifies the local port to be used for Telnet connections:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="n">MPX</span> <span class="o">&lt;</span><span class="n">port</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>…where <code class="docutils literal notranslate"><span class="pre">port</span></code> is a decimal number between 1 and 65535 that is not being used for other TCP/IP activities.
When the multiplexer is attached and the simulator is running,
the multiplexer listens for connections on the specified port and assigns them to channels in ascending numeric order,
unless an alternate connection order has been specified.</p>
<p>The <span class="html"><samp><b>ATTACH</b></samp></span> command is also used to specify the host serial port for individual multiplexer channels:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="p">{</span><span class="o">-</span><span class="n">V</span><span class="p">}</span> <span class="n">MPX</span> <span class="n">LINE</span><span class="o">=&lt;</span><span class="n">line</span><span class="o">&gt;</span><span class="p">,</span><span class="n">CONNECT</span><span class="o">=&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="p">{;</span><span class="o">&lt;</span><span class="n">rate</span><span class="o">&gt;-&lt;</span><span class="n">size</span><span class="o">&gt;&lt;</span><span class="n">parity</span><span class="o">&gt;&lt;</span><span class="n">stopbits</span><span class="o">&gt;</span><span class="p">}</span>
</pre></div>
</div>
<p>…where <code class="docutils literal notranslate"><span class="pre">line</span></code> is the multiplexer channel number from 0-7,
and <code class="docutils literal notranslate"><span class="pre">name</span></code> is the host name of the serial port to use
(e.g., <em>ser0</em> or <em>COM1</em>).
If the <span class="html"><samp><b>-V</b></samp></span> (verbose) option is included,
a connection confirmation message will be output to the port.</p>
<p>An optional serial port configuration string may be supplied after the host name.
The required values are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rate</span></code> is the baud rate in bits per second.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">size</span></code> is the character size in bits including the parity bit, if designated.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parity</span></code> designates the parity to use: <em>N</em> (no), <em>E</em> (even), <em>O</em> (odd), <em>M</em> (mark), or <em>S</em> (space).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stopbits</span></code> is the number of stop bits (<em>1</em>, <em>1.5</em>, or <em>2</em>).</p></li>
</ul>
<p>Serial connections default to 9600 baud,
8-bit characters,
no parity,
and one stop bit.</p>
<p>Configuration options are available for the device and for the individual units.
The command forms are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">MPX</span> <span class="o">&lt;</span><span class="n">device</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
<span class="n">SET</span> <span class="n">MPXn</span> <span class="o">&lt;</span><span class="n">unit</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
</pre></div>
</div>
<section id="device-options">
<h4><span class="sectnum">1.4.8.1. </span>Device options<a class="headerlink" href="#device-options" title="Permalink to this heading">¶</a></h4>
<p>Device options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>LINEORDER=</b><var>c1</var>[<b>;</b><var>c2</var>...]</samp></span></p></td>
<td><p>Set the channel connection order</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DISCONNECT=</b><var>chan</var></samp></span></p></td>
<td><p>Disconnect the specified channel</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select code; default is 36</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DEBUG=</b><var>option</var></samp></span></p></td>
<td><p>Enable tracing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NODEBUG</b></samp></span></p></td>
<td><p>Disable tracing; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>LINEORDER</b></samp></span> option specifies the order in which new connections are assigned to multiplexer channels.
The arguments may be single channel numbers or ranges of channel numbers of the form <span class="html"><samp><var>m</var><b>-</b><var>n</var></samp></span>.
Telnet connections to the listening port will be assigned to multiplexer channels in the sequence specified.
In the absence of a <span class="html"><samp><b>SET MPX LINEORDER</b></samp></span> command,
connections will be assigned by default in ascending channel order.
The default order may be reestablished by specifying the command <span class="html"><samp><b>SET MPX LINEORDER=ALL</b></samp></span>.</p>
<p>A channel may be manually disconnected from its associated Telnet session with the <span class="html"><samp><b>SET MPX DISCONNECT=</b><var>chan</var></samp></span> command.
Otherwise,
the connection will remain open until disconnected either by the Telnet client or a <span class="html"><samp><b>DETACH MPX</b></samp></span> command.
For a serial connection,
the command will drop and then raise the Data Terminal Ready line;
to disconnect the serial port,
include the <span class="html"><samp><b>-C</b></samp></span> switch in the command.</p>
</section>
<section id="unit-options">
<h4><span class="sectnum">1.4.8.2. </span>Unit options<a class="headerlink" href="#unit-options" title="Permalink to this heading">¶</a></h4>
<p>Unit options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>FASTTIME</b></samp></span></p></td>
<td><p>Use optimized timing; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>REALTIME</b></samp></span></p></td>
<td><p>Use realistic timing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CAPSLOCK</b></samp></span></p></td>
<td><p>Upshift lowercase input characters to uppercase</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>NOCAPSLOCK</b></samp></span></p></td>
<td><p>Input characters are unchanged; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>LOG=</b><var>filename</var></samp></span></p></td>
<td><p>Enable I/O logging</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>NOLOG</b></samp></span></p></td>
<td><p>Disable I/O logging; default</p></td>
</tr>
</tbody>
</table>
<p>The 12792C supports twelve programmable baud rates from 50 to 19200 baud.
When realistic timing is enabled,
the simulation accurately models the transmission and reception baud rates
(in machine instructions).
For example,
setting the interface to 1200 baud will take twice as long to output a given listing as setting the interface to 2400 baud.
Optimized timing reduces the timing to the minimum necessary to operate correctly;
this is much faster than a real multiplexer would operate.</p>
<p>Setting the multiplexer to fast timing also enables three optimizations.
First, buffered characters are transferred via Telnet in blocks,
rather than one character at a time.
Second, ENQ/ACK handshaking is done locally,
without involving the Telnet client.
Third, when editing and echo is enabled,
entering BS echoes a backspace,
a space,
and a backspace,
and entering DEL echoes a backslash,
a carriage return,
and a line feed,
providing better compatibility with prior RTE terminal drivers.</p>
<p>Many HP operating systems require command input in uppercase,
although mixed-case output is supported.
As an aid to avoid toggling the host keyboard in and out of CAPS LOCK mode,
the multiplexer provides this function locally.
The default mode is <span class="html"><samp><b>NOCAPSLOCK</b></samp></span>.</p>
<p>Each multiplexer channel supports independent I/O logging to a file.
Disabling logging also closes the log file.</p>
<p>The device configuration may be displayed with the following commands:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW MPX</b></samp></span></p></td>
<td><p>Display the device configuration</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SHOW MPX LINEORDER</b></samp></span></p></td>
<td><p>Display the channel connection order</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW MPX CONNECTIONS</b></samp></span></p></td>
<td><p>Display the channel connections</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SHOW MPX STATISTICS</b></samp></span></p></td>
<td><p>Display the channel I/O statistics for the active connections</p></td>
</tr>
</tbody>
</table>
<p>The unit configuration may be displayed with the following commands:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW MPX</b><var>n</var></samp></span></p></td>
<td><p>Display the selected channel’s configuration</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SHOW MPX</b><var>n</var> <b>LOG</b></samp></span></p></td>
<td><p>Display the selected channel’s logging status</p></td>
</tr>
</tbody>
</table>
</section>
<section id="tracing-and-registers">
<h4><span class="sectnum">1.4.8.3. </span>Tracing and registers<a class="headerlink" href="#tracing-and-registers" title="Permalink to this heading">¶</a></h4>
<p>When a debug log has been established,
tracing may be configured by specifying one or more of the reporting level options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CMDS</b></samp></span></p></td>
<td><p>Command initiations and completions</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CPU</b></samp></span></p></td>
<td><p>Words received from and sent to the CPU</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>BUF</b></samp></span></p></td>
<td><p>Data read from and written to the channel buffers</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>XFER</b></samp></span></p></td>
<td><p>Data receptions and transmissions</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>CMDS</b></samp></span> option traces the commands executed by the multiplexer.
The <span class="html"><samp><b>CPU</b></samp></span> option traces words received from (control and write data) and sent to (status and read data) the CPU.
The <span class="html"><samp><b>BUF</b></samp></span> option traces reads and writes from the internal channel buffers.
The <span class="html"><samp><b>XFER</b></samp></span> option traces the characters sent and received from the multiplexer channels.
The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned via the interface.</p>
<p>Examples of the trace formats follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span><span class="n">MPX</span>  <span class="n">cmds</span><span class="p">:</span> <span class="p">[</span><span class="n">OTx</span><span class="p">]</span> <span class="n">Command</span> <span class="mi">037</span> <span class="n">parameter</span> <span class="mi">100000</span> <span class="n">scheduled</span><span class="p">,</span> <span class="n">time</span> <span class="o">=</span> <span class="mi">1250</span>
<span class="o">&gt;&gt;</span><span class="n">MPX</span>   <span class="n">cpu</span><span class="p">:</span> <span class="p">[</span><span class="n">Lix</span><span class="p">,</span><span class="n">C</span><span class="p">]</span> <span class="n">Status</span> <span class="o">=</span> <span class="mi">102000</span>
<span class="o">&gt;&gt;</span><span class="n">MPX</span>   <span class="n">buf</span><span class="p">:</span> <span class="n">Port</span> <span class="mi">2</span> <span class="n">character</span> <span class="s1">&#39;A&#39;</span> <span class="n">get</span> <span class="kn">from</span> <span class="nn">read</span> <span class="n">buffer</span> <span class="p">[</span><span class="mi">73</span><span class="p">]</span>
<span class="o">&gt;&gt;</span><span class="n">MPX</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Port</span> <span class="mi">0</span> <span class="n">character</span> <span class="n">LF</span> <span class="n">transmitted</span>
<span class="o">&gt;&gt;</span><span class="n">MPX</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">STF</span> <span class="o">|</span> <span class="n">PRH</span>
</pre></div>
</div>
<p>The multiplexer state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Symbolic</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>STATE</b></samp></span></p></td>
<td><p>3</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Controller state</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>IBUF</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td><p>Input buffer (from multiplexer to CPU)</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>OBUF</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td><p>Output buffer (from CPU to multiplexer)</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CMD</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Command code</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>PARAM</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Command parameter</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>PORT</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Port number for last command</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>PORTKEY</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Port key for last command</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>IOLEN</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>10</p></td>
<td></td>
<td><p>I/O transfer length for last command</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>UIEN</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Unsolicited interrupts enabled</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>UIPORT</b></samp></span></p></td>
<td><p>3</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Unsolicited interrupt port</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>UICODE</b></samp></span></p></td>
<td><p>3</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Unsolicited interrupt reason code</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>KEYS</b></samp></span> [0:7]</p></td>
<td><p>8</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Port keys, ports 0-7</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>PCONFIG</b></samp></span> [0:7]</p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Port configuration, ports 0-7</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>RCVTYPE</b></samp></span> [0:7]</p></td>
<td><p>16</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Receive type, ports 0-7</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CHARCNT</b></samp></span> [0:7]</p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Received character count, ports 0-7</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>TERMCNT</b></samp></span> [0:7]</p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Termination character count, ports 0-7</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FLOWCNTL</b></samp></span> [0:7]</p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Flow control, ports 0-7</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENQCNTR</b></samp></span> [0:7]</p></td>
<td><p>7</p></td>
<td><p>10</p></td>
<td></td>
<td><p>ENQ character counter, ports 0-7</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>ACKWAIT</b></samp></span> [0:7]</p></td>
<td><p>10</p></td>
<td><p>10</p></td>
<td></td>
<td><p>ACK wait counter, ports 0-7</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>PFLAGS</b></samp></span> [0:7]</p></td>
<td><p>12</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Port flags, ports 0-7</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>RBUF</b></samp> [0:7] [0:513]</span></p></td>
<td><p>8</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td><p>Read buffers, ports 0-7</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>WBUF</b></samp> [0:7] [0:513]</span></p></td>
<td><p>8</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td><p>Write buffers, ports 0-7</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>GET</b></samp> [0:7] [0:1]</span></p></td>
<td><p>10</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Read/write get indexes, ports 0-7</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SEP</b></samp> [0:7] [0:1]</span></p></td>
<td><p>10</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Read/write separator indexes, ports 0-7</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>PUT</b></samp> [0:7] [0:1]</span></p></td>
<td><p>10</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Read/write put indexes, ports 0-7</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Control flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Flag buffer flip-flop</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>RBUF</b></samp></span> and <span class="html"><samp><b>WBUF</b></samp></span> registers logically represent eight character buffers of 514 bytes each,
and the <span class="html"><samp><b>GET</b></samp></span>, <span class="html"><samp><b>SEP</b></samp></span>, and <span class="html"><samp><b>PUT</b></samp></span> registers logically represent eight sets of two-word indexes.
However,
SCP supports only one-dimensional register arrays,
so they must be examined and deposited as linear arrays of 4112 bytes and 16 words,
respectively.
So, for example,
<code class="docutils literal notranslate"><span class="pre">RBUF</span> <span class="pre">[0]</span></code> is byte 0 of buffer 0,
<code class="docutils literal notranslate"><span class="pre">RBUF</span> <span class="pre">[513]</span></code> is byte 513 of buffer 0,
<code class="docutils literal notranslate"><span class="pre">RBUF</span> <span class="pre">[514]</span></code> is byte 0 of buffer 1, etc.</p>
<p>The <span class="html"><samp><b>IBUF</b></samp></span> and <span class="html"><samp><b>OBUF</b></samp></span> registers default to octal display,
but may be displayed in single- or two-character formats by specifying the <span class="html"><samp><b>-A</b></samp></span> or <span class="html"><samp><b>-C</b></samp></span> switch,
respectively.
Symbolic entry for these registers is also supported.
The <span class="html"><samp><b>RBUF</b></samp></span> and <span class="html"><samp><b>WBUF</b></samp></span> registers default to single-character format display and entry,
but may be overridden with numeric-format switches,
if desired.</p>
</section>
</section>
<section id="b-line-printer-interface-with-one-2607-13-17-18-line-printer">
<span id="one-2607-13-17-18-line-printer"></span><span id="b-line-printer-interface"></span><h3><span class="sectnum">1.4.9. </span>12845B Line Printer Interface with One 2607/13/17/18 Line Printer<a class="headerlink" href="#b-line-printer-interface-with-one-2607-13-17-18-line-printer" title="Permalink to this heading">¶</a></h3>
<p>The HP 12845B Line Printer Interface connects the HP 2607A (200 lines per minute),
HP 2613 (300 lpm),
HP 2617 (600 lpm),
and HP 2618 (1250 lpm) line printers to the HP computer family.
The simulation provides one printer unit;
the 2607 is selected by default.
Attaching a text file to the unit simulates loading paper into the printer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="p">{</span><span class="o">-</span><span class="n">N</span><span class="p">}</span> <span class="n">LPT</span> <span class="o">&lt;</span><span class="n">image</span><span class="o">-</span><span class="n">filename</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Adding the <span class="html"><samp><b>-N</b></samp></span> (new file) switch clears the contents of the image file if present.
Without the <span class="html"><samp><b>-N</b></samp></span> switch,
printer output will be appended to any preexisting image file content.</p>
<p>Printer output written to the image file is typically buffered by the host operating system’s underlying stream I/O routines.
While it is running,
the simulator flushes the file after each printer top-of-form request to permit convenient inspection of the image file.
Stopping the simulator also flushes the file.</p>
<p>If the host operating system returns an error when writing to the printer image file,
the simulator will report the error to the simulation console, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HP</span> <span class="mi">2100</span> <span class="n">simulator</span> <span class="n">printer</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span> <span class="n">error</span><span class="p">:</span> <span class="n">No</span> <span class="n">space</span> <span class="n">left</span> <span class="n">on</span> <span class="n">device</span>
</pre></div>
</div>
<p>The printer goes offline with an alarm condition,
and the simulator stops.
Simulation may then be resumed,
either with the printer set back online if the problem is fixed,
or with the printer remaining offline if the problem is uncorrectable.</p>
<p id="detach-lpt">Detaching the text file from the unit with the <span class="html"><samp><b>DETACH LPT</b></samp></span> command simulates running out of paper.
If the command is entered while there are characters in the print buffer or,
for the 2607 only,
the print location is not at the top of the form,
<strong>Command not completed</strong> is displayed on the simulation console,
and the file remains attached until the required conditions are true.
Once simulation is resumed and the print operations complete,
the printer is set offline and detached automatically.</p>
<p id="detach-f-lpt">Detaching may also be forced with the <span class="html"><samp><b>DETACH -F LPT</b></samp></span> command.
This simulates physically removing the paper and takes effect immediately,
regardless of any printing operations in progress.</p>
<p>Device and unit options include configuring the printer type and timing,
output format,
vertical format unit (VFU),
and the ability to set the printer offline or online.
The command forms are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">LPT</span> <span class="o">&lt;</span><span class="n">device</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
<span class="n">SET</span> <span class="n">LPT</span> <span class="o">&lt;</span><span class="n">unit</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
</pre></div>
</div>
<section id="id1">
<h4><span class="sectnum">1.4.9.1. </span>Device options<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h4>
<p>Device options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>FASTTIME</b></samp></span></p></td>
<td><p>Use optimized timing; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>REALTIME</b></samp></span></p></td>
<td><p>Use realistic timing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>PRINTER</b></samp></span></p></td>
<td><p>Install the standard printer VFU tape; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DIAGNOSTIC</b></samp></span></p></td>
<td><p>Install the diagnostic VFU tape</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select code; default is 15</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DEBUG=</b><var>option</var></samp></span></p></td>
<td><p>Enable tracing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NODEBUG</b></samp></span></p></td>
<td><p>Disable tracing; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device</p></td>
</tr>
</tbody>
</table>
<p>The printer supports realistic and optimized timing modes.
Realistic timing attempts to model the print buffer load and print-and-space operation delays inherent in the physical hardware.
For example,
output of lines with more characters takes longer than output of lines with fewer characters,
and spacing six lines takes approximately six times longer than spacing one line.</p>
<p>Optimized timing reduces operation delays to the minimums necessary to operate correctly;
this is much faster than a real line printer would operate.</p>
<p>The delays used by the simulator in <span class="html"><samp><b>FASTTIME</b></samp></span> mode may be set via the register interface.
The values may be adjusted as necessary to work around any HP software problems that are triggered by the unusually rapid print operations.
Resetting the device with the <span class="html"><samp class="guilabel"><b>RESET -P</b></samp></span> (power-on reset) command restores the original optimized times.</p>
<p>The <span class="html"><samp><b>DIAGNOSTIC</b></samp></span> option simulates the installation of the HP 02613-80002 or 02618-80002 diagnostic VFU tape.
This is needed to run the 2613/17/18 diagnostic (DSN 145103).
Setting the <span class="html"><samp><b>PRINTER</b></samp></span> option reinstalls the standard VFU tape (02607-80024 for the 2607 and 02613-80001 for the 2613, 2617, and 2618).</p>
<p>Device configuration may be displayed with the following commands:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp>SHOW LPT</samp></span></p></td>
<td><p>Display the device and unit configuration</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp>SHOW LPT MODES</samp></span></p></td>
<td><p>Display the timing and VFU tape modes</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id2">
<h4><span class="sectnum">1.4.9.2. </span>Unit options<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h4>
<p>Unit options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>2607</b></samp></span></p></td>
<td><p>Set the printer model to 2607; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>2613</b></samp></span></p></td>
<td><p>Set the printer model to 2613</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>2617</b></samp></span></p></td>
<td><p>Set the printer model to 2617</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>2618</b></samp></span></p></td>
<td><p>Set the printer model to 2618</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>VFU</b></samp></span></p></td>
<td><p>Install the HP standard 66-line VFU tape; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>VFU=</b><var>filename</var></samp></span></p></td>
<td><p>Install a custom VFU tape image</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>OFFLINE</b></samp></span></p></td>
<td><p>Set the printer offline; default when detached</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ONLINE</b></samp></span></p></td>
<td><p>Set the printer online; default when attached</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>EXPAND</b></samp></span></p></td>
<td><p>Write expanded output to the printer image file; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>COMPACT</b></samp></span></p></td>
<td><p>Write compact output to the printer image file</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>POWEROFF</b></samp></span></p></td>
<td><p>Turn the printer power off</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>POWERON</b></samp></span></p></td>
<td><p>Turn the printer power on; default</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>2607</b></samp></span>, <span class="html"><samp><b>2613</b></samp></span>, <span class="html"><samp><b>2617</b></samp></span>, and <span class="html"><samp><b>2618</b></samp></span> options select the printer model.
Each printer is configured with Option 001,
which provides a 128-character set for the HP 2607 and 96-character sets for the HP 2613, 2617, and 2618.
The 2607 and 2618 support 132-character print line lengths,
while the 2613 and 2617 support 136-character lines.
Exceeding the line length causes an automatic print-and-space operation on the 2607 and discards the extra characters on the 2613, 2617, and 2618.</p>
<p>The <span class="html"><samp><b>VFU</b></samp></span> option configures the printer’s vertical format unit,
as described in the <a class="reference internal" href="#vertical-format-unit">Vertical format unit</a> section below.</p>
<p>The <span class="html"><samp><b>OFFLINE</b></samp></span> and <span class="html"><samp><b>ONLINE</b></samp></span> options place the printer offline and online,
respectively.
The former provides a convenient method of setting the printer “down” without detaching the associated output file.</p>
<p id="show-lpt"><span id="set-lpt-offline"></span>The printer will not go offline if there are characters in the print buffer.
Instead, the offline condition is held off until the line is printed and paper movement is complete.
The <span class="html"><samp><b>SET LPT OFFLINE</b></samp></span> command checks for data in the print buffer or a print operation in progress.
If either condition is true,
the action is deferred,
and <strong>Command not completed</strong> is displayed on the simulation console.
A <span class="html"><samp><b>SHOW LPT</b></samp></span> command will show that the device is still online.
Once simulation is resumed and the print operation completes,
the printer is set offline.
No console message reports this,
although a subsequent <span class="html"><samp><b>SHOW LPT</b></samp></span> command will indicate the new status.</p>
<p id="reset-lpt"><span id="set-lpt-online"></span>Entering a <span class="html"><samp><b>SET LPT ONLINE</b></samp></span> command while an offline or detach action is deferred will cancel the action without triggering any programmed offline-to-online status transition interrupt.
A <span class="html"><samp><b>RESET LPT</b></samp></span> command also cancels any deferred offline or detach action.
Additionally,
it clears the print buffer and terminates any print action in progress,
so a <span class="html"><samp><b>SET LPT OFFLINE</b></samp></span> or <span class="html"><samp><b>DETACH LPT</b></samp></span> will succeed if issued afterward.</p>
<p>The <span class="html"><samp><b>EXPAND</b></samp></span> and <span class="html"><samp><b>COMPACT</b></samp></span> options control the format of lines written to the printer image file.
In compact mode,
a carriage-return/line-feed character pair terminates a printed line,
but subsequent line spacing is performed by line-feed characters alone.
A top-of-form request will emit a form-feed character instead of the number of line-feeds required to reach the top of the next form.
This mode is suitable for sending the printer output to a physical printer connected to the host.</p>
<p>In expanded mode,
paper advance is handled by emitting the correct number of carriage-return/line-feed pairs.
This mode is suitable for retaining printer output as a text file.</p>
<p>The HP 2613, 2617, and 2618 printers are capable of overprinting.
If the printer is sent a format code to suppress spacing,
the characters in the buffer are printed and the buffer is emptied,
but the paper is not advanced.
The next print operation will print its characters over those already present on the paper.
In simulation,
overprinting is performed in one of two ways,
depending on the print mode.</p>
<p>In compact mode,
overprinting is simulated by emitting a carriage-return character at the end of the line.
In expanded mode,
overprinting is simulated by merging characters in the buffer before writing them as a single line in the printer image file.
As the second and subsequent lines are output,
each new character is compared with its corresponding character in the buffer.
If the character in the buffer is a space,
the new character replaces it.
If the new character is a space or is the same as the character in the buffer,
the character in the buffer is retained.
Otherwise,
the character in the buffer is replaced with a special character representing an overprinted combination.
This character defaults to DEL (octal 177) but may be changed by altering the <span class="html"><samp><b>OVPCHR</b></samp></span>-register value.</p>
<p>The HP 2607 printer cannot overprint.
A request to suppress spacing will result in a single-line paper advance after printing.</p>
<p>Entering the <span class="html"><samp><b>SET LPT POWEROFF</b></samp></span> command simulates removing power from the line printer.
A <span class="html"><samp><b>SET LPT POWERON</b></samp></span> command restores power to the printer.</p>
</section>
<section id="vertical-format-unit">
<h4><span class="sectnum">1.4.9.3. </span>Vertical format unit<a class="headerlink" href="#vertical-format-unit" title="Permalink to this heading">¶</a></h4>
<p>The HP 2607 supports an 8-channel vertical format unit (VFU),
and the HP 2613, 2617, and 2618 printers support 12-channel VFUs.
A continuous punched paper tape that controls paper spacing is installed in the VFU reader.
The printer may be commanded to advance the paper until a punched hole is detected in a specified VFU channel.
The length of the tape establishes the length of the forms loaded into the printer.</p>
<p>Initially,
the standard VFU tape
(part number 02607-80024 for the HP 2607 or 02613-80001 for the HP 2613, 2617, and 2618)
is installed.
This tape associates commands for channels 1-8 with the following printer actions:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Channel</p></th>
<th class="head"><p>Printer advances to the…</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>1</strong></p></td>
<td><p>Top of form</p></td>
</tr>
<tr class="row-odd"><td><p><strong>2</strong></p></td>
<td><p>Bottom of form</p></td>
</tr>
<tr class="row-even"><td><p><strong>3</strong></p></td>
<td><p>Next single space</p></td>
</tr>
<tr class="row-odd"><td><p><strong>4</strong></p></td>
<td><p>Next double space</p></td>
</tr>
<tr class="row-even"><td><p><strong>5</strong></p></td>
<td><p>Next triple space</p></td>
</tr>
<tr class="row-odd"><td><p><strong>6</strong></p></td>
<td><p>Next half-page</p></td>
</tr>
<tr class="row-even"><td><p><strong>7</strong></p></td>
<td><p>Next quarter-page</p></td>
</tr>
<tr class="row-odd"><td><p><strong>8</strong></p></td>
<td><p>Next sixth-page</p></td>
</tr>
</tbody>
</table>
<p>For the 02613-80001 tape,
channel 9 is punched the same as channel 2,
and channels 10-12 are uncommitted.</p>
<p>If the device is in diagnostic mode,
the appropriate diagnostic VFU tape
(02613-80002 for the 2613 and 2617 or 02618-80002 for the 2618)
is installed.
These tapes associate commands for channels 1-8 as above and for channels 9-12 with the following actions:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Channel</p></th>
<th class="head"><p>Printer advances to the…</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>9</strong></p></td>
<td><p>Bottom of form</p></td>
</tr>
<tr class="row-odd"><td><p><strong>10</strong></p></td>
<td><p>Line before the bottom of form</p></td>
</tr>
<tr class="row-even"><td><p><strong>11</strong></p></td>
<td><p>Line before the top of form</p></td>
</tr>
<tr class="row-odd"><td><p><strong>12</strong></p></td>
<td><p>Top of form</p></td>
</tr>
</tbody>
</table>
<p>Setting the device back to printer mode restores the standard VFU tape.</p>
<p>The simulator supports the use of custom VFU tape images.
A custom tape may be installed in place of the standard tape by issuing the <span class="html"><samp><b>SET LPT VFU=</b><var>filename</var></samp></span> command.
Custom tapes must reserve channel 1 for the top-of-form location,
but the other channels may be defined as desired.</p>
<p>A custom tape image is a plain-text file that starts with a VFU definition line and then contains one channel-definition line for each line of the form.
The number of channel-definition lines establishes the form length.</p>
<p>A semicolon appearing anywhere on a line begins a comment,
and the semicolon and all following characters are ignored.
Zero-length lines,
including lines beginning with a semicolon,
are ignored.
Note that a line containing one or more blanks is not a zero-length line,
so the following line,
for example,
would not be ignored:</p>
<pre class="literal-block"> ; a comment starting in column 2</pre>
<p>The first (non-ignored) line in the file must be a VFU definition line of this exact form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">VFU</span><span class="o">=&lt;</span><span class="n">punch</span> <span class="n">characters</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">no</span><span class="o">-</span><span class="n">punch</span> <span class="n">character</span><span class="o">&gt;</span><span class="p">{,</span><span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="p">}</span>
</pre></div>
</div>
<p>…where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">punch</span> <span class="pre">characters</span></code> is a set of one or more characters used interchangeably to represent a punched location.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">no-punch</span> <span class="pre">character</span></code> is a single character representing a non-punched location.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">title</span></code> is an optional description that is printed by the <span class="html"><samp><b>SHOW LPT VFU</b></samp></span> command;
the description “Custom VFU” is used if the title is omitted.</p></li>
</ul>
<p>If the <span class="html"><samp><b>VFU</b></samp></span> line is missing or not of the correct form,
then <strong>Format error</strong> is displayed on the simulation console,
and the VFU tape is not changed.</p>
<p>The remaining lines define the channels punched for each line of the printed form.
The line format consists of a sequence of punch, no-punch, and “other” characters,
in channel order.
Each punch or no-punch character defines a channel state,
starting with channel 1 and proceeding left-to-right until all channels for the VFU are defined;
any the extra channel states on the line are ignored.
If the line terminates before all channels are defined,
the remaining channels are set to the no-punch state.
Any “other” characters,
i.e., neither punch characters nor no-punch characters,
are ignored and may be used freely to delineate the tape channels.</p>
<p>For a standard 66-line form,
the first printable line (form line 1) is paper line 4,
and the last printable line (form line 60) is paper line 63.
The first channel-definition line in the file specifies form line 1,
i.e., the top of the form,
and must have a punch in channel 1.
Channel line 60 defines form line 60,
i.e., the bottom of the form.
Six more channel lines follow:
three for the bottom margin,
and three for the top margin of the next form.</p>
<p>An example custom VFU file using a 66-line tape definition for an 8-channel VFU is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">;</span> <span class="n">the</span> <span class="n">VFU</span> <span class="n">definition</span>
<span class="p">;</span>
<span class="p">;</span> <span class="n">the</span> <span class="nb">set</span> <span class="n">of</span> <span class="n">punch</span> <span class="n">characters</span> <span class="ow">is</span> <span class="s2">&quot;1&quot;</span> <span class="ow">and</span> <span class="s2">&quot;X&quot;</span>
<span class="p">;</span> <span class="n">the</span> <span class="n">no</span><span class="o">-</span><span class="n">punch</span> <span class="n">character</span> <span class="ow">is</span> <span class="s2">&quot;0&quot;</span>
<span class="p">;</span> <span class="nb">all</span> <span class="n">other</span> <span class="n">characters</span> <span class="n">are</span> <span class="n">ignored</span>

<span class="n">VFU</span><span class="o">=</span><span class="mi">1</span><span class="n">X</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">A</span> <span class="n">binary</span> <span class="n">tape</span> <span class="n">image</span>

<span class="p">;</span> <span class="n">the</span> <span class="n">channel</span> <span class="n">definitions</span>

<span class="mi">1</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>   <span class="p">;</span> <span class="n">top</span> <span class="n">of</span> <span class="n">form</span> <span class="p">(</span><span class="n">line</span> <span class="mi">1</span><span class="p">;</span> <span class="n">must</span> <span class="n">have</span> <span class="n">a</span> <span class="n">punch</span> <span class="ow">in</span> <span class="n">channel</span> <span class="mi">1</span><span class="p">)</span>
<span class="mi">0</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">X</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="mi">0</span>   <span class="p">;</span> <span class="n">single</span> <span class="n">space</span> <span class="p">(</span><span class="n">line</span> <span class="mi">2</span><span class="p">)</span>
<span class="mi">0011</span>              <span class="p">;</span> <span class="n">channels</span> <span class="mi">5</span><span class="o">-</span><span class="mi">8</span> <span class="n">default</span> <span class="n">to</span> <span class="n">no</span><span class="o">-</span><span class="n">punch</span> <span class="p">(</span><span class="n">line</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="mi">0</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>   <span class="p">;</span> <span class="n">bottom</span> <span class="n">of</span> <span class="n">form</span> <span class="p">(</span><span class="n">line</span> <span class="mi">60</span><span class="p">)</span>
<span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>   <span class="p">;</span> <span class="n">bottom</span> <span class="n">form</span> <span class="n">margin</span> <span class="p">(</span><span class="n">line</span> <span class="mi">61</span><span class="p">)</span>
<span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>   <span class="p">;</span> <span class="n">bottom</span> <span class="n">form</span> <span class="n">margin</span> <span class="p">(</span><span class="n">line</span> <span class="mi">62</span><span class="p">)</span>
<span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>   <span class="p">;</span> <span class="n">bottom</span> <span class="n">form</span> <span class="n">margin</span> <span class="p">(</span><span class="n">line</span> <span class="mi">63</span><span class="p">)</span>
<span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>   <span class="p">;</span> <span class="n">top</span> <span class="n">of</span> <span class="n">form</span> <span class="n">margin</span> <span class="p">(</span><span class="n">line</span> <span class="mi">64</span><span class="p">)</span>
<span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>   <span class="p">;</span> <span class="n">top</span> <span class="n">of</span> <span class="n">form</span> <span class="n">margin</span> <span class="p">(</span><span class="n">line</span> <span class="mi">65</span><span class="p">)</span>
<span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>   <span class="p">;</span> <span class="n">top</span> <span class="n">of</span> <span class="n">form</span> <span class="n">margin</span> <span class="p">(</span><span class="n">line</span> <span class="mi">66</span><span class="p">)</span>
</pre></div>
</div>
<p>If a custom tape has been used,
the standard tape may be reinstalled by issuing the <span class="html"><samp><b>SET LPT VFU</b></samp></span> command.</p>
<p>Attempting to command an advance to a channel that is not punched will cause a tape fault,
and the printer will go offline.
Setting the printer back online will clear the fault.</p>
<p>The current VFU definition may be displayed with the following command:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW LPT VFU</b></samp></span></p></td>
<td><p>Display the currently loaded VFU tape definition</p></td>
</tr>
</tbody>
</table>
<p>This command displays the current VFU tape title and then the channel definitions for each form line.
By default,
a punched channel is indicated by an <code class="docutils literal notranslate"><span class="pre">O</span></code> character,
and an unpunched channel is indicated by a period (<code class="docutils literal notranslate"><span class="pre">.</span></code>).
These characters may be changed by depositing new values into the <span class="html"><samp><b>PUNCHR</b></samp></span> and <span class="html"><samp><b>UNPCHR</b></samp></span> registers,
respectively.</p>
</section>
<section id="id3">
<h4><span class="sectnum">1.4.9.4. </span>Tracing and registers<a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h4>
<p>When a debug log has been established,
tracing may be configured by specifying one or more of the reporting level options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CMD</b></samp></span></p></td>
<td><p>Printer commands executed</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CSRW</b></samp></span></p></td>
<td><p>Interface control, status, read, and write actions</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SERV</b></samp></span></p></td>
<td><p>Printer unit service events</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>XFER</b></samp></span></p></td>
<td><p>Data transmissions</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>CMD</b></samp></span> option traces the commands executed by the printer.
The <span class="html"><samp><b>CSRW</b></samp></span> option traces control, status, read, and write commands sent to the interface.
The <span class="html"><samp><b>SERV</b></samp></span> option traces printer event service entries.
The <span class="html"><samp><b>XFER</b></samp></span> option traces the data words and format commands written to the printer.
The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned via the interface.</p>
<p>Examples of the trace formats follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span><span class="n">LPT</span>   <span class="n">cmd</span><span class="p">:</span> <span class="n">Printed</span> <span class="mi">136</span> <span class="n">characters</span> <span class="n">on</span> <span class="n">line</span> <span class="mi">1</span>
<span class="o">&gt;&gt;</span><span class="n">LPT</span>   <span class="n">cmd</span><span class="p">:</span> <span class="n">Printer</span> <span class="n">commanded</span> <span class="n">to</span> <span class="n">slew</span> <span class="n">to</span> <span class="n">VFU</span> <span class="n">channel</span> <span class="mi">3</span> <span class="kn">from</span> <span class="nn">line</span> <span class="mi">1</span>
<span class="o">&gt;&gt;</span><span class="n">LPT</span>   <span class="n">cmd</span><span class="p">:</span> <span class="n">Printer</span> <span class="n">advanced</span> <span class="mi">1</span> <span class="n">line</span> <span class="n">to</span> <span class="n">line</span> <span class="mi">2</span>
<span class="o">&gt;&gt;</span><span class="n">LPT</span>  <span class="n">csrw</span><span class="p">:</span> <span class="n">Control</span> <span class="ow">is</span> <span class="n">character</span> <span class="o">|</span> <span class="s1">&#39;#&#39;</span>
<span class="o">&gt;&gt;</span><span class="n">LPT</span>  <span class="n">csrw</span><span class="p">:</span> <span class="n">Status</span> <span class="ow">is</span> <span class="n">online</span> <span class="o">|</span> <span class="n">ready</span> <span class="o">|</span> <span class="n">VFU</span> <span class="mi">12</span> <span class="o">|</span> <span class="n">idle</span>
<span class="o">&gt;&gt;</span><span class="n">LPT</span>  <span class="n">serv</span><span class="p">:</span> <span class="n">Unit</span> <span class="n">delay</span> <span class="mi">1577</span> <span class="n">service</span> <span class="n">scheduled</span>
<span class="o">&gt;&gt;</span><span class="n">LPT</span>  <span class="n">serv</span><span class="p">:</span> <span class="n">Printer</span> <span class="n">service</span> <span class="n">entered</span>
<span class="o">&gt;&gt;</span><span class="n">LPT</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Character</span> <span class="s1">&#39;G&#39;</span> <span class="n">sent</span> <span class="n">to</span> <span class="n">printer</span>
<span class="o">&gt;&gt;</span><span class="n">LPT</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Format</span> <span class="n">code</span> <span class="mi">102</span> <span class="n">sent</span> <span class="n">to</span> <span class="n">printer</span>
<span class="o">&gt;&gt;</span><span class="n">LPT</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">STC</span> <span class="o">|</span> <span class="n">CLF</span> <span class="o">|</span> <span class="n">SIR</span> <span class="o">|</span> <span class="n">PRH</span>
<span class="o">&gt;&gt;</span><span class="n">LPT</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">PRL</span>
</pre></div>
</div>
<p>The Line Printer Controller state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Symbolic</p></th>
<th class="head"><p>Read-only</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>DEVCTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td></td>
<td><p>Device control flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DEVFLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td></td>
<td><p>Device flag flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DEVFBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td></td>
<td><p>Device flag buffer flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>STROBE</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td></td>
<td><p>Strobe signal to the printer</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DEMAND</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td></td>
<td><p>Demand signal from the printer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>OUTPUT</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td></td>
<td><p>Output data word to the printer</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>STATUS</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td></td>
<td><p>Device status from the printer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>PFAULT</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td></td>
<td><p>Paper fault exists</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>TFAULT</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td></td>
<td><p>Tape fault exists</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>OLPEND</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td></td>
<td><p>Offline transition is pending</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>PRLINE</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>10</p></td>
<td></td>
<td></td>
<td><p>Current print line number</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>BUFIDX</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>10</p></td>
<td></td>
<td></td>
<td><p>Current print buffer index</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>PRTBUF</b></samp></span> [0:423]</p></td>
<td><p>8</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td></td>
<td><p>Print buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>OVPCHR</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td></td>
<td><p>Overprint character</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FORMLN</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>10</p></td>
<td></td>
<td><p>✓</p></td>
<td><p>Form length in lines</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>VFU</b></samp></span> [0:144]</p></td>
<td><p>12</p></td>
<td><p>2</p></td>
<td></td>
<td><p>✓</p></td>
<td><p>Vertical format unit channels</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>PUNCHR</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td></td>
<td><p>Punched channel character</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>UNPCHR</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td></td>
<td><p>Unpunched channel character</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>BTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td></td>
<td></td>
<td><p>Fast printer buffer load delay time</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>PTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td></td>
<td></td>
<td><p>Fast printing delay time</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>STIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td></td>
<td></td>
<td><p>Fast paper slew per-line delay time</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>POS</b></samp></span></p></td>
<td><p>32</p></td>
<td><p>10</p></td>
<td></td>
<td></td>
<td><p>Printer file current position</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>PRTBUF</b></samp></span>, <span class="html"><samp><b>OVPCHR</b></samp></span>, <span class="html"><samp><b>PUNCHR</b></samp></span>, and <span class="html"><samp><b>UNPCHR</b></samp></span> registers default to single-character format display and entry,
but may be overridden with numeric-format switches,
if desired.
The <span class="html"><samp><b>OUTPUT</b></samp></span> register defaults to octal display, but may be displayed in single-character format by specifying the <span class="html"><samp><b>-A</b></samp></span> switch.
Symbolic entry for this register is also supported.</p>
<p>The <span class="html"><samp><b>PFAULT</b></samp></span> and <span class="html"><samp><b>TFAULT</b></samp></span> registers indicate a paper fault and a tape fault,
respectively,
when they contain the value 1.
Attaching the printer will clear a paper fault.
Setting the printer online will clear a tape fault.</p>
<p>The character used to represent an overprinted position may be changed by depositing a new value into the <span class="html"><samp><b>OVPCHR</b></samp></span> register.
For example,
the <span class="html"><samp><b>DEPOSIT LPT OVPCHR @</b></samp></span> command will change the character from the default DEL (octal 177) to the commercial-at sign (octal 100).
Similarly,
the characters used to represent punched and unpunched VFU channels in the <span class="html"><samp><b>SHOW LPT VFU</b></samp></span> display may be changed by depositing new values in the <span class="html"><samp><b>PUNCHR</b></samp></span> and <span class="html"><samp><b>UNPCHR</b></samp></span> registers,
respectively.</p>
<p>The <span class="html"><samp><b>FORMLN</b></samp></span> register holds the current VFU form length,
and the VFU register array holds the content of the current VFU tape.
The register defaults to binary display,
with channel 1 in the most-significant bit and channel 8 or 12 in the least-significant bit,
depending on the VFU width.
Elements 1−<em>n</em> correspond to VFU form lines 1−<em>n</em>,
where a 1 value indicates a punch,
and a 0 value indicates a no-punch.
Element 0 is the logical OR of elements 1−<em>n</em>,
so a 1 value indicates that the channel is punched somewhere on the tape,
and a 0 value indicates that the channel is not punched.</p>
</section>
</section>
<section id="a-processor-interconnect">
<h3><span class="sectnum">1.4.10. </span>12875A Processor Interconnect<a class="headerlink" href="#a-processor-interconnect" title="Permalink to this heading">¶</a></h3>
<p>The HP 12875A Processor Interconnect kit is used to communicate between the System Processor and the I/O Processor of a two-CPU HP 2000 Time-Shared BASIC system.
It consists of four identical 12566A Microcircuit Interfaces and two interconnecting cables.
One pair of interfaces is installed in adjacent I/O slots in each CPU,
and the cables are used to connect the higher-priority (lower select code) interface in each computer to the lower-priority interface in the other computer.
This interconnection provides a full-duplex 16-bit parallel communication channel between the processors.
Each interface is actually a bi-directional,
half-duplex line that is used in the primary direction for commands and in the reverse direction for status.</p>
<p>Two instances of the HP2100 simulator are run to simulate the SP and IOP.
Each simulator contains an Inbound Data interface assigned to the lower-numbered select code,
and an Outbound Data interface assigned to the higher-numbered select code.
The IPLI and IPLO devices,
respectively,
simulate these interfaces,
while the IPL device represents the combination.
A shared memory area simulates the interconnecting cables.</p>
<p>The IPLI and IPLO devices are initially disabled.
A <span class="html"><samp><b>SET IPL ENABLED</b></samp></span> command will enable both devices.
Attaching the IPL devices of one machine to the IPL devices of the other simulates connecting the cables.
The System Processor instance establishes its connections with this command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="o">-</span><span class="n">S</span> <span class="n">IPL</span> <span class="o">&lt;</span><span class="n">code</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>…where <code class="docutils literal notranslate"><span class="pre">code</span></code> is a user-selected decimal number between 1 and 65535 that uniquely identifies the instance pair to interconnect.
The I/O Processor instance establishes its connections with this command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="o">-</span><span class="n">I</span> <span class="n">IPL</span> <span class="o">&lt;</span><span class="n">code</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>…where <code class="docutils literal notranslate"><span class="pre">code</span></code> is the same decimal number specified in the System Processor’s <a class="reference internal" href="#attach"><span class="html"><samp><b>ATTACH</b></samp></span></a> command.</p>
<p>The interface does not provide status to the CPU to indicate that the interconnecting cables are disconnected.
Attempting to send or receive data with the cables not connected will cause the operation to hang,
as it will in hardware.
Specifying the <span class="html"><samp><b>SET CPU STOP=IOERR</b></samp></span> command will cause a simulation stop with a <strong>Cable not connected</strong> error if this condition occurs.
If the error is corrected by reattaching the device,
then resuming simulation will retry the operation.</p>
<p>Processor interconnect options that may be specified for the IPL device are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>WAIT</b></samp></span></p></td>
<td><p>Suspend execution until a signal is received from the other instance</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SIGNAL</b></samp></span></p></td>
<td><p>Signal the other instance</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select codes; defaults are 32/33</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the IPLI and IPLO devices</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the IPLI and IPLO devices; default</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>WAIT</b></samp></span> and <span class="html"><samp><b>SIGNAL</b></samp></span> options are used to synchronize the two simulator instances connected by <a class="reference internal" href="#attach"><span class="html"><samp><b>ATTACH</b></samp></span></a> commands specifying the same code number.
Entering a <span class="html"><samp><b>SET IPL WAIT</b></samp></span> command suspends the current simulator instance until a <span class="html"><samp><b>SET IPL SIGNAL</b></samp></span> command is entered at the other simulator instance.
If the signal is set before the wait is requested,
the current simulator instance will not suspend but instead will return immediately to the SCP prompt.
If either command is entered before the IPL device has been attached,
a <strong>Command not allowed</strong> error is printed.
The <span class="html"><samp><b>SET IPL WAIT</b></samp></span> command will wait forever for the corresponding signal.
To abort the wait manually and return to the SCP prompt,
enter <span class="html"><samp>CTRL+C</samp></span>.</p>
<p>When entering the <span class="html"><samp><b>SC</b></samp></span> option,
specify the lower select code;
the higher select code will be set automatically,
and the cards will be assigned in the correct order.</p>
<p>Processor interconnect options that may be specified for either the IPLI or IPLO device are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>DIAGNOSTIC</b></samp></span></p></td>
<td><p>Connect using the diagnostic test connector or cable</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>LINK</b></samp></span></p></td>
<td><p>Connect using the processor interconnect cables</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DEBUG=</b><var>option</var></samp></span></p></td>
<td><p>Enable tracing</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>NODEBUG</b></samp></span></p></td>
<td><p>Disable tracing; default</p></td>
</tr>
</tbody>
</table>
<p>Enabling diagnostic mode for either device individually simulates the installation of the HP 1251-0332 diagnostic test (loopback) connector in place of the processor interconnect cable.
This is needed to run the General Purpose Register Diagnostic (DSN 143300) on that device.
Enabling diagnostic mode for both devices concurrently simulates the connection of a processor interconnect cable between the two interfaces within the same machine.
With this connection,
the HP 2100 Processor Interconnect Cable Test (product number 24197) may be run.
Entering the <span class="html"><samp><b>DIAGNOSTIC</b></samp></span> option automatically detaches any existing cable connections.
Attempting to attach a device in diagnostic mode will be rejected with a <strong>Command not allowed</strong> error.
Enabling link mode removes the diagnostic connector or cable and permits the processor interconnect cables to be installed with an <a class="reference internal" href="#attach"><span class="html"><samp><b>ATTACH</b></samp></span></a> command.</p>
<p>When a debug log has been established,
tracing may be configured for each card separately by specifying one or more of the reporting level options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CMD</b></samp></span></p></td>
<td><p>Command initiations and completions</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CSRW</b></samp></span></p></td>
<td><p>Control, status, read, and write actions</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>PSERV</b></samp></span></p></td>
<td><p>Interface service scheduling calls and entries (periodic)</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>XFER</b></samp></span></p></td>
<td><p>Data receptions and transmissions</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>CMD</b></samp></span> option traces the commands executed by the processor interconnect.
The <span class="html"><samp><b>CSRW</b></samp></span> option traces words received from and sent to the CPU.
The <span class="html"><samp><b>PSERV</b></samp></span> option traces event service scheduling and entries,
which occur at a periodic rate dependent on incoming data availability.
The <span class="html"><samp><b>XFER</b></samp></span> option traces the words received and transmitted over the interconnecting cables.
The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned via the interface.</p>
<p>Examples of the trace formats follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span><span class="n">IPLI</span>   <span class="n">cmd</span><span class="p">:</span> <span class="n">Delaying</span> <span class="n">DMA</span> <span class="n">completion</span> <span class="n">interrupt</span> <span class="k">for</span> <span class="mi">1</span> <span class="n">msec</span>
<span class="o">&gt;&gt;</span><span class="n">IPLI</span>  <span class="n">csrw</span><span class="p">:</span> <span class="n">Command</span> <span class="nb">input</span> <span class="n">word</span> <span class="ow">is</span> <span class="mi">040000</span>
<span class="o">&gt;&gt;</span><span class="n">IPLI</span>  <span class="n">csrw</span><span class="p">:</span> <span class="n">Status</span> <span class="n">output</span> <span class="n">word</span> <span class="ow">is</span> <span class="mi">000103</span>
<span class="o">&gt;&gt;</span><span class="n">IPLI</span> <span class="n">pserv</span><span class="p">:</span> <span class="n">Poll</span> <span class="n">delay</span> <span class="mi">32</span> <span class="n">service</span> <span class="n">scheduled</span>
<span class="o">&gt;&gt;</span><span class="n">IPLO</span> <span class="n">pserv</span><span class="p">:</span> <span class="n">Poll</span> <span class="n">delay</span> <span class="mi">50</span> <span class="n">service</span> <span class="n">entered</span>
<span class="o">&gt;&gt;</span><span class="n">IPLI</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Word</span> <span class="mi">000015</span> <span class="n">sent</span> <span class="n">to</span> <span class="n">link</span>
<span class="o">&gt;&gt;</span><span class="n">IPLI</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Word</span> <span class="mi">000040</span> <span class="n">delta</span> <span class="mi">63</span> <span class="n">received</span> <span class="kn">from</span> <span class="nn">link</span>
<span class="o">&gt;&gt;</span><span class="n">IPLI</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">IOO</span> <span class="o">|</span> <span class="n">STC</span> <span class="o">|</span> <span class="n">CLC</span> <span class="o">|</span> <span class="n">CLF</span> <span class="o">|</span> <span class="n">EDT</span> <span class="o">|</span> <span class="n">SIR</span>
<span class="o">&gt;&gt;</span><span class="n">IPLI</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="p">(</span><span class="n">none</span><span class="p">)</span>
</pre></div>
</div>
<p>The interface supports the <span class="html"><samp><b>LOAD IPL</b></samp></span> and <span class="html"><samp><b>BOOT IPL</b></samp></span> commands to load an absolute binary program into memory from the other processor.
Depending on the current CPU model,
the <span class="html"><samp><b>LOAD</b></samp></span> command copies either the Basic Binary Loader for the I/O Processor (BBL-IOP) or the 12992K boot loader ROM into memory,
configures it for the interface’s select code,
and sets the P register to the loader’s starting address.
The <span class="html"><samp><b>BOOT</b></samp></span> command performs these same actions and then presets the system and begins execution.</p>
<p>For a 2100/14/15/16 CPU containing a previously configured BBL-IOP in memory,
the commands are equivalent in hardware to setting the P register to the starting address,
pressing the <span class="html"><samp class="guilabel"><b>LOADER ENABLE</b></samp></span> button on the front panel,
and, for the <span class="html"><samp><b>BOOT</b></samp></span> command,
pressing the <span class="html"><samp class="guilabel"><b>INTERNAL PRESET</b></samp></span>, <span class="html"><samp class="guilabel"><b>EXTERNAL PRESET</b></samp></span>, and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> buttons to begin execution.
The S register value is not relevant for this loader.</p>
<p>The BBL-IOP is a dual-purpose loader that also permits loading an absolute binary program from the paper tape reader.
When the loader is copied into memory,
the processor interconnect portion is configured for the select code of the Inbound Data interface,
and the paper tape portion is configured for the select code of the paper tape reader interface.
The P register is automatically set to the starting address of the processor interconnect portion,
which starts at x7750
(i.e., offset 1750 within the highest page in memory).
To execute the paper tape portion,
the P register may be reset to x7700 (offset 1700).</p>
<p>For a 1000 M/E/F-Series CPU,
the commands are equivalent in hardware to setting the S register to select and configure the HP 12992K boot loader ROM,
pressing the <span class="html"><samp class="guilabel"><b>IBL</b></samp></span> button to copy the ROM into memory,
and, for the <span class="html"><samp><b>BOOT</b></samp></span> command,
pressing the <span class="html"><samp class="guilabel"><b>PRESET</b></samp></span> and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> buttons to begin execution.
The S register is preset as follows:</p>
<table class="bitmask-layout docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>15</p></th>
<th class="head"><p>14</p></th>
<th class="head"><p>13</p></th>
<th class="head"><p>12</p></th>
<th class="head"><p>11</p></th>
<th class="head"><p>10</p></th>
<th class="head"><p>9</p></th>
<th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>0</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td colspan="6"><p>IPLI select code</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<p>For either loader,
execution ends with one of the following halt instructions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 11</span></code> — a checksum error occurred; <em>A</em> = the calculated value, <em>B</em> = the tape value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 55</span></code> — the program load address would overlay the loader.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 77</span></code> — the end of the program was reached with a successful read.</p></li>
</ul>
<p>The IPLI and IPLO state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>IBUF</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Input buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>OBUF</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Output buffer</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Control flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag buffer flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>TIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td><p>Polling interval for input</p></td>
</tr>
</tbody>
</table>
</section>
<section id="a-asynchronous-multiplexer-interface">
<h3><span class="sectnum">1.4.11. </span>12920A Asynchronous Multiplexer Interface<a class="headerlink" href="#a-asynchronous-multiplexer-interface" title="Permalink to this heading">¶</a></h3>
<p>The HP 12920A Asynchronous Multiplexer Interface is a 16-channel terminal multiplexer commonly used with the HP 2000 series of Time-Shared BASIC systems.
It connects from 1 to 16 serial terminals or modems at programmable baud rates from 75 to 2400 bits per second.
Character sizes are also programmable from 5 to 12 bits in length,
including the start and stop bits.
Each channel can be independently configured for separate send and receive rates.
The multiplexer is not buffered,
so the CPU has to retrieve each character from a given channel before the next character arrives.
To avoid saturating the CPU with interrupt requests,
the multiplexer maintains an internal “mini-interrupt” system that queues requests and holds additional interrupts off until the CPU acknowledges the current request.</p>
<p>The 12920A consists of two Printed Circuit Assemblies —
a Lower Data PCA and an Upper Data PCA —
and an optional Control PCA.
In simulation,
the multiplexer is implemented as a three-device set,
as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MUXL</span></code> — the Lower Data PCA</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MUX</span></code> — the Upper Data PCA</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MUXC</span></code> — the Control PCA</p></li>
</ul>
<p>The Data PCAs provide the serial data line connections for terminals and data sets.
Five additional receive-only auxiliary channels may be connected as a group under software control to one of the sixteen main channels to detect the incoming baud rate.
The Control PCA provides serial control and status lines for Bell 103 data sets.</p>
<p>The Lower and Upper Data PCAs must be in adjacent I/O slots.
The Control PCA may be placed in any slot,
although in practice it was placed in the slot above the Upper Data PCA,
so that all three PCAs were physically together.</p>
<p>The 12920A supported one or two Control PCAs
(two were used with 801-type automatic dialers).
Under simulation,
only one Control PCA is supported.</p>
<section id="lower-and-upper-data-pcas">
<h4><span class="sectnum">1.4.11.1. </span>Lower and upper data PCAs<a class="headerlink" href="#lower-and-upper-data-pcas" title="Permalink to this heading">¶</a></h4>
<p>The Data PCAs provide the Transmitted Data (BA) and Received Data (BB) lines for up to sixteen terminals.
They perform input and output through Telnet sessions connected to a user-specified port or through individually specified host serial ports.
The Data PCAs support concurrent Telnet and serial connections.
The <a class="reference internal" href="#attach"><span class="html"><samp><b>ATTACH</b></samp></span></a> command specifies the local port to be used for Telnet connections:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="n">MUX</span> <span class="o">&lt;</span><span class="n">port</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>…where <code class="docutils literal notranslate"><span class="pre">port</span></code> is a decimal number between 1 and 65535 that is not being used for other TCP/IP activities.
When the Upper Data PCA is attached and the simulator is running,
the multiplexer listens for connections on the specified port and assigns them to channels in ascending numeric order,
unless an alternate connection order has been specified.</p>
<p>The <span class="html"><samp><b>ATTACH</b></samp></span> command is also used to specify the host serial port for individual multiplexer channels:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="p">{</span><span class="o">-</span><span class="n">V</span><span class="p">}</span> <span class="n">MUX</span> <span class="n">LINE</span><span class="o">=&lt;</span><span class="n">chan</span><span class="o">&gt;</span><span class="p">,</span><span class="n">CONNECT</span><span class="o">=&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="p">{;</span><span class="o">&lt;</span><span class="n">rate</span><span class="o">&gt;-&lt;</span><span class="n">size</span><span class="o">&gt;&lt;</span><span class="n">parity</span><span class="o">&gt;&lt;</span><span class="n">stopbits</span><span class="o">&gt;</span><span class="p">}</span>
</pre></div>
</div>
<p>…where <code class="docutils literal notranslate"><span class="pre">chan</span></code> is the multiplexer channel number from 0-15,
and <code class="docutils literal notranslate"><span class="pre">name</span></code> is the host name of the serial port to use (e.g., <em>ser0</em> or <em>COM1</em>).
If the <span class="html"><samp><b>-V</b></samp></span> (verbose) option is included,
a connection confirmation message will be output to the port.</p>
<p>An optional serial port configuration string may be supplied after the host name.
The required values are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rate</span></code> is the baud rate in bits per second.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">size</span></code> is the character size in bits including the parity bit, if designated.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parity</span></code> designates the parity to use: <em>N</em> (no), <em>E</em> (even), <em>O</em> (odd), <em>M</em> (mark), or <em>S</em> (space).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stopbits</span></code> is the number of stop bits (<em>1</em>, <em>1.5</em>, or <em>2</em>).</p></li>
</ul>
<p>Host serial connections default to 9600 baud,
8-bit characters,
no parity,
and one stop bit.</p>
<p>Upper and Lower Data PCA configuration options are available for the device and for the individual units.
The command forms are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">MUX</span> <span class="o">&lt;</span><span class="n">device</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
<span class="n">SET</span> <span class="n">MUXL</span> <span class="o">&lt;</span><span class="n">device</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
<span class="n">SET</span> <span class="n">MUXLn</span> <span class="o">&lt;</span><span class="n">unit</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Device options that may be specified for the Upper Data PCA are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>TERMINAL</b></samp></span></p></td>
<td><p>Connect using Telnet or serial ports; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DIAGNOSTIC</b></samp></span></p></td>
<td><p>Connect using diagnostic test cables</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>LINEORDER=</b><var>c1</var>[<b>;</b><var>c2</var>...]</samp></span></p></td>
<td><p>Set the channel connection order</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DISCONNECT=</b><var>chan</var></samp></span></p></td>
<td><p>Disconnect the specified channel</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select codes; default is 40/41</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DEBUG=</b><var>option</var></samp></span></p></td>
<td><p>Enable tracing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NODEBUG</b></samp></span></p></td>
<td><p>Disable tracing; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device</p></td>
</tr>
</tbody>
</table>
<p>Enabling the <span class="html"><samp><b>DIAGNOSTIC</b></samp></span> mode simulates the installation of eight HP 30062-60003 diagnostic test (loopback) cables between channels 0-1, 2-3, etc.,
as required by the multiplexer diagnostic.
Each cable connects the Transmitted Data,
Data Terminal Ready,
and Request to Send lines,
respectively,
of one channel to the Received Data,
Data Set Ready,
and Carrier Detect lines of the other channel,
and vice versa.
In addition,
all sessions are disconnected,
and the multiplexer is detached from the Telnet listening port.
While in diagnostic mode,
the <span class="html"><samp><b>ATTACH MUX</b></samp></span> command is not allowed.
Enabling <span class="html"><samp><b>TERMINAL</b></samp></span> mode allows the multiplexer to be attached to accept incoming connections again.</p>
<p>The <span class="html"><samp><b>LINEORDER</b></samp></span> option specifies the order in which connections are assigned to multiplexer channels.
The arguments may be single channel numbers or ranges of channel numbers of the form <span class="html"><samp><var>m</var><b>-</b><var>n</var></samp></span>.
Telnet connections to the listening port will be assigned to multiplexer channels in the sequence specified.
In the absence of a <span class="html"><samp><b>SET MUX LINEORDER</b></samp></span> command,
connections will be assigned by default in ascending channel order.
The default order may be reestablished by specifying the command <span class="html"><samp><b>SET MUX LINEORDERSET MUX LINEORDER=ALL</b></samp></span>.</p>
<p>A channel may be manually disconnected from its associated Telnet session with the <span class="html"><samp><b>SET MUX DISCONNECT=</b><var>chan</var></samp></span> command.
Otherwise,
the connection will remain open until disconnected either by the Telnet client or a <span class="html"><samp><b>DETACH MUX</b></samp></span> command,
unless the channel is controlled by the Control PCA.
For a serial connection,
the command will drop and then raise the Data Terminal Ready line;
to disconnect the serial port,
include the <span class="html"><samp><b>-C</b></samp></span> switch in the command.</p>
<p>When entering the <span class="html"><samp><b>SC</b></samp></span> option,
specify the lower select code with either device name;
the higher select code will be set automatically,
and the cards will be assigned in the correct order.</p>
<p>Device options that may be specified for the Lower Data PCA are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select codes; default is 40/41</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DEBUG=</b><var>option</var></samp></span></p></td>
<td><p>Enable tracing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NODEBUG</b></samp></span></p></td>
<td><p>Disable tracing; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device</p></td>
</tr>
</tbody>
</table>
<p>Unit options that may be specified for individual Lower Data PCA channels are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>UC</b></samp></span></p></td>
<td><p>Upshift lowercase output characters to uppercase; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>7B</b></samp></span></p></td>
<td><p>Output with high-order bit cleared</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>7P</b></samp></span></p></td>
<td><p>Output with high-order bit cleared, non-printing suppressed</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>8B</b></samp></span></p></td>
<td><p>Output characters without changing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DATASET</b></samp></span></p></td>
<td><p>Enable modem control via the Control PCA</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>NODATASET</b></samp></span></p></td>
<td><p>Disable modem control; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>LOG=</b><var>filename</var></samp></span></p></td>
<td><p>Enable I/O logging</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>NOLOG</b></samp></span></p></td>
<td><p>Disable I/O logging; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISCONNECT</b></samp></span></p></td>
<td><p>Disconnect the channel</p></td>
</tr>
</tbody>
</table>
<p>Each channel may be set to one of four output modes
(<span class="html"><samp><b>UC</b></samp></span>, <span class="html"><samp><b>7B</b></samp></span>, <span class="html"><samp><b>7P</b></samp></span>, or <span class="html"><samp><b>8B</b></samp></span>).
The default mode is <span class="html"><samp><b>UC</b></samp></span> for all channels.
If the multiplexer is used with RTE driver DVS00 and logical driver LDV05,
or DOS driver DVR73 and logical drivers PMT01 or PMT02,
the mode must be changed to <span class="html"><samp><b>7B</b></samp></span> or <span class="html"><samp><b>8B</b></samp></span> to allow ESC, DC1, and ENQ characters to pass through to the terminal.
Alternatively,
the <span class="html"><samp><b>SET CONSOLE PCHAR SCP</b></samp></span> command may be used to redefine the set of printable characters.
Modes <span class="html"><samp><b>UC</b></samp></span> and <span class="html"><samp><b>7P</b></samp></span> are compatible with DVS00 and DVR73 using the default logical driver.</p>
<p id="dataset">The <span class="html"><samp><b>DATASET</b></samp></span> option enables modem control via the corresponding channel on the Control PCA.
When modem control is enabled,
a connected channel that has Data Terminal Ready (command bit C1) high will set Carrier Detect (status bit S2) in the line status,
and a programmed drop of the DTR line will disconnect the Telnet session.
Setting the <span class="html"><samp><b>NODATASET</b></samp></span> option causes DTR transitions to be ignored.</p>
<p>Each channel supports independent I/O logging to a file.
Disabling logging also closes the log file.</p>
<p>A channel may be manually disconnected from its associated Telnet session with the <span class="html"><samp><b>SET MUXLn DISCONNECT</b></samp></span> command.
Otherwise,
the connection will remain open until disconnected either by the Telnet client or a <span class="html"><samp><b>DETACH MUX</b></samp></span> command,
unless the channel is controlled by the Control PCA.
For a serial connection,
the command will drop and then raise the Data Terminal Ready line;
to disconnect the serial port,
include the <span class="html"><samp><b>-C</b></samp></span> switch in the command.</p>
<p>Upper Data PCA device configuration may be displayed with the following commands:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW MUX</b></samp></span></p></td>
<td><p>Display the device configuration</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SHOW MUX LINEORDER</b></samp></span></p></td>
<td><p>Display the channel connection order</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW MUX CONNECTIONS</b></samp></span></p></td>
<td><p>Display the channel connections</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SHOW MUX STATISTICS</b></samp></span></p></td>
<td><p>Display the channel I/O statistics for the active connections</p></td>
</tr>
</tbody>
</table>
<p>Lower Data PCA unit configuration may be displayed with the following commands:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW MUXL</b><var>n</var></samp></span></p></td>
<td><p>Display the selected channel’s configuration</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SHOW MUXL</b><var>n</var> <b>LOG</b></samp></span></p></td>
<td><p>Display the selected channel’s logging status</p></td>
</tr>
</tbody>
</table>
<p>In addition to the current configuration settings,
a channel controlled by the Control PCA will be marked <strong>data set</strong> in the listing;
a channel not controlled will be marked <strong>direct</strong>.</p>
<p>When a debug log has been established,
tracing of the Upper Data PCA device may be configured by specifying one or more of these reporting level options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CSRW</b></samp></span></p></td>
<td><p>Control, status, read, and write actions</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>PSERV</b></samp></span></p></td>
<td><p>Poll unit service events (periodic)</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>Tracing of the Lower Data PCA device may be configured by specifying these options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CSRW</b></samp></span></p></td>
<td><p>Control, status, read, and write actions</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SERV</b></samp></span></p></td>
<td><p>Channel unit service events</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>XFER</b></samp></span></p></td>
<td><p>Data receptions and transmissions</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>CSRW</b></samp></span> option traces control, status, read, and write commands sent to the interface.
The <span class="html"><samp><b>PSERV</b></samp></span> option traces poll unit service scheduling and entries.
The poll service is entered once every 10 milliseconds to poll for new Telnet or serial connections and for input characters to be received by the active channels.
The <span class="html"><samp><b>SERV</b></samp></span> option traces channel output service scheduling and entries.
The <span class="html"><samp><b>XFER</b></samp></span> option traces the words received and transmitted via the multiplexer channels.
The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned via the interface.</p>
<p>Examples of the trace formats follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span><span class="n">MUX</span>   <span class="n">csrw</span><span class="p">:</span> <span class="n">Channel</span> <span class="mi">0</span> <span class="ow">is</span> <span class="n">selected</span>
<span class="o">&gt;&gt;</span><span class="n">MUX</span>   <span class="n">csrw</span><span class="p">:</span> <span class="n">Status</span> <span class="ow">is</span> <span class="n">channel</span> <span class="mi">0</span> <span class="o">|</span> <span class="n">receive</span>
<span class="o">&gt;&gt;</span><span class="n">MUXL</span>  <span class="n">csrw</span><span class="p">:</span> <span class="n">Parameter</span> <span class="ow">is</span> <span class="n">send</span> <span class="o">|</span> <span class="n">enable</span> <span class="n">parity</span><span class="o">/</span><span class="n">echo</span> <span class="o">|</span> <span class="mi">11</span> <span class="n">bits</span> <span class="o">|</span> <span class="mi">110</span> <span class="n">baud</span>
<span class="o">&gt;&gt;</span><span class="n">MUXL</span>  <span class="n">csrw</span><span class="p">:</span> <span class="n">Channel</span> <span class="mi">0</span> <span class="n">receive</span> <span class="n">parameter</span> <span class="mi">131202</span> <span class="n">stored</span>
<span class="o">&gt;&gt;</span><span class="n">MUXL</span>  <span class="n">csrw</span><span class="p">:</span> <span class="n">Channel</span> <span class="mi">0</span> <span class="n">send</span> <span class="n">interrupt</span> <span class="n">requested</span>
<span class="o">&gt;&gt;</span><span class="n">MUX</span>  <span class="n">pserv</span><span class="p">:</span> <span class="n">Poll</span> <span class="n">delay</span> <span class="mi">15773</span> <span class="n">service</span> <span class="n">entered</span>
<span class="o">&gt;&gt;</span><span class="n">MUXL</span>  <span class="n">serv</span><span class="p">:</span> <span class="n">Channel</span> <span class="mi">0</span> <span class="n">delay</span> <span class="mi">500</span> <span class="n">service</span> <span class="n">scheduled</span>
<span class="o">&gt;&gt;</span><span class="n">MUXL</span>  <span class="n">serv</span><span class="p">:</span> <span class="n">Channel</span> <span class="mi">0</span> <span class="n">service</span> <span class="n">entered</span>
<span class="o">&gt;&gt;</span><span class="n">MUXL</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Channel</span> <span class="mi">0</span> <span class="n">character</span> <span class="s1">&#39;R&#39;</span> <span class="n">sent</span>
<span class="o">&gt;&gt;</span><span class="n">MUXL</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Channel</span> <span class="mi">0</span> <span class="n">character</span> <span class="n">LF</span> <span class="n">sent</span>
<span class="o">&gt;&gt;</span><span class="n">MUXL</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Channel</span> <span class="mi">0</span> <span class="n">character</span> <span class="s1">&#39;H&#39;</span> <span class="n">received</span>
<span class="o">&gt;&gt;</span><span class="n">MUXL</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Channel</span> <span class="mi">2</span> <span class="k">break</span> <span class="n">detected</span>
<span class="o">&gt;&gt;</span><span class="n">MUXL</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">114015</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">SFS</span> <span class="o">|</span> <span class="n">PRH</span>
<span class="o">&gt;&gt;</span><span class="n">MUXL</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">114015</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">SKF</span> <span class="o">|</span> <span class="n">PRL</span>
<span class="o">&gt;&gt;</span><span class="n">MUX</span>  <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">IOI</span>
<span class="o">&gt;&gt;</span><span class="n">MUX</span>  <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">000001</span> <span class="k">with</span> <span class="n">signals</span> <span class="p">(</span><span class="n">none</span><span class="p">)</span>
</pre></div>
</div>
<p>The Upper Data PCA state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>IBUF</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Input buffer; holds channel status</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>OBUF</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Output buffer; hold channel select</p></td>
</tr>
</tbody>
</table>
<p>The Lower Data PCA state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Symbolic</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Control flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Flag buffer flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>STA</b></samp></span> [0:20]</p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Receive channel status, channels 0-20</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>RPAR</b></samp></span> [0:20]</p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Receive channel parameters, channels 0-20</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>XPAR</b></samp></span> [0:15]</p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Transmit channel parameters, channels 0-15</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>RBUF</b></samp></span> [0:20]</p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td><p>Receive channel buffers, channels 0-20</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>XBUF</b></samp></span> [0:15]</p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td><p>Transmit channel buffers, channels 0-15</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>RCHP</b></samp></span> [0:20]</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Receive channel character present, channels 0-20</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>XDON</b></samp></span> [0:15]</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Transmit channel done, channels 0-15</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>BDFR</b></samp></span> [0:15]</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Receive channel break deferred, channels 0-15</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>TIME</b></samp></span> [0:15]</p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Transmit channel time, channels 0-15</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>RBUF</b></samp></span> and <span class="html"><samp><b>XBUF</b></samp></span> registers default to single-character format display and entry,
but may be overridden with numeric-format switches,
if desired.</p>
</section>
<section id="control-pca">
<h4><span class="sectnum">1.4.11.2. </span>Control PCA<a class="headerlink" href="#control-pca" title="Permalink to this heading">¶</a></h4>
<p>The Control PCA provides the Request to Send (CA) and Data Terminal Ready (CD) control lines,
and the Data Set Ready (CC) and Carrier Detect (CF) status lines for each of sixteen terminals or data sets.
The modem controls model the Bell 103A data set without ring detection.</p>
<p>A new Telnet connection sets Data Set Ready and is established whether Data Terminal Ready is set or not.</p>
<p>Control PCA device options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select code; default is 42</p></td>
</tr>
</tbody>
</table>
<p>The Control PCA is usually installed in the slot above the Upper Data PCA,
but this is not required.</p>
<p>There are no Control PCA units or unit commands.</p>
<p>Control PCA device configuration may be displayed with the following commands:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW MUXC</b></samp></span></p></td>
<td><p>Display the device configuration</p></td>
</tr>
</tbody>
</table>
<p>When a debug log has been established,
tracing may be configured by specifying one or more of the reporting level options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CSRW</b></samp></span></p></td>
<td><p>Control, status, read, and write actions</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>XFER</b></samp></span></p></td>
<td><p>Control and status line changes</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>CSRW</b></samp></span> option traces control, status, read, and write commands sent to the interface.
The <span class="html"><samp><b>XFER</b></samp></span> option traces the changes in control and status lines by the active channels.
The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned via the interface.</p>
<p>Examples of the trace formats follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span><span class="n">MUXC</span>  <span class="n">csrw</span><span class="p">:</span> <span class="n">Status</span> <span class="ow">is</span> <span class="n">channel</span> <span class="mi">0</span> <span class="o">|</span> <span class="n">I2</span> <span class="o">|</span> <span class="n">I1</span> <span class="o">|</span> <span class="n">ES2</span> <span class="o">|</span> <span class="n">ES1</span> <span class="o">|</span> <span class="o">~</span><span class="n">S2</span> <span class="o">|</span> <span class="o">~</span><span class="n">S1</span>
<span class="o">&gt;&gt;</span><span class="n">MUXC</span>  <span class="n">csrw</span><span class="p">:</span> <span class="n">Control</span> <span class="ow">is</span> <span class="n">channel</span> <span class="mi">0</span> <span class="o">|</span> <span class="n">update</span> <span class="o">|</span> <span class="o">~</span><span class="n">C2</span> <span class="o">|</span> <span class="o">~</span><span class="n">C1</span> <span class="o">|</span> <span class="n">ES2</span> <span class="o">|</span> <span class="n">ES1</span> <span class="o">|</span> <span class="n">S2</span> <span class="o">|</span> <span class="n">S1</span>
<span class="o">&gt;&gt;</span><span class="n">MUXC</span>  <span class="n">csrw</span><span class="p">:</span> <span class="n">Channel</span> <span class="mi">1</span> <span class="n">disconnected</span> <span class="n">by</span> <span class="n">DTR</span> <span class="n">drop</span>
<span class="o">&gt;&gt;</span><span class="n">MUXC</span>  <span class="n">csrw</span><span class="p">:</span> <span class="n">Channel</span> <span class="mi">1</span> <span class="n">interrupt</span> <span class="n">requested</span>
<span class="o">&gt;&gt;</span><span class="n">MUXC</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Channel</span> <span class="mi">0</span> <span class="n">connected</span>
<span class="o">&gt;&gt;</span><span class="n">MUXC</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Channel</span> <span class="mi">0</span> <span class="n">line</span> <span class="n">status</span> <span class="ow">is</span> <span class="n">RTS</span> <span class="o">|</span> <span class="n">DTR</span>
<span class="o">&gt;&gt;</span><span class="n">MUXC</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Channel</span> <span class="mi">0</span> <span class="n">disconnect</span> <span class="n">dropped</span> <span class="n">DCD</span> <span class="ow">and</span> <span class="n">DSR</span>
<span class="o">&gt;&gt;</span><span class="n">MUXC</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">031374</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">IOO</span>
<span class="o">&gt;&gt;</span><span class="n">MUXC</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">141414</span> <span class="k">with</span> <span class="n">signals</span> <span class="p">(</span><span class="n">none</span><span class="p">)</span>
</pre></div>
</div>
<p>The Control PCA state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Control flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag buffer flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SCAN</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Scan flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CHAN</b></samp></span></p></td>
<td><p>4</p></td>
<td><p>8</p></td>
<td><p>Current channel number</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DSO</b></samp></span> [0:15]</p></td>
<td><p>6</p></td>
<td><p>2</p></td>
<td><p>Control lines C2, C1, ES2, ES1, SS2, and SS1, channels 0-15</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DSI</b></samp></span> [0:15]</p></td>
<td><p>2</p></td>
<td><p>2</p></td>
<td><p>Status lines S2 and S1, channels 0-15</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="a-buffered-asynchronous-communications-interface">
<h3><span class="sectnum">1.4.12. </span>12966A Buffered Asynchronous Communications Interface<a class="headerlink" href="#a-buffered-asynchronous-communications-interface" title="Permalink to this heading">¶</a></h3>
<p>The 12966A Buffered Asynchronous Communications Interface card supplanted the 12531C Teletype and 12880A CRT interfaces as the primary terminal connection for HP computer systems.
The main advantage of this card over the others was its 128-character FIFO memory.
While this allowed more efficient I/O than its interrupt-per-character predecessors,
the most significant improvement was that block input from the 264x-series of CRT terminals was supported.
The 264x were the first HP-supported terminals to provide local editing and character storage,
as well as mass storage via dual DC-100 minicartridge drives.
This support meant that input from the terminal could come in bursts at the full baud rate,
which would overrun the older cards that needed a small intercharacter handling time.
The older cards also placed a substantial load on the CPU in high-baud-rate output applications.</p>
<p>The BACI simulator performs input and output through a Telnet session connected to a user-specified port or through a specified host serial port.
The <a class="reference internal" href="#attach"><span class="html"><samp><b>ATTACH</b></samp></span></a> command specifies the local port to be used for Telnet connections:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="n">BACI</span> <span class="o">&lt;</span><span class="n">port</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>…where <code class="docutils literal notranslate"><span class="pre">port</span></code> is a decimal number between 1 and 65535 that is not being used for other TCP/IP activities.
When the BACI is attached and the simulator is running,
the BACI listens for connections on the specified port.
Only one connection at a time is permitted.</p>
<p>The <span class="html"><samp><b>ATTACH</b></samp></span> command is also used to specify a host port for serial connections:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="p">{</span><span class="o">-</span><span class="n">V</span><span class="p">}</span> <span class="n">BACI</span> <span class="n">CONNECT</span><span class="o">=&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="p">{;</span><span class="o">&lt;</span><span class="n">rate</span><span class="o">&gt;-&lt;</span><span class="n">size</span><span class="o">&gt;&lt;</span><span class="n">parity</span><span class="o">&gt;&lt;</span><span class="n">stopbits</span><span class="o">&gt;</span><span class="p">}</span>
</pre></div>
</div>
<p>…where <code class="docutils literal notranslate"><span class="pre">name</span></code> is the host name of the serial port to use (e.g., <em>ser0</em> or <em>COM1</em>).
If the <span class="html"><samp><b>-V</b></samp></span> (verbose) option is included,
a connection confirmation message will be output to the port.</p>
<p>An optional serial port configuration string may be supplied after the host name.
The required values are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rate</span></code> is the baud rate in bits per second.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">size</span></code> is the character size in bits including the parity bit, if designated.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parity</span></code> designates the parity to use: <em>N</em> (no), <em>E</em> (even), <em>O</em> (odd), <em>M</em> (mark), or <em>S</em> (space).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stopbits</span></code> is the number of stop bits (<em>1</em>, <em>1.5</em>, or <em>2</em>).</p></li>
</ul>
<p>Serial connections default to 9600 baud,
8-bit characters,
no parity,
and one stop bit.</p>
<p>While the BACI can connect to generic clients,
RTE drivers for the BACI require the use of HP terminals or terminal emulators.</p>
<p>Device and unit configuration options specify timing and output modes.
The command forms are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">BACI</span> <span class="o">&lt;</span><span class="n">device</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
<span class="n">SET</span> <span class="n">BACI</span> <span class="o">&lt;</span><span class="n">unit</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Device options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>DIAGNOSTIC</b></samp></span></p></td>
<td><p>Connect using a diagnostic test connector</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>TERMINAL</b></samp></span></p></td>
<td><p>Connect using Telnet or a serial port; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FASTTIME</b></samp></span></p></td>
<td><p>Use optimized timing; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>REALTIME</b></samp></span></p></td>
<td><p>Use realistic timing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select code; default is 35</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DEBUG=</b><var>option</var></samp></span></p></td>
<td><p>Enable tracing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NODEBUG</b></samp></span></p></td>
<td><p>Disable tracing; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device</p></td>
</tr>
</tbody>
</table>
<p>Enabling <span class="html"><samp><b>DIAGNOSTIC</b></samp></span> mode simulates the installation of the HP 12966-60003 diagnostic test (loopback) connector onto the 12966A card.
In addition,
any current session is disconnected,
and the BACI is detached from the Telnet listening port.
While in diagnostic mode, the <span class="html"><samp><b>ATTACH BACI</b></samp></span> command is not allowed.
Enabling <span class="html"><samp><b>TERMINAL</b></samp></span> mode simulates the installation of the HP 12966-60008 (264x terminal) connector and RS-232 cable and allows the BACI to be attached to accept an incoming connection again.</p>
<p>The BACI supports fifteen programmable baud rates from 50 to 9600 baud,
as well as an external rate determined by the connected terminal.
With the <span class="html"><samp><b>REALTIME</b></samp></span> option,
the simulation accurately models the transmission and reception baud rates
(in machine instructions).
For example,
setting the interface to 1200 baud will take twice as long to output a given listing as setting the interface to 2400 baud.
Enabling optimized timing with the <span class="html"><samp><b>FASTTIME</b></samp></span> option reduces the timing to the minimum necessary to operate correctly;
this is much faster than the real BACI would operate.</p>
<p>Setting the BACI to fast timing also enables three optimizations.
First, buffered characters are transferred via Telnet in blocks,
rather than a character at a time.
Second, ENQ/ACK handshaking is done locally,
without involving the Telnet client.
Third, reception of characters entered during output operations is delayed until after the first ENQ/ACK handshake at the end of the line;
this significantly improves break-mode response under RTE.</p>
<p>Unit options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CAPSLOCK</b></samp></span></p></td>
<td><p>Upshift lowercase input characters to uppercase</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>NOCAPSLOCK</b></samp></span></p></td>
<td><p>Input characters are unchanged; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>LOG=</b><var>filename</var></samp></span></p></td>
<td><p>Enable I/O logging</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>NOLOG</b></samp></span></p></td>
<td><p>Disable I/O logging; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISCONNECT</b></samp></span></p></td>
<td><p>Disconnect the connection</p></td>
</tr>
</tbody>
</table>
<p>Many HP operating systems require command input in uppercase,
although mixed-case output is supported.
As an aid to avoid toggling the host keyboard in and out of CAPS LOCK mode,
the BACI provides this function locally.
The default mode is <span class="html"><samp><b>NOCAPSLOCK</b></samp></span>.</p>
<p>The BACI supports I/O logging to a file.
Disabling logging also closes the log file.</p>
<p>The BACI may be manually disconnected from its associated Telnet session with the <span class="html"><samp><b>SET BACI DISCONNECT</b></samp></span> command.
Otherwise,
the connection will remain open until disconnected either by the Telnet client or a <span class="html"><samp><b>DETACH BACI</b></samp></span> command.
For a serial connection,
the command will drop and then raise the Data Terminal Ready line;
to disconnect the serial port,
include the <span class="html"><samp><b>-C</b></samp></span> switch in the command.</p>
<p>Device configuration may be displayed with the following commands:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW BACI</b></samp></span></p></td>
<td><p>Display the device and unit configuration</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SHOW BACI CONNECTION</b></samp></span></p></td>
<td><p>Display the active connection status</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW BACI STATISTICS</b></samp></span></p></td>
<td><p>Display the I/O statistics for the active connection</p></td>
</tr>
</tbody>
</table>
<p>When a debug log has been established,
tracing may be configured by specifying one or more of the reporting level options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CMDS</b></samp></span></p></td>
<td><p>Command initiations and completions</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CPU</b></samp></span></p></td>
<td><p>Words received from and sent to the CPU</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>BUF</b></samp></span></p></td>
<td><p>Data read from and written to the FIFO</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>XFER</b></samp></span></p></td>
<td><p>Data receptions and transmissions</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>CMDS</b></samp></span> option traces the commands executed by the interface.
The <span class="html"><samp><b>CPU</b></samp></span> option traces words received from (control and write data) and sent to (status and read data) the CPU.
The <span class="html"><samp><b>BUF</b></samp></span> option traces gets from and puts to the internal FIFO buffers.
The <span class="html"><samp><b>XFER</b></samp></span> option traces the words received and transmitted via the Telnet or serial connection.
The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned via the interface.</p>
<p>Examples of the trace formats follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span><span class="n">BACI</span>  <span class="n">cmds</span><span class="p">:</span> <span class="p">[</span><span class="n">STF</span><span class="p">]</span> <span class="n">Flag</span><span class="p">,</span> <span class="n">SRQ</span><span class="p">,</span> <span class="ow">and</span> <span class="n">lockout</span> <span class="nb">set</span>
<span class="o">&gt;&gt;</span><span class="n">BACI</span>   <span class="n">cpu</span><span class="p">:</span> <span class="p">[</span><span class="n">Lix</span><span class="p">,</span><span class="n">C</span><span class="p">]</span> <span class="n">Received</span> <span class="n">data</span> <span class="o">=</span> <span class="mi">102042</span>
<span class="o">&gt;&gt;</span><span class="n">BACI</span>   <span class="n">buf</span><span class="p">:</span> <span class="n">Character</span> <span class="n">LF</span> <span class="n">put</span> <span class="n">to</span> <span class="n">FIFO</span> <span class="p">[</span><span class="mi">29</span><span class="p">],</span> <span class="n">character</span> <span class="n">counter</span> <span class="o">=</span> <span class="mi">53</span>
<span class="o">&gt;&gt;</span><span class="n">BACI</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Character</span> <span class="s1">&#39;R&#39;</span> <span class="n">transmitted</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">UART</span>
<span class="o">&gt;&gt;</span><span class="n">BACI</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">STF</span> <span class="o">|</span> <span class="n">SIR</span>
<span class="o">&gt;&gt;</span><span class="n">BACI</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="p">(</span><span class="n">none</span><span class="p">)</span>
</pre></div>
</div>
<p>The BACI state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Symbolic</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>IBUF</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td><p>Input buffer; holds line status</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>OBUF</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td><p>Output buffer; hold channel select</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>STATUS</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Card status word</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>EDSIW</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Enable device status interrupt word</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DSRW</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Device status reference word</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CFCW</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Character frame control word</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>ICW</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Interface control word</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ISRW</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Interrupt status reset word</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FIFOPUT</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>10</p></td>
<td></td>
<td><p>FIFO load index</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FIFOGET</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>10</p></td>
<td></td>
<td><p>FIFO unload index</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FIFOCNTR</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>10</p></td>
<td></td>
<td><p>FIFO character counter</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>BRKCNTR</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>10</p></td>
<td></td>
<td><p>BREAK clock counter</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FIFO</b></samp></span> [0:127]</p></td>
<td><p>8</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td><p>FIFO buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SPCHAR</b></samp></span> [0:255]</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Special character RAM</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>UARTTHR</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td><p>UART transmitter holding register</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>UARTTR</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td><p>UART transmitter register</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>UARTRHR</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td><p>UART receiver holding register</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>UARTRR</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td><p>UART receiver register</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>UARTCLK</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>10</p></td>
<td></td>
<td><p>UART transmitter/receiver clock counter</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CTIME</b></samp></span></p></td>
<td><p>19</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Inter-character poll time</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>LKO</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Interface interrupt lockout flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Interface control flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Interface flag flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Interface flag buffer flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SRQ</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Interface DMA service request flip-flop</p></td>
</tr>
</tbody>
</table>
<p>The FIFO register defaults to single-character format display and entry,
but may be overridden with a numeric-format switch,
if desired.
The other symbolic registers default to octal display,
but may be displayed in single-character format by specifying the <span class="html"><samp><b>-A</b></samp></span> switch.
Symbolic entry for these registers is also supported.</p>
</section>
</section>
<section id="disc-i-o-device-simulations">
<h2><span class="sectnum">1.5. </span>Disc I/O device simulations<a class="headerlink" href="#disc-i-o-device-simulations" title="Permalink to this heading">¶</a></h2>
<p>The simulator provides these disc interfaces and their associated peripherals:</p>
<ul class="simple">
<li><p>12557A Cartridge Disc Interface</p></li>
<li><p>13210A Disc Drive Interface</p></li>
<li><p>12565A Disc Interface</p></li>
<li><p>12606B Disc Memory Interface</p></li>
<li><p>12610B Drum Memory Interface</p></li>
<li><p>12821A Disc Interface</p></li>
<li><p>13175D Disc Controller Interface</p></li>
</ul>
<section id="a-cartridge-disc-interface-with-four-2870-drives-13210a-disc-drive-interface-with-four-7900-drives">
<span id="a-disc-drive-interface-with-four-7900-drives"></span><span id="a-cartridge-disc-interface-with-four-2870-drives"></span><h3><span class="sectnum">1.5.1. </span>12557A Cartridge Disc Interface with four 2870 drives, 13210A Disc Drive Interface with four 7900 drives<a class="headerlink" href="#a-cartridge-disc-interface-with-four-2870-drives-13210a-disc-drive-interface-with-four-7900-drives" title="Permalink to this heading">¶</a></h3>
<p>The 12557A Cartridge Disc Interface connects from one to four HP 2870A (2.5 MB) disc drives to the HP computer family.
The 13210A Disc Drive Interface connects from one to four HP 7900A (5.0 MB) disc drives.
Both interfaces consist of two Printed Circuit Assemblies installed in adjacent I/O slots.
The Data PCA is assigned the higher-priority (lower numbered) select code,
and the Control PCA is assigned the lower-priority select code.
The DPD and DPC devices simulate these PCAs.</p>
<p>Attaching a disc image file to a unit simulates inserting a disc pack into a drive:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="p">{</span><span class="o">-</span><span class="n">R</span> <span class="o">|</span> <span class="o">-</span><span class="n">N</span><span class="p">}</span> <span class="n">DPCn</span> <span class="o">&lt;</span><span class="n">image</span><span class="o">-</span><span class="n">filename</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Adding the <span class="html"><samp><b>-R</b></samp></span> (read-only) switch is equivalent to setting the drive’s Upper and Lower Data Protect switches to the <em>On</em> position.
Adding the <span class="html"><samp><b>-N</b></samp></span> (new file) switch creates a full-size image file,
equivalent to formatting the new disc before use.</p>
<p>If the host operating system returns an error when reading or writing a disc image file,
the simulator will report the error to the simulation console, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HP</span> <span class="mi">2100</span> <span class="n">simulator</span> <span class="n">DP</span> <span class="n">disc</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span> <span class="n">error</span><span class="p">:</span> <span class="n">No</span> <span class="n">space</span> <span class="n">left</span> <span class="n">on</span> <span class="n">device</span>
</pre></div>
</div>
<p>…and the simulation will stop with an <strong>I/O Error</strong> message.
No error recovery is attempted.</p>
<p>A drive’s unit number is not set explicitly.
Instead,
the drive unit number is derived from the simulation unit number.
For example,
unit DPC0 responds to drive select number 0.
Changing the drive select jumpers on a mounted drive is simulated by detaching and reattaching the disc image file to the corresponding simulation unit.</p>
<p>Device and unit options include configuring the interface and drive type,
protection and format status,
and the ability to set drives ready or not-ready.
The command forms are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">DPC</span> <span class="o">&lt;</span><span class="n">device</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
<span class="n">SET</span> <span class="n">DPCn</span> <span class="o">&lt;</span><span class="n">unit</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Device options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>12557A</b></samp></span></p></td>
<td><p>Use the 12557A interface and 2870A drives</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>13210A</b></samp></span></p></td>
<td><p>Use the 13210A interface and 7900A drives; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select codes; default is 22/23</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>12557A</b></samp></span> and <span class="html"><samp><b>13210A</b></samp></span> options set the interface type and,
by implication,
the disc drive type.</p>
<p>When entering the <span class="html"><samp><b>SC</b></samp></span> option,
specify the lower select code with either device name;
the higher select code will be set automatically,
and the cards will be assigned in the correct order.</p>
<p>Device configuration may be displayed with the following commands:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW DPC</b></samp></span></p></td>
<td><p>Display the device and unit configuration</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SHOW DPC TYPE</b></samp></span></p></td>
<td><p>Display the interface type</p></td>
</tr>
</tbody>
</table>
<p>Unit options that may be specified for the individual disc drives are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>UNLOAD</b></samp></span></p></td>
<td><p>Set the drive’s Run/Stop switch to <em>Stop</em>; default when detached</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>LOAD</b></samp></span></p></td>
<td><p>Set the drive’s Run/Stop switch to <em>Run</em>; default when attached</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>PROTECT</b></samp></span></p></td>
<td><p>Set the drive’s Data Protect switches to <em>On</em></p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>UNPROTECT</b></samp></span></p></td>
<td><p>Set the drive’s Data Protect switches to <em>Off</em>; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the unit; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the unit</p></td>
</tr>
</tbody>
</table>
<p id="unload">The <span class="html"><samp><b>UNLOAD</b></samp></span> and <span class="html"><samp><b>LOAD</b></samp></span> options unload and load the drive’s heads from the disc pack,
setting the drive not-ready and ready,
respectively.
<span class="html"><samp><b>UNLOAD</b></samp></span> provides a convenient method of setting a drive “down” without detaching the associated disc image file.</p>
<p id="unprotect"><span id="protect"></span>The <span class="html"><samp><b>PROTECT</b></samp></span> option prevents writing to the disc.
It is the hardware equivalent of setting the Upper and Lower Data Protect switches to the <em>On</em> position.
The <span class="html"><samp><b>UNPROTECT</b></samp></span> option permits writing and is equivalent to setting the switches to <em>Off</em>.
Separate protection for the upper and lower platters of the 7900 drive is not supported.
Also, the drive Protect/Override switch is not supported;
drive protection is permanently overridden.</p>
<p>The interface supports the <span class="html"><samp><b>LOAD {-R} DPC</b></samp></span> and <span class="html"><samp><b>BOOT{-R} DPC</b></samp></span> commands to load a disc boot extension into memory.
Depending on the current CPU model,
the <span class="html"><samp><b>LOAD</b></samp></span> command copies either the Basic Moving-Head Disc Loader (BMDL-7900) or the 12992F boot loader ROM into memory,
configures it for the Data interface’s select code,
and sets the P register to the loader’s starting address.
The <span class="html"><samp><b>BOOT</b></samp></span> command performs these same actions and then presets the system and begins execution.
For either command,
if the <span class="html"><samp><b>-R</b></samp></span> switch is specified,
the boot extension will be read from the removable platter.
If <span class="html"><samp><b>-R</b></samp></span> is not specified,
then the boot extension will be read from the fixed platter.</p>
<p>For a 2100/14/15/16 CPU containing a previously configured BMDL in memory,
the commands are equivalent in hardware to setting the P register to the starting address,
pressing the <span class="html"><samp class="guilabel"><b>LOADER ENABLE</b></samp></span> button on the front panel,
and, for the <span class="html"><samp><b>BOOT</b></samp></span> command,
pressing the <span class="html"><samp class="guilabel"><b>INTERNAL PRESET</b></samp></span>, <span class="html"><samp class="guilabel"><b>EXTERNAL PRESET</b></samp></span>, and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> buttons to begin execution.
The S register value is not relevant for this loader.</p>
<p>The BMDL is a dual-purpose loader that also permits loading an absolute binary program from the paper tape reader.
When the loader is copied into memory,
the disc portion is configured for the select code of the Data interface,
and the paper tape portion is configured for the select code of the paper tape reader interface.
The P register is automatically set to the starting address of the disc portion,
which starts at x7750
(i.e., offset 1750 within the highest page in memory).
The loader reads 6144 words (for the 7900A) or 3027 words (for the 2870A) from cylinder 0 sector 0 of the specified subchannel into memory starting at location 2011 octal.
Loader execution ends with the following instruction:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">JSB</span> <span class="pre">2055,I</span></code> — the disc read completed.</p></li>
</ul>
<p>Normal completion status is End of Cylinder and Any Error (000041 octal).</p>
<p>To execute the paper tape portion,
the P register may be reset to x7700 (offset 1700).
Loader execution ends with one of the following halt instructions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 11</span></code> — a checksum error occurred; <em>A</em> = the tape value, <em>B</em> = the calculated value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 55</span></code> — the program load address would overlay the loader.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 77</span></code> — the end of tape was reached with a successful read.</p></li>
</ul>
<p>For a 1000 M/E/F-Series CPU,
the commands are equivalent in hardware to setting the S register to select and configure the HP 12992F boot loader ROM,
pressing the <span class="html"><samp class="guilabel"><b>IBL</b></samp></span> button to copy the ROM into memory,
and, for the <span class="html"><samp><b>BOOT</b></samp></span> command,
pressing the <span class="html"><samp class="guilabel"><b>PRESET</b></samp></span> and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> buttons to begin execution.
The S register is preset as follows:</p>
<table class="bitmask-layout docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>15</p></th>
<th class="head"><p>14</p></th>
<th class="head"><p>13</p></th>
<th class="head"><p>12</p></th>
<th class="head"><p>11</p></th>
<th class="head"><p>10</p></th>
<th class="head"><p>9</p></th>
<th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>0</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td colspan="6"><p>DPD select code</p></td>
<td colspan="3"><p>unchanged</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>⬤</p></td>
</tr>
</tbody>
</table>
<p>If the <span class="html"><samp><b>-R</b></samp></span> switch is specified,
bit 0 is set to 1 to boot from the removable platter.
If <span class="html"><samp><b>-R</b></samp></span> is not specified,
then bit 0 is set to 0 to boot from the fixed platter.
Bits 5-3 of the existing S-register value are retained when the loader is executed and are available to the boot extension program.</p>
<p>The loader reads 6144 words from cylinder 0 sector 0 of the specified subchannel into memory starting at location 2011 octal.
Loader execution ends with one of the following instructions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HLT</span> <span class="pre">30</span></code> — a drive fault occurred; enter the <a class="reference internal" href="#go"><span class="html"><samp class="guilabel"><b>GO</b></samp></span></a> command to retry.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">JSB</span> <span class="pre">2055,I</span></code> — the disc read succeeded.</p></li>
</ul>
<p>When a debug log has been established,
tracing may be configured for each card separately by specifying the reporting level option:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned by the interface.</p>
<p>The Data PCA state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>IBUF</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Input buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>OBUF</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Output buffer</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DBUF</b></samp></span> [0:127]</p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Sector buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>BPTR</b></samp></span></p></td>
<td><p>7</p></td>
<td><p>10</p></td>
<td><p>Sector buffer pointer</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CMD</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Command flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Control flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag buffer flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>XFER</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Transfer in progress flag</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>WVAL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Write data valid flag</p></td>
</tr>
</tbody>
</table>
<p>The Control PCA state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Read-only</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>OBUF</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Output buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>BUSY</b></samp></span></p></td>
<td><p>4</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td><p>Busy unit number + 1</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CNT</b></samp></span></p></td>
<td><p>5</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Check record counter</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CMD</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Command flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Control flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Flag buffer flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>EOC</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>End of cylinder pending</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>POLL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Attention polling enabled</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>RARC</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Record address register (cylinder)</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>RARH</b></samp></span></p></td>
<td><p>2</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Record address register (head)</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>RARS</b></samp></span></p></td>
<td><p>4</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Record address register (sector)</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CYL</b></samp></span> [0:3]</p></td>
<td><p>8</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Current cylinder, drives 0-3</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>STA</b></samp></span> [0:3]</p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Drive status, drives 0-3</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Data transfer command delay time</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Data channel command delay time</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>STIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Seek delay time, per cylinder</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>XTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Inter-word transfer time</p></td>
</tr>
</tbody>
</table>
</section>
<section id="a-disc-interface-with-two-2883-drives">
<h3><span class="sectnum">1.5.2. </span>12565A Disc Interface with two 2883 drives<a class="headerlink" href="#a-disc-interface-with-two-2883-drives" title="Permalink to this heading">¶</a></h3>
<p>The 12565A Disc Interface connects one or two HP 2883A (23 MB) disc drives to the HP computer family.
The interface consists of two Printed Circuit Assemblies installed in adjacent I/O slots.
The Data PCA is assigned the higher-priority (lower numbered) select code,
and the Control PCA is assigned the lower-priority select code.
The DQD and DQC devices simulate these PCAs.</p>
<p>Attaching a disc image file to a unit simulates inserting a disc pack into a drive:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="p">{</span><span class="o">-</span><span class="n">R</span> <span class="o">|</span> <span class="o">-</span><span class="n">N</span><span class="p">}</span> <span class="n">DQCn</span> <span class="o">&lt;</span><span class="n">image</span><span class="o">-</span><span class="n">filename</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Adding the <span class="html"><samp><b>-R</b></samp></span> (read-only) switch prevents writing to the disc image.
Adding the <span class="html"><samp><b>-N</b></samp></span> (new file) switch creates a full-size image file,
equivalent to formatting the new disc before use.</p>
<p>If the host operating system returns an error when reading or writing a disc image file,
the simulator will report the error to the simulation console, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HP</span> <span class="mi">2100</span> <span class="n">simulator</span> <span class="n">DQ</span> <span class="n">disc</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span> <span class="n">error</span><span class="p">:</span> <span class="n">No</span> <span class="n">space</span> <span class="n">left</span> <span class="n">on</span> <span class="n">device</span>
</pre></div>
</div>
<p>…and the simulation will stop with an <strong>I/O Error</strong> message.
No error recovery is attempted.</p>
<p>A drive’s unit number is not set explicitly.
Instead,
the drive unit number is derived from the simulation unit number.
For example,
unit DQC0 responds to drive select number 0.
Changing the drive select jumpers on a mounted drive is simulated by detaching and reattaching the disc image file to the corresponding simulation unit.</p>
<p>Device and unit options include configuring the protection and drive-ready status.
The command forms are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">DQC</span> <span class="o">&lt;</span><span class="n">device</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
<span class="n">SET</span> <span class="n">DQCn</span> <span class="o">&lt;</span><span class="n">unit</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Device options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select codes; default is 24/25</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device</p></td>
</tr>
</tbody>
</table>
<p>When entering the <span class="html"><samp><b>SC</b></samp></span> option,
specify the lower select code with either device name;
the higher select code will be set automatically,
and the cards will be assigned in the correct order.</p>
<p>Device configuration may be displayed with the following command:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW DQC</b></samp></span></p></td>
<td><p>Display the device and unit configuration</p></td>
</tr>
</tbody>
</table>
<p>Unit options that may be specified for individual disc drives are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>UNLOAD</b></samp></span></p></td>
<td><p>Set the drive’s Run/Stop switch to <em>Stop</em>; default when detached</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>LOAD</b></samp></span></p></td>
<td><p>Set the drive’s Run/Stop switch to <em>Run</em>; default when attached</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>PROTECT</b></samp></span></p></td>
<td><p>Prohibit writing to the drive</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>UNPROTECT</b></samp></span></p></td>
<td><p>Permit writing to the drive; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the unit; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the unit</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>UNLOAD</b></samp></span> and <span class="html"><samp><b>LOAD</b></samp></span> options unload and load the drive’s heads from the disc pack,
setting the drive not-ready and ready,
respectively.
<span class="html"><samp><b>UNLOAD</b></samp></span> provides a convenient method of setting a drive “down” without detaching the associated disc image file.</p>
<p>The <span class="html"><samp><b>PROTECT</b></samp></span> option prevents writing to the disc,
and the <span class="html"><samp><b>UNPROTECT</b></samp></span> option permits writing.
These options have no hardware analog;
writing is always permitted on the 2883A.
Also, the drive Format switch is not supported;
drive address protection is permanently overridden.</p>
<p>The interface supports the <span class="html"><samp><b>LOAD DQC</b></samp></span> and <span class="html"><samp><b>BOOT DQC</b></samp></span> commands to load a disc boot extension into memory.
Depending on the current CPU model,
the <span class="html"><samp><b>LOAD</b></samp></span> command copies either the Basic Moving-Head Disc Loader (BMDL-2883) or the 12992A boot loader ROM into memory,
configures it for the Data interface’s select code,
and sets the P register to the loader’s starting address.
The <span class="html"><samp><b>BOOT</b></samp></span> command performs these same actions and then presets the system and begins execution.</p>
<p>For a 2100/14/15/16 CPU containing a previously configured BMDL in memory,
the commands are equivalent in hardware to setting the P register to the starting address,
pressing the <span class="html"><samp class="guilabel"><b>LOADER ENABLE</b></samp></span> button on the front panel,
and, for the <span class="html"><samp><b>BOOT</b></samp></span> command,
pressing the <span class="html"><samp class="guilabel"><b>INTERNAL PRESET</b></samp></span>, <span class="html"><samp class="guilabel"><b>EXTERNAL PRESET</b></samp></span>, and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> buttons to begin execution.
The S register value is not relevant for this loader.</p>
<p>The BMDL is a dual-purpose loader that also permits loading an absolute binary program from the paper tape reader.
When the loader is copied into memory,
the disc portion is configured for the select code of the Data interface,
and the paper tape portion is configured for the select code of the paper tape reader interface.
The P register is automatically set to the starting address of the disc portion,
which starts at x7750
(i.e., offset 1750 within the highest page in memory).
The loader reads 128 words from cylinder 0 head 0 sector 0 into memory starting at location 2011 octal.
Loader execution ends with the following instruction:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">JMP</span> <span class="pre">2055,I</span></code> — the disc read completed.</p></li>
</ul>
<p>To execute the paper tape portion,
the P register may be reset to x7700 (offset 1700).
Loader execution ends with one of the following halt instructions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 11</span></code> — a checksum error occurred; <em>A</em> = the tape value, <em>B</em> = the calculated value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 55</span></code> — the program load address would overlay the loader.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 77</span></code> — the end of tape was reached with a successful read.</p></li>
</ul>
<p>For a 1000 M/E/F-Series CPU,
the commands are equivalent in hardware to setting the S register to select and configure the HP 12992A boot loader ROM,
pressing the <span class="html"><samp class="guilabel"><b>IBL</b></samp></span> button to copy the ROM into memory,
and, for the <span class="html"><samp><b>BOOT</b></samp></span> command,
pressing the <span class="html"><samp class="guilabel"><b>PRESET</b></samp></span> and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> buttons to begin execution.
The S register is preset as follows:</p>
<table class="bitmask-layout docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>15</p></th>
<th class="head"><p>14</p></th>
<th class="head"><p>13</p></th>
<th class="head"><p>12</p></th>
<th class="head"><p>11</p></th>
<th class="head"><p>10</p></th>
<th class="head"><p>9</p></th>
<th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>0</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td colspan="6"><p>DQD select code</p></td>
<td colspan="3"><p>unchanged</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<p>Bits 5-3 of the existing S-register value are retained when the loader is executed and are available to the boot extension program.</p>
<p>The loader reads 128 words from cylinder 0 head 0 sector 0 into memory starting at location 2011 octal.
Loader execution ends with the following instruction:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">JSB</span> <span class="pre">2055,I</span></code> — the disc read completed.</p></li>
</ul>
<p>The success or failure of the transfer is not checked.</p>
<p>When a debug log has been established,
tracing may be configured for each card separately by specifying the reporting level option:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned by the interface.</p>
<p>The Data PCA state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>IBUF</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Input buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>OBUF</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Output buffer</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DBUF</b></samp></span> [0:127]</p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Sector buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>BPTR</b></samp></span></p></td>
<td><p>7</p></td>
<td><p>10</p></td>
<td><p>Sector buffer pointer</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CMD</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Command flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Control flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag buffer flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>XFER</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Transfer in progress flag</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>WVAL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Write data valid flag</p></td>
</tr>
</tbody>
</table>
<p>The Control PCA state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Read-only</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>OBUF</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Output buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>BUSY</b></samp></span></p></td>
<td><p>2</p></td>
<td><p>8</p></td>
<td><p>✓</p></td>
<td><p>Busy unit number + 1</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CNT</b></samp></span></p></td>
<td><p>9</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Check record counter</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CMD</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Command flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Control flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td></td>
<td><p>Flag buffer flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>RARC</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Record address register (cylinder)</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>RARH</b></samp></span></p></td>
<td><p>5</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Record address register (head)</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>RARS</b></samp></span></p></td>
<td><p>5</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Record address register (sector)</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CYL</b></samp></span> [0:1]</p></td>
<td><p>8</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Current cylinder, drives 0-1</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>HED</b></samp></span> [0:1]</p></td>
<td><p>5</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Current head, drives 0-1</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>STA</b></samp></span> [0:1]</p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td></td>
<td><p>Drive status, drives 0-1</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Data transfer command delay time</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Data channel command delay time</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>STIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Seek delay time, per cylinder</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>XTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td></td>
<td><p>Inter-word transfer time</p></td>
</tr>
</tbody>
</table>
</section>
<section id="b-disc-memory-interface-with-one-2770-2771-disc-12610b-drum-memory-interface-with-one-2773-2774-2775-drum">
<span id="b-drum-memory-interface-with-one-2773-2774-2775-drum"></span><span id="b-disc-memory-interface-with-one-2770-2771-disc"></span><h3><span class="sectnum">1.5.3. </span>12606B Disc Memory Interface with one 2770/2771 disc, 12610B Drum Memory Interface with one 2773/2774/2775 drum<a class="headerlink" href="#b-disc-memory-interface-with-one-2770-2771-disc-12610b-drum-memory-interface-with-one-2773-2774-2775-drum" title="Permalink to this heading">¶</a></h3>
<p>The 12606B Disc Memory Interface connects one HP 2770A or 2771A fixed-head disc drive to the HP computer family.
The 12610B Drum Memory Interface connects one HP 2773A 2774A, or 2775A fixed-head drum drive.
Both interfaces consist of two Printed Circuit Assemblies installed in adjacent I/O slots.
The Data PCA is assigned the higher-priority (lower numbered) select code,
and the Control PCA is assigned the lower-priority select code.
The DRD and DRC devices simulate these PCAs.</p>
<p>The storage capacity of the HP 277x drives is expandable by adding sets of heads to the base model.
This simulation supports the following models and options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Model-option</p></th>
<th class="head"><p>Tracks</p></th>
<th class="head"><p>Sectors</p></th>
<th class="head"><p>Words</p></th>
<th class="head"><p>Capacity</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>2770A</p></td>
<td><p>32</p></td>
<td><p>90</p></td>
<td><p>64</p></td>
<td><p>180 KW</p></td>
</tr>
<tr class="row-odd"><td><p>2771A</p></td>
<td><p>64</p></td>
<td><p>90</p></td>
<td><p>64</p></td>
<td><p>360 KW</p></td>
</tr>
<tr class="row-even"><td><p>2771A-001</p></td>
<td><p>128</p></td>
<td><p>90</p></td>
<td><p>64</p></td>
<td><p>720 KW</p></td>
</tr>
<tr class="row-odd"><td><p>2773A</p></td>
<td><p>192</p></td>
<td><p>32</p></td>
<td><p>64</p></td>
<td><p>384 KW</p></td>
</tr>
<tr class="row-even"><td><p>2773A-001</p></td>
<td><p>256</p></td>
<td><p>32</p></td>
<td><p>64</p></td>
<td><p>512 KW</p></td>
</tr>
<tr class="row-odd"><td><p>2773A-002</p></td>
<td><p>320</p></td>
<td><p>32</p></td>
<td><p>64</p></td>
<td><p>640 KW</p></td>
</tr>
<tr class="row-even"><td><p>2774A</p></td>
<td><p>384</p></td>
<td><p>32</p></td>
<td><p>64</p></td>
<td><p>768 KW</p></td>
</tr>
<tr class="row-odd"><td><p>2774A-001</p></td>
<td><p>448</p></td>
<td><p>32</p></td>
<td><p>64</p></td>
<td><p>896 KW</p></td>
</tr>
<tr class="row-even"><td><p>2774A-002</p></td>
<td><p>512</p></td>
<td><p>32</p></td>
<td><p>64</p></td>
<td><p>1024 KW</p></td>
</tr>
<tr class="row-odd"><td><p>2775A</p></td>
<td><p>768</p></td>
<td><p>32</p></td>
<td><p>64</p></td>
<td><p>1536 KW</p></td>
</tr>
</tbody>
</table>
<p>Attaching a disc or drum image file to a unit simulates applying power to the drive:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="p">{</span><span class="o">-</span><span class="n">R</span> <span class="o">|</span> <span class="o">-</span><span class="n">N</span><span class="p">}</span> <span class="n">DRC</span> <span class="o">&lt;</span><span class="n">image</span><span class="o">-</span><span class="n">filename</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Adding the <span class="html"><samp><b>-R</b></samp></span> (read-only) switch is equivalent to removing all of the track-protection diodes and setting the Data PCA Track Protect switch to the <em>On</em> position.
Adding the <span class="html"><samp><b>-N</b></samp></span> (new file) switch creates a full-size image file,
equivalent to formatting the new disc or drum before use.</p>
<p>This device buffers the image file in memory,
and the file is not written until the unit is detached.
If the host operating system returns an error when writing the file,
the simulator will report the error to the simulation console, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HP</span> <span class="mi">2100</span><span class="p">:</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span> <span class="n">error</span> <span class="o">-</span> <span class="n">No</span> <span class="n">space</span> <span class="n">left</span> <span class="n">on</span> <span class="n">device</span>
</pre></div>
</div>
<p>No error recovery is attempted.</p>
<p>Device and unit options include configuring the drive type and track protection.
The command forms are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">DRC</span> <span class="o">&lt;</span><span class="n">device</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
<span class="n">SET</span> <span class="n">DRC</span> <span class="o">&lt;</span><span class="n">unit</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Device options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select codes; default is 26/27</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device</p></td>
</tr>
</tbody>
</table>
<p>When entering the <span class="html"><samp><b>SC</b></samp></span> option,
specify the lower select code with either device name;
the higher select code will be set automatically,
and the cards will be assigned in the correct order.</p>
<p>Device configuration may be displayed with the following command:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW DRC</b></samp></span></p></td>
<td><p>Display the device and unit configuration</p></td>
</tr>
</tbody>
</table>
<p>Unit options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>180K</b></samp></span></p></td>
<td><p>Use the 12606B interface and 2770A drive</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>360K</b></samp></span></p></td>
<td><p>Use the 12606B interface and 2771A drive</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>720K</b></samp></span></p></td>
<td><p>Use the 12606B interface and 2771A-001 drive</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>384K</b></samp></span></p></td>
<td><p>Use the 12610B interface and 2773A drive</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>512K</b></samp></span></p></td>
<td><p>Use the 12610B interface and 2773A-001 drive</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>640K</b></samp></span></p></td>
<td><p>Use the 12610B interface and 2773A-002 drive</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>768K</b></samp></span></p></td>
<td><p>Use the 12610B interface and 2774A drive</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>896K</b></samp></span></p></td>
<td><p>Use the 12610B interface and 2774A-001 drive</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>1024K</b></samp></span></p></td>
<td><p>Use the 12610B interface and 2774A-002 drive</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>1536K</b></samp></span></p></td>
<td><p>Use the 12610B interface and 2775A drive</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>PROTECT</b></samp></span></p></td>
<td><p>Prohibit writing to the protected tracks</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>UNPROTECT</b></samp></span></p></td>
<td><p>Permit writing to all tracks; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>TRACKPROT=</b><var>n</var></samp></span></p></td>
<td><p>Set the number of protected tracks; default is 1</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>180K</b></samp></span>, <span class="html"><samp><b>360K</b></samp></span>, and <span class="html"><samp><b>720K</b></samp></span> options set the interface type and drive model for the fixed-head disc.
The <span class="html"><samp><b>384K</b></samp></span>, <span class="html"><samp><b>512K</b></samp></span>, <span class="html"><samp><b>640K</b></samp></span>, <span class="html"><samp><b>768K</b></samp></span>, <span class="html"><samp><b>896K</b></samp></span>, <span class="html"><samp><b>1024K</b></samp></span>, and <span class="html"><samp><b>1536K</b></samp></span> set the interface type and drive model for the fixed-head drum.</p>
<p>The <span class="html"><samp><b>PROTECT</b></samp></span> option prevents writing to the tracks that have been configured as protected,
and the <span class="html"><samp><b>UNPROTECT</b></samp></span> option permits writing to all tracks.</p>
<p id="trackprot">The <span class="html"><samp><b>TRACKPROT</b></samp></span> option configures the number of protected tracks.
In hardware,
this corresponds to installing or removing the track-protection diodes on the Data PCA.
The track count must be a power of two from 1 to 128 on the 12606B interface and from 1 to 512,
or 768,
on the 12610B interface.
If the drive has fewer tracks than the track-protection count,
then all tracks on the drive are eligible for protection.</p>
<p id="boot-drc"><span id="load-drc"></span>The interface supports the <span class="html"><samp><b>LOAD DRC</b></samp></span> and <span class="html"><samp><b>BOOT DRC</b></samp></span> commands to load a disc boot extension into memory.
The <span class="html"><samp><b>LOAD</b></samp></span> command copies the Basic Binary Disc Loader (BBDL) into memory,
configures it for the Data interface’s select code,
and sets the P register to the loader’s starting address.
The <span class="html"><samp><b>BOOT</b></samp></span> command performs these same actions and then presets the system and begins execution.</p>
<p>For a 2100/14/15/16 CPU containing a previously configured BBDL in memory,
the commands are equivalent in hardware to setting the P register to the starting address,
pressing the <span class="html"><samp class="guilabel"><b>LOADER ENABLE</b></samp></span> button on the front panel,
and, for the <span class="html"><samp><b>BOOT</b></samp></span> command,
pressing the <span class="html"><samp class="guilabel"><b>INTERNAL PRESET</b></samp></span>, <span class="html"><samp class="guilabel"><b>EXTERNAL PRESET</b></samp></span>, and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> buttons to begin execution.
The S register value is not relevant for this loader.</p>
<p>The BBDL is a dual-purpose loader that also permits loading an absolute binary program from the paper tape reader.
When the loader is copied into memory,
the disc/drum portion is configured for the select code of the Data interface,
and the paper tape portion is configured for the select code of the paper tape reader interface.
The P register is automatically set to the starting address of the disc/drum portion,
which starts at x7760
(i.e., offset 1760 within the highest page in memory).
The loader stores a <code class="docutils literal notranslate"><span class="pre">JMP *</span></code> instruction into location 77 octal and then reads 64 words from track 0 sector 0 into memory starting at location 0.
Loader execution ends when the <code class="docutils literal notranslate"><span class="pre">JMP *</span></code> is overlaid with a <code class="docutils literal notranslate"><span class="pre">JMP</span></code> to the address of the start of the bootstrap extension just read.
The success or failure of the transfer is not checked.</p>
<p>To execute the paper tape portion,
the P register may be reset to x7700 (offset 1700).
Loader execution ends with one of the following halt instructions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 11</span></code> — a checksum error occurred; <em>A</em> = the tape value, <em>B</em> = the calculated value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 55</span></code> — the program load address would overlay the loader.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 77</span></code> — the end of tape was reached with a successful read.</p></li>
</ul>
<p>The 1000 M/E/F-Series does not support this device.
Attempting to execute a <span class="html"><samp><b>LOAD DRC</b></samp></span> or <span class="html"><samp><b>BOOT DRC</b></samp></span> command will be rejected with a <strong>Command not allowed</strong> error.</p>
<p>When a debug log has been established,
tracing may be configured for each card separately by specifying the reporting level option:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned by the interface.</p>
<p>The Data PCA state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>IBUF</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Input buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>OBUF</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Output buffer</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Control flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>BPTR</b></samp></span></p></td>
<td><p>6</p></td>
<td><p>8</p></td>
<td><p>Sector buffer pointer</p></td>
</tr>
</tbody>
</table>
<p>The Control PCA state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CW</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Command word</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>STA</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Status word</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp class="guilabel"><b>RUN</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Run flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>TIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td><p>Inter-word transfer time</p></td>
</tr>
</tbody>
</table>
</section>
<section id="a-disc-interface-with-four-7906h-7920h-7925h-drives">
<h3><span class="sectnum">1.5.4. </span>12821A Disc Interface with four 7906H/7920H/7925H drives<a class="headerlink" href="#a-disc-interface-with-four-7906h-7920h-7925h-drives" title="Permalink to this heading">¶</a></h3>
<p>The HP 12821A Disc Interface connects from one to four HP 7906H (20 MB), 7920H (50 MB), or 7925H (120 MB) Integrated Controller Disc (ICD) drives to the HP 1000.
These drives are identical to the 7906M, 7920M, and 7925M Multiple Access Controller (MAC) units,
but incorporate internal two-card controllers in each drive and connect to the CPU interface via the Hewlett-Packard Interface Bus (HP-IB),
HP’s implementation of IEEE-488.
Each controller is dedicated to a single drive and operates similarly to the 12745 Disc Controller to HP-IB Adapter option for the 13037 Disc Controller chassis.
The 7906H was introduced in 1980
(there was no 7905H version,
as the 7905 was obsolete by that time).
Up to four ICD drives can be connected to a single 12821A card;
bus loading and the 937.5 KB/second data transfer rate impose the limitation.</p>
<p>Attaching a disc image file to a unit simulates inserting a disc pack into a drive:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="p">{</span><span class="o">-</span><span class="n">R</span> <span class="o">|</span> <span class="o">-</span><span class="n">N</span><span class="p">}</span> <span class="n">DAn</span> <span class="o">&lt;</span><span class="n">image</span><span class="o">-</span><span class="n">filename</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Adding the <span class="html"><samp><b>-R</b></samp></span> (read-only) switch is equivalent to setting the drive’s Disc Protect or Read Only switch to the <em>On</em> position.
Adding the <span class="html"><samp><b>-N</b></samp></span> (new file) switch creates a full-size image file,
equivalent to formatting the new disc before use.</p>
<p>If the host operating system returns an error when seeking, reading, or writing a disc image file,
the simulator will report the error to the simulation console, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HP</span> <span class="mi">2100</span> <span class="n">simulator</span> <span class="n">disc</span> <span class="n">library</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span> <span class="n">error</span><span class="p">:</span> <span class="n">No</span> <span class="n">space</span> <span class="n">left</span> <span class="n">on</span> <span class="n">device</span>
</pre></div>
</div>
<p>A simulated disc seek will fail with Status 2 Error (Drive Fault) status,
and the drive’s heads will unload.
Reloading the heads will clear the drive fault.
A simulated disc read or write will fail with Uncorrectable Data Error status.
The target operating system will then react to this error as though the drive had encountered a bad disc sector.</p>
<p>A drive’s unit number is not set explicitly.
Instead,
the drive unit number is derived from the simulation unit number.
For example,
unit DA0 responds to disc unit select number 0.
Changing the unit select switch on a mounted drive is simulated by detaching and reattaching the disc image file to the corresponding simulation unit.</p>
<p>Device and unit options include configuring the timing, drive type, protection and format status,
and the ability to set drives ready or not-ready.
The command forms are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">DA</span> <span class="o">&lt;</span><span class="n">device</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
<span class="n">SET</span> <span class="n">DAn</span> <span class="o">&lt;</span><span class="n">unit</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
</pre></div>
</div>
<section id="id4">
<h4><span class="sectnum">1.5.4.1. </span>Device options<a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h4>
<p>Device options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>ADDRESS=</b><var>n</var></samp></span></p></td>
<td><p>Set the HP-IB address; default is 0</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DIAGNOSTIC</b></samp></span></p></td>
<td><p>Connect the HP-IB cable to a second interface</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>HPIB</b></samp></span></p></td>
<td><p>Connect the HP-IB cable to the drives</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select code; default is 43</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DEBUG=</b><var>option</var></samp></span></p></td>
<td><p>Enable tracing</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>NODEBUG</b></samp></span></p></td>
<td><p>Disable tracing; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>ADDRESS</b></samp></span> option configures the interface to use the specified HP-IB address from 0-7.
The interface address is independent of the disc drive unit address and is only used for diagnostics.</p>
<p>Setting the <span class="html"><samp><b>DIAGNOSTIC</b></samp></span> option enables a second 12821A device (named DC) and simulates the installation of an HP-IB cable between the two 12821A Disc Interface cards as required by the HP 12821A ICD Disc Interface Diagnostic.
Setting the <span class="html"><samp><b>HPIB</b></samp></span> option disables the second device and simulates the installation of an HP-IB cable between the interface and the drives.</p>
<p>Device configuration may be displayed with the following commands:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW DA</b></samp></span></p></td>
<td><p>Display the device and unit configuration</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SHOW DA CABLE</b></samp></span></p></td>
<td><p>Display the HP-IB cable configuration</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW DA BUS</b></samp></span></p></td>
<td><p>Display the bus address</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id5">
<h4><span class="sectnum">1.5.4.2. </span>Unit options<a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h4>
<p>Unit options that may be specified for individual disc drives are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>7906H</b></samp></span></p></td>
<td><p>Set the drive type to 7906H; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>7920H</b></samp></span></p></td>
<td><p>Set the drive type to 7920H</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>7925H</b></samp></span></p></td>
<td><p>Set the drive type to 7925H</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>BUS=</b><var>n</var></samp></span></p></td>
<td><p>Set the drive’s HP-IB address; default is the unit number</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>UNLOAD</b></samp></span></p></td>
<td><p>Set the drive’s Run/Stop switch to <em>Stop</em>; default when detached</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>LOAD</b></samp></span></p></td>
<td><p>Set the drive’s Run/Stop switch to <em>Run</em>; default when attached</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>PROTECT</b></samp></span></p></td>
<td><p>Set the drive’s Disc Protect or Read Only switch to <em>On</em></p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>UNPROTECT</b></samp></span></p></td>
<td><p>Set the drive’s Disc Protect or Read Only switch to <em>Off</em></p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FORMAT</b></samp></span></p></td>
<td><p>Set the drive’s Format switch to <em>Enabled</em></p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>NOFORMAT</b></samp></span></p></td>
<td><p>Set the drive’s Format switch to <em>Disabled</em>; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the unit; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the unit</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>7906H</b></samp></span>, <span class="html"><samp><b>7920H</b></samp></span>, and <span class="html"><samp><b>7925H</b></samp></span> options select the disc drive model.</p>
<p>The <span class="html"><samp><b>BUS</b></samp></span> option sets the HP-IB address of the drive.
Bus addresses range from 0-7,
and each unit’s address must be unique.
Each unit’s bus address is initially set to its unit number.</p>
<p>The <span class="html"><samp><b>UNLOAD</b></samp></span> and <span class="html"><samp><b>LOAD</b></samp></span> options unload and load the drive’s heads from the disc pack,
setting the drive not-ready and ready,
respectively.
The former provides a convenient method of setting a drive “down” without detaching the associated disc image file.</p>
<p>The <span class="html"><samp><b>PROTECT</b></samp></span> option prevents writing to the disc.
It is the hardware equivalent of setting the 7906H Upper and Lower Disc Protect switches or the 7920H or 7925H Read Only switch to the <em>On</em> position.
The <span class="html"><samp><b>UNPROTECT</b></samp></span> option enables writing and is equivalent to setting the switches to <em>Off</em>.
Separate protection for the upper and lower platters of the 7906H drive is not supported.</p>
<p>The <span class="html"><samp><b>FORMAT</b></samp></span> option enables certain controller commands,
such as Initialize,
that alter the sector address fields.
Typically,
this option is needed when installing an operating system.
The <span class="html"><samp><b>NOFORMAT</b></samp></span> option inhibits these commands and permits only the standard Write command,
subject to the appropriate drive protection status.</p>
<p>Drive configuration may be displayed with the following command:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW DA</b><var>n</var></samp></span></p></td>
<td><p>Display the selected drive’s configuration</p></td>
</tr>
</tbody>
</table>
</section>
<section id="load-and-boot-commands">
<h4><span class="sectnum">1.5.4.3. </span><a class="reference internal" href="#load"><span class="html"><samp><b>LOAD</b></samp></span></a> and <a class="reference internal" href="#boot"><span class="html"><samp><b>BOOT</b></samp></span></a> commands<a class="headerlink" href="#load-and-boot-commands" title="Permalink to this heading">¶</a></h4>
<p id="boot-da"><span id="load-da"></span>The interface supports the <span class="html"><samp><b>LOAD DA</b></samp></span> and <span class="html"><samp><b>BOOT DA</b></samp></span> commands to load a disc boot extension into memory.
The <span class="html"><samp><b>LOAD</b></samp></span> command copies the 12992H boot loader ROM into memory,
configures it for the interface’s select code,
and sets the P register to the loader’s starting address.
The <span class="html"><samp><b>BOOT</b></samp></span> command performs these same actions and then presets the system and begins execution.</p>
<p>For a 1000 M/E/F-Series CPU,
the commands are equivalent in hardware to setting the S register to select and configure the HP 12992H boot loader ROM,
pressing the <span class="html"><samp class="guilabel"><b>IBL</b></samp></span> button to copy the ROM into memory,
and, for the <span class="html"><samp><b>BOOT</b></samp></span> command,
pressing the <span class="html"><samp class="guilabel"><b>PRESET</b></samp></span> and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> buttons to begin execution.
The S register is preset as follows:</p>
<table class="bitmask-layout docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>15</p></th>
<th class="head"><p>14</p></th>
<th class="head"><p>13</p></th>
<th class="head"><p>12</p></th>
<th class="head"><p>11</p></th>
<th class="head"><p>10</p></th>
<th class="head"><p>9</p></th>
<th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>0</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td colspan="6"><p>DA select code</p></td>
<td colspan="3"><p>unchanged</p></td>
<td><p>0</p></td>
<td colspan="2"><p>head</p></td>
</tr>
</tbody>
</table>
<p>The head number is obtained from bits 1-0 of the existing S-register value when the loader is executed.
Bits 5-3 of the existing S-register value are also retained and are available to the boot extension program.</p>
<p>The loader reads 620 words from cylinder 0 sector 0 of the specified head into memory starting at location 2011 octal.
Loader execution ends with one of the following instructions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 11</span></code> — the drive aborted the transfer due to an unrecoverable error.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">JSB 2055,I</span></code> — the disc read succeeded.</p></li>
</ul>
<p>The 2100/14/15/16 CPU does not support this device.
Attempting to execute a <span class="html"><samp><b>LOAD DA</b></samp></span> or <span class="html"><samp><b>BOOT DA</b></samp></span> command will be rejected with a <strong>Command not allowed</strong> error.</p>
</section>
<section id="id6">
<h4><span class="sectnum">1.5.4.4. </span>Tracing and registers<a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h4>
<p>When a debug log has been established,
tracing may be configured by specifying one or more of the reporting level options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>RWSC</b></samp></span></p></td>
<td><p>Controller read, write, status, and control commands</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CMDS</b></samp></span></p></td>
<td><p>Interface commands received from the CPU</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CPU</b></samp></span></p></td>
<td><p>Words received from and sent to the CPU</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>BUF</b></samp></span></p></td>
<td><p>Data read from and written to the interface FIFO</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>XFER</b></samp></span></p></td>
<td><p>Data received and transmitted via HP-IB</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SERV</b></samp></span></p></td>
<td><p>Disc unit service events</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>RWSC</b></samp></span> option traces the read, write, status, and control commands executed by the disc controller.
The <span class="html"><samp><b>CMDS</b></samp></span> option traces the commands executed by the interface.
The <span class="html"><samp><b>CPU</b></samp></span> option traces words received from (control and write data) and sent to (status and read data) the CPU.
The <span class="html"><samp><b>BUF</b></samp></span> option traces loads into and unloads from the interface FIFO.
The <span class="html"><samp><b>XFER</b></samp></span> option traces the data words read from or written to the disc.
The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned via the interface.</p>
<p>Examples of the trace formats follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span><span class="n">DA</span>  <span class="n">rwsc</span><span class="p">:</span> <span class="n">Unit</span> <span class="mi">1</span> <span class="n">position</span> <span class="mi">1069056</span> <span class="n">seek</span> <span class="n">disc</span> <span class="n">command</span> <span class="n">initiated</span>
<span class="o">&gt;&gt;</span><span class="n">DA</span>  <span class="n">rwsc</span><span class="p">:</span> <span class="n">Unit</span> <span class="mi">1</span> <span class="n">seek</span> <span class="n">disc</span> <span class="n">command</span> <span class="n">completed</span>
<span class="o">&gt;&gt;</span><span class="n">DA</span>  <span class="n">cmds</span><span class="p">:</span> <span class="p">[</span><span class="n">STC</span><span class="p">]</span> <span class="n">Control</span> <span class="nb">set</span> <span class="p">(</span><span class="n">data</span> <span class="n">mode</span><span class="p">)</span>
<span class="o">&gt;&gt;</span><span class="n">DA</span>  <span class="n">cmds</span><span class="p">:</span> <span class="n">SRQ</span> <span class="n">cleared</span>
<span class="o">&gt;&gt;</span><span class="n">DA</span>   <span class="n">cpu</span><span class="p">:</span> <span class="p">[</span><span class="n">OTx</span><span class="p">]</span> <span class="n">Control</span> <span class="o">=</span> <span class="mi">004003</span>
<span class="o">&gt;&gt;</span><span class="n">DA</span>   <span class="n">cpu</span><span class="p">:</span> <span class="p">[</span><span class="n">LIx</span><span class="p">,</span><span class="n">C</span><span class="p">]</span> <span class="n">Data</span> <span class="o">=</span> <span class="mi">063613</span>
<span class="o">&gt;&gt;</span><span class="n">DA</span>   <span class="n">buf</span><span class="p">:</span> <span class="n">Data</span> <span class="mi">277</span> <span class="n">tag</span> <span class="n">ATN</span> <span class="o">|</span> <span class="n">EDT</span> <span class="n">unloaded</span> <span class="kn">from</span> <span class="nn">FIFO</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="o">&gt;&gt;</span><span class="n">DA</span>   <span class="n">buf</span><span class="p">:</span> <span class="n">FIFO</span> <span class="n">cleared</span>
<span class="o">&gt;&gt;</span><span class="n">DA</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">Data</span> <span class="mi">100677</span> <span class="n">tag</span> <span class="n">ATN</span> <span class="o">|</span> <span class="n">EDT</span> <span class="n">loaded</span> <span class="n">into</span> <span class="n">FIFO</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="o">&gt;&gt;</span><span class="n">DA</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">HP</span><span class="o">-</span><span class="n">IB</span> <span class="n">DIO</span> <span class="mi">277</span> <span class="n">signals</span> <span class="n">ATN</span> <span class="n">available</span>
<span class="o">&gt;&gt;</span><span class="n">DA</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">HP</span><span class="o">-</span><span class="n">IB</span> <span class="n">address</span> <span class="mi">0</span> <span class="n">accepted</span> <span class="n">unlisten</span>
<span class="o">&gt;&gt;</span><span class="n">DA</span>  <span class="n">xfer</span><span class="p">:</span> <span class="n">HP</span><span class="o">-</span><span class="n">IB</span> <span class="n">address</span> <span class="mi">1</span> <span class="n">accepted</span> <span class="n">secondary</span> <span class="mi">08</span><span class="n">H</span>
<span class="o">&gt;&gt;</span><span class="n">DA</span>  <span class="n">serv</span><span class="p">:</span> <span class="n">Unit</span> <span class="mi">1</span> <span class="n">state</span> <span class="n">read</span> <span class="n">transfer</span> <span class="n">delay</span> <span class="mi">3</span> <span class="n">service</span> <span class="n">scheduled</span>
<span class="o">&gt;&gt;</span><span class="n">DA</span>  <span class="n">serv</span><span class="p">:</span> <span class="n">Unit</span> <span class="mi">1</span> <span class="n">state</span> <span class="n">command</span> <span class="n">execution</span> <span class="n">delay</span> <span class="mi">100</span> <span class="n">service</span> <span class="n">scheduled</span>
<span class="o">&gt;&gt;</span><span class="n">DA</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">CLC</span> <span class="o">|</span> <span class="n">CLF</span> <span class="o">|</span> <span class="n">SIR</span> <span class="o">|</span> <span class="n">PRH</span>
<span class="o">&gt;&gt;</span><span class="n">DA</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">PRL</span>
</pre></div>
</div>
<p>The Disc Interface state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CWR</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Control word register</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SWR</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Status word register</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>IDR</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Input data register</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FCNT</b></samp></span></p></td>
<td><p>5</p></td>
<td><p>10</p></td>
<td><p>FIFO fill count</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FIFO</b></samp></span> [0:15]</p></td>
<td><p>20</p></td>
<td><p>8</p></td>
<td><p>Data FIFO</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ACPT</b></samp></span></p></td>
<td><p>4</p></td>
<td><p>2</p></td>
<td><p>Bus acceptor units bitmap</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>LSTN</b></samp></span></p></td>
<td><p>4</p></td>
<td><p>2</p></td>
<td><p>Bus listener units bitmap</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>TALK</b></samp></span></p></td>
<td><p>4</p></td>
<td><p>2</p></td>
<td><p>Bus talker unit bitmap</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>PPR</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>2</p></td>
<td><p>Parallel poll response bitmap</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>BUSCTL</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>2</p></td>
<td><p>HP-IB control lines</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Interface control</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Interface flag</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Interface flag buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SRQ</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Interface DCPC service request</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>EDT</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>End of data transfer flag</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>EOR</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>End of record flag</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>BUFFER</b></samp></span> [0:137]</p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Sector buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DSJ</b></samp></span> [0:3]</p></td>
<td><p>2</p></td>
<td><p>10</p></td>
<td><p>Controller Device-Specified Jump, drives 0-3</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>ISTATE</b></samp></span> [0:3]</p></td>
<td><p>4</p></td>
<td><p>10</p></td>
<td><p>Interface state, drives 0-3</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ICMD</b></samp></span> [0:3]</p></td>
<td><p>4</p></td>
<td><p>10</p></td>
<td><p>Interface command, drives 0-3</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="d-disc-controller-interface-with-eight-7905-7906-7920-7925-drives">
<h3><span class="sectnum">1.5.5. </span>13175D Disc Controller Interface with eight 7905/7906/7920/7925 drives<a class="headerlink" href="#d-disc-controller-interface-with-eight-7905-7906-7920-7925-drives" title="Permalink to this heading">¶</a></h3>
<p>The HP 13175D Disc Controller Interface connects 7905A (15 MB), 7906A (20 MB), 7920A (50 MB), and 7925A (120 MB) disc drives to the HP 1000.
The subsystem consists of the interface,
a 13037D Multiple Access Controller (MAC),
and from one to eight MAC drives.
The subsystem uses DCPC to achieve a 937.5 KB/second transfer rate to the CPU.</p>
<p>The disc controller connects from one to eight disc drives to interfaces installed in from one to eight CPUs.
The drives use a common command set and present data to the controller synchronously at a 468.75 kiloword per second (2.133 microseconds per word) data rate.</p>
<p>The disc interface is used to connect the HP 1000 CPU to the 13037’s device controller.
While the controller supports multiple-CPU systems in hardware,
the simulator does not provide this capability.</p>
<p>Attaching a disc image file to a unit simulates inserting a disc pack into a drive:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="p">{</span><span class="o">-</span><span class="n">R</span> <span class="o">|</span> <span class="o">-</span><span class="n">N</span><span class="p">}</span> <span class="n">DSn</span> <span class="o">&lt;</span><span class="n">image</span><span class="o">-</span><span class="n">filename</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Adding the <span class="html"><samp><b>-R</b></samp></span> (read-only) switch is equivalent to setting the drive’s Disc Protect or Read Only switch to the <em>On</em> position.
Adding the <span class="html"><samp><b>-N</b></samp></span> (new file) switch creates a full-size image file,
equivalent to formatting the new disc before use.</p>
<p>If the host operating system returns an error when seeking, reading, or writing a disc image file,
the simulator will report the error to the simulation console, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HP</span> <span class="mi">2100</span> <span class="n">simulator</span> <span class="n">disc</span> <span class="n">library</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span> <span class="n">error</span><span class="p">:</span> <span class="n">No</span> <span class="n">space</span> <span class="n">left</span> <span class="n">on</span> <span class="n">device</span>
</pre></div>
</div>
<p>A simulated disc seek will fail with Status 2 Error (Drive Fault) status,
and the drive’s heads will unload.
Reloading the heads will clear the drive fault.
A simulated disc read or write will fail with Uncorrectable Data Error status.
The target operating system will then react to this error as though the drive had encountered a bad disc sector.</p>
<p>A drive’s unit number is not set explicitly.
Instead,
the drive unit number is derived from the simulation unit number.
For example,
unit DS0 responds to disc unit select number 0.
Changing the unit select switch on a mounted drive is simulated by detaching and reattaching the disc image file to the corresponding simulation unit.</p>
<p>Device and unit options include configuring the timing, drive type, protection and format status,
and the ability to set drives ready or not-ready.
The command forms are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">DS</span> <span class="o">&lt;</span><span class="n">device</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
<span class="n">SET</span> <span class="n">DSn</span> <span class="o">&lt;</span><span class="n">unit</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
</pre></div>
</div>
<section id="id7">
<h4><span class="sectnum">1.5.5.1. </span>Device options<a class="headerlink" href="#id7" title="Permalink to this heading">¶</a></h4>
<p>Device options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select code; default is 34</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DEBUG=</b><var>option</var></samp></span></p></td>
<td><p>Enable tracing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NODEBUG</b></samp></span></p></td>
<td><p>Disable tracing; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device</p></td>
</tr>
</tbody>
</table>
<p>Device configuration may be displayed with the following commands:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW DS</b></samp></span></p></td>
<td><p>Display the device and unit configuration</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id8">
<h4><span class="sectnum">1.5.5.2. </span>Unit options<a class="headerlink" href="#id8" title="Permalink to this heading">¶</a></h4>
<p>Unit options that may be specified for individual disc drives are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>7905</b></samp></span></p></td>
<td><p>Set the drive type to 7905; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>7906</b></samp></span></p></td>
<td><p>Set the drive type to 7906</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>7920</b></samp></span></p></td>
<td><p>Set the drive type to 7920</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>7925</b></samp></span></p></td>
<td><p>Set the drive type to 7925</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>AUTOSIZE</b></samp></span></p></td>
<td><p>Set the drive type based on the attached file size</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>UNLOAD</b></samp></span></p></td>
<td><p>Set the drive’s Run/Stop switch to <em>Stop</em>; default when detached</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>LOAD</b></samp></span></p></td>
<td><p>Set the drive’s Run/Stop switch to <em>Run</em>; default when attached</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>PROTECT</b></samp></span></p></td>
<td><p>Set the drive’s Disc Protect or Read Only switch to <em>On</em></p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>UNPROTECT</b></samp></span></p></td>
<td><p>Set the drive’s Disc Protect or Read Only switch to <em>Off</em></p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FORMAT</b></samp></span></p></td>
<td><p>Set the drive’s Format switch to <em>Enabled</em></p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NOFORMAT</b></samp></span></p></td>
<td><p>Set the drive’s Format switch to <em>Disabled</em>; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the unit; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the unit</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>7905</b></samp></span>, <span class="html"><samp><b>7906</b></samp></span>, <span class="html"><samp><b>7920</b></samp></span>, and <span class="html"><samp><b>7925</b></samp></span> options select the disc drive model.
The <span class="html"><samp><b>AUTOSIZE</b></samp></span> option selects the disc drive model by the size of the attached disc image file.
The algorithm selects the smallest-capacity drive capable of supporting the image.
This option is useful when several previously written images of various sizes are attached sequentially.</p>
<p>The <span class="html"><samp><b>UNLOAD</b></samp></span> and <span class="html"><samp><b>LOAD</b></samp></span> options unload and load the drive’s heads from the disc pack,
setting the drive not-ready and ready,
respectively.
The former option provides a convenient method of setting a drive “down” without detaching the associated disc image file.</p>
<p>The <span class="html"><samp><b>PROTECT</b></samp></span> option prevents writing to the disc.
It is the hardware equivalent of setting the 7905 or 7906 Upper and Lower Disc Protect switches or the 7920 or 7925 Read Only switch to the <em>On</em> position.
The <span class="html"><samp><b>UNPROTECT</b></samp></span> option enables writing and is equivalent to setting the switches to <em>Off</em>.
Separate protection for the upper and lower platters of the 7905 and 7906 drives is not supported.</p>
<p>The <span class="html"><samp><b>FORMAT</b></samp></span> option enables certain controller commands,
such as Initialize,
that alter the sector address fields.
Typically,
this option is needed when installing the operating system.
The <span class="html"><samp><b>NOFORMAT</b></samp></span> option inhibits these commands and permits only the standard Write command,
subject to the appropriate drive protection status.</p>
<p>Drive configuration may be displayed with the following command:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW DS</b><var>n</var></samp></span></p></td>
<td><p>Display the selected drive’s configuration</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id9">
<h4><span class="sectnum">1.5.5.3. </span><a class="reference internal" href="#load"><span class="html"><samp><b>LOAD</b></samp></span></a> and <a class="reference internal" href="#boot"><span class="html"><samp><b>BOOT</b></samp></span></a> commands<a class="headerlink" href="#id9" title="Permalink to this heading">¶</a></h4>
<p id="boot-ds"><span id="load-ds"></span>The interface supports the <span class="html"><samp><b>LOAD DS</b></samp></span> and <span class="html"><samp><b>BOOT DS</b></samp></span> commands to load a disc boot extension into memory.
Depending on the current CPU model,
the <span class="html"><samp><b>LOAD</b></samp></span> command copies either the Basic Moving-Head Disc Loader (BMDL-7905) or the 12992B boot loader ROM into memory,
configures it for the interface’s select code,
and sets the P register to the loader’s starting address.
The <span class="html"><samp><b>BOOT</b></samp></span> command performs these same actions and then presets the system and begins execution.</p>
<p>For a 2100/14/15/16 CPU containing a previously configured BMDL in memory,
the commands are equivalent in hardware to setting the P register to the starting address,
pressing the <span class="html"><samp class="guilabel"><b>LOADER ENABLE</b></samp></span> button on the front panel,
and, for the <span class="html"><samp><b>BOOT</b></samp></span> command,
pressing the <span class="html"><samp class="guilabel"><b>INTERNAL PRESET</b></samp></span>, <span class="html"><samp class="guilabel"><b>EXTERNAL PRESET</b></samp></span>, and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> buttons to begin execution.</p>
<p>The BMDL is a dual-purpose loader that also permits loading an absolute binary program from the paper tape reader.
When the loader is copied into memory,
the disc portion is configured for the select code of the disc interface,
and the paper tape portion is configured for the select code of the paper tape reader interface.
The P register is automatically set to the starting address of the disc portion,
which starts at x7750
(i.e., offset 1750 within the highest page in memory).
Before execution,
the S register must be set as follows:</p>
<table class="bitmask-layout docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>15</p></th>
<th class="head"><p>14</p></th>
<th class="head"><p>13</p></th>
<th class="head"><p>12</p></th>
<th class="head"><p>11</p></th>
<th class="head"><p>10</p></th>
<th class="head"><p>9</p></th>
<th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>0</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td colspan="2"><p>head</p></td>
</tr>
</tbody>
</table>
<p>The loader stores the value 002055 into location 2055 octal,
stores a <code class="docutils literal notranslate"><span class="pre">HLT 11</span></code> into location 2056 octal,
and then reads 2047 words from cylinder 0 sector 0 of the specified head into memory starting at location 2011 octal.
Loader execution ends with one of the following instructions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 11</span></code> — the disc read failed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">JSB 2055,I</span></code> — the disc read succeeded.</p></li>
</ul>
<p>To execute the paper tape portion,
the P register may be reset to x7700 (offset 1700).
Loader execution ends with one of the following halt instructions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 11</span></code> — a checksum error occurred; <em>A</em> = the tape value, <em>B</em> = the calculated value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 55</span></code> — the program load address would overlay the loader.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 77</span></code> — the end of tape was reached with a successful read.</p></li>
</ul>
<p>For a 1000 M/E/F-Series CPU,
the commands are equivalent in hardware to setting the S register to select and configure the HP 12992B boot loader ROM,
pressing the <span class="html"><samp class="guilabel"><b>IBL</b></samp></span> button to copy the ROM into memory,
and, for the <span class="html"><samp><b>BOOT</b></samp></span> command,
pressing the <span class="html"><samp class="guilabel"><b>PRESET</b></samp></span> and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> buttons to begin execution.
The S register is preset as follows:</p>
<table class="bitmask-layout docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>15</p></th>
<th class="head"><p>14</p></th>
<th class="head"><p>13</p></th>
<th class="head"><p>12</p></th>
<th class="head"><p>11</p></th>
<th class="head"><p>10</p></th>
<th class="head"><p>9</p></th>
<th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>0</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td colspan="6"><p>DS select code</p></td>
<td colspan="3"><p>unchanged</p></td>
<td><p>0</p></td>
<td colspan="2"><p>head</p></td>
</tr>
</tbody>
</table>
<p>The head number is obtained from bits 1-0 of the existing S-register value when the loader is executed.
Bits 5-3 of the existing S-register value are also retained and are available to the boot extension program.</p>
<p>Loader execution ends with one of the following instructions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 30</span></code> — the drive is not ready.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">JSB 2055,I</span></code> — the disc read succeeded.</p></li>
</ul>
</section>
<section id="id10">
<h4><span class="sectnum">1.5.5.4. </span>Tracing and registers<a class="headerlink" href="#id10" title="Permalink to this heading">¶</a></h4>
<p>When a debug log has been established,
tracing may be configured by specifying one or more of the reporting level options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>RWSC</b></samp></span></p></td>
<td><p>Controller read, write, status, and control commands</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CMDS</b></samp></span></p></td>
<td><p>Interface commands received from the CPU</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CPU</b></samp></span></p></td>
<td><p>Words received from and sent to the CPU</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>BUF</b></samp></span></p></td>
<td><p>Data read from and written to the interface FIFO</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SERV</b></samp></span></p></td>
<td><p>Disc unit service events</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>RWSC</b></samp></span> option traces the read, write, status, and control commands executed by the disc controller.
The <span class="html"><samp><b>CMDS</b></samp></span> option traces the commands executed by the interface.
The <span class="html"><samp><b>CPU</b></samp></span> option traces words received from (control and write data) and sent to (status and read data) the CPU.
The <span class="html"><samp><b>BUF</b></samp></span> option traces loads into and unloads from the interface FIFO.
The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned via the interface.</p>
<p>Examples of the trace formats follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span><span class="n">DS</span>  <span class="n">rwsc</span><span class="p">:</span> <span class="n">Unit</span> <span class="mi">0</span> <span class="n">position</span> <span class="mi">0</span> <span class="n">cold</span> <span class="n">load</span> <span class="n">read</span> <span class="n">command</span> <span class="n">initiated</span>
<span class="o">&gt;&gt;</span><span class="n">DS</span>  <span class="n">rwsc</span><span class="p">:</span> <span class="n">Controller</span> <span class="n">address</span> <span class="n">record</span> <span class="n">command</span> <span class="n">completed</span>
<span class="o">&gt;&gt;</span><span class="n">DS</span>  <span class="n">cmds</span><span class="p">:</span> <span class="p">[</span><span class="n">STF</span><span class="p">]</span> <span class="n">Flag</span> <span class="nb">set</span>
<span class="o">&gt;&gt;</span><span class="n">DS</span>  <span class="n">cmds</span><span class="p">:</span> <span class="p">[</span><span class="n">LIx</span><span class="p">]</span> <span class="n">SRQ</span> <span class="n">cleared</span>
<span class="o">&gt;&gt;</span><span class="n">DS</span>   <span class="n">cpu</span><span class="p">:</span> <span class="p">[</span><span class="n">OTx</span><span class="p">,</span><span class="n">C</span><span class="p">]</span> <span class="n">Command</span> <span class="o">=</span> <span class="mi">001200</span>
<span class="o">&gt;&gt;</span><span class="n">DS</span>   <span class="n">cpu</span><span class="p">:</span> <span class="p">[</span><span class="n">EDT</span><span class="p">]</span> <span class="n">DCPC</span> <span class="n">transfer</span> <span class="n">ended</span>
<span class="o">&gt;&gt;</span><span class="n">DS</span>   <span class="n">buf</span><span class="p">:</span> <span class="n">Data</span> <span class="mi">020334</span> <span class="n">loaded</span> <span class="n">into</span> <span class="n">FIFO</span> <span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="o">&gt;&gt;</span><span class="n">DS</span>   <span class="n">buf</span><span class="p">:</span> <span class="n">Data</span> <span class="mi">170001</span> <span class="n">unloaded</span> <span class="kn">from</span> <span class="nn">FIFO</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="o">&gt;&gt;</span><span class="n">DS</span>  <span class="n">serv</span><span class="p">:</span> <span class="n">Unit</span> <span class="mi">0</span> <span class="n">delay</span> <span class="mi">2400</span> <span class="n">service</span> <span class="n">scheduled</span>
<span class="o">&gt;&gt;</span><span class="n">DS</span>  <span class="n">serv</span><span class="p">:</span> <span class="n">Controller</span> <span class="n">delay</span> <span class="mi">3</span> <span class="n">service</span> <span class="n">scheduled</span>
<span class="o">&gt;&gt;</span><span class="n">DS</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">021057</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">IOO</span> <span class="o">|</span> <span class="n">CLF</span> <span class="o">|</span> <span class="n">EDT</span> <span class="o">|</span> <span class="n">SIR</span>
<span class="o">&gt;&gt;</span><span class="n">DS</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">174163</span> <span class="k">with</span> <span class="n">signals</span> <span class="p">(</span><span class="n">none</span><span class="p">)</span>
</pre></div>
</div>
<p>The Disc Interface state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CMFOL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Command follows flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CMRDY</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Command ready flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FCNT</b></samp></span></p></td>
<td><p>5</p></td>
<td><p>10</p></td>
<td><p>FIFO fill count</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FIFO</b></samp></span> [0:15]</p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Data FIFO</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>STATE</b></samp></span></p></td>
<td><p>2</p></td>
<td><p>8</p></td>
<td><p>Controller state</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>OPCODE</b></samp></span></p></td>
<td><p>6</p></td>
<td><p>8</p></td>
<td><p>Current operation code</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>STATUS</b></samp></span></p></td>
<td><p>6</p></td>
<td><p>8</p></td>
<td><p>Last operation status</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>EOC</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>End of cylinder flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>EOD</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>End of data flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SPDU</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>S/P/D flags and last unit</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FLMASK</b></samp></span></p></td>
<td><p>4</p></td>
<td><p>8</p></td>
<td><p>File mask</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CYL</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>10</p></td>
<td><p>Controller cylinder</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>HEAD</b></samp></span></p></td>
<td><p>6</p></td>
<td><p>10</p></td>
<td><p>Controller head</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SECTOR</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>10</p></td>
<td><p>Controller sector</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>VFYCNT</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Verify counter</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>LASPOL</b></samp></span></p></td>
<td><p>3</p></td>
<td><p>8</p></td>
<td><p>Last unit polled</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>BUFFER</b></samp></span> [0:137]</p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Sector buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>INDEX</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>10</p></td>
<td><p>Buffer index</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>LENGTH</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>10</p></td>
<td><p>Buffer length</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>STIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td><p>Per-cylinder seek delay time</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>ITIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td><p>Intersector delay time</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td><p>Command response time</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td><p>Data transfer response time</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>WTIME</b></samp></span></p></td>
<td><p>31</p></td>
<td><p>10</p></td>
<td><p>Command wait time</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Interface control flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Interface flag flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Interface flag buffer flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SRQ</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Interface DCPC service request flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>EDT</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>End of data transfer flag</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>UCYL</b></samp></span> [0:9]</p></td>
<td><p>10</p></td>
<td><p>10</p></td>
<td><p>Current cylinder, drives 0-7, controller, and timer</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>UOP</b></samp></span> [0:9]</p></td>
<td><p>6</p></td>
<td><p>8</p></td>
<td><p>Current operation code, drives 0-7, controller, and timer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>USTAT</b></samp></span> [0:9]</p></td>
<td><p>8</p></td>
<td><p>2</p></td>
<td><p>Unit status, drives 0-7, controller, and timer</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>UPHASE</b></samp></span> [0:9]</p></td>
<td><p>3</p></td>
<td><p>8</p></td>
<td><p>Current command state, drives 0-7, controller, and timer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>UPOS</b></samp></span> [0:9]</p></td>
<td><p>32</p></td>
<td><p>8</p></td>
<td><p>Current byte position, drives 0-7, controller, and timer</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>UWAIT</b></samp></span> [0:9]</p></td>
<td><p>32</p></td>
<td><p>8</p></td>
<td><p>Scheduled wait delay, drives 0-7, controller, and timer</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="magnetic-tape-i-o-device-simulations">
<h2><span class="sectnum">1.6. </span>Magnetic tape I/O device simulations<a class="headerlink" href="#magnetic-tape-i-o-device-simulations" title="Permalink to this heading">¶</a></h2>
<p>The simulator provides these magnetic tape device interfaces and their associated peripherals:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#c-9-track-magnetic-tape-unit-interface">12559C 9-Track Magnetic Tape Unit Interface</a></p></li>
<li><p><a class="reference internal" href="#b-digital-magnetic-tape-unit-interface">13181B Digital Magnetic Tape Unit Interface</a></p></li>
<li><p><a class="reference internal" href="#id11">13183B Digital Magnetic Tape Unit Interface</a></p></li>
</ul>
<section id="c-9-track-magnetic-tape-unit-interface-with-one-3030-drive">
<span id="c-9-track-magnetic-tape-unit-interface"></span><h3><span class="sectnum">1.6.1. </span>12559C 9-Track Magnetic Tape Unit Interface with one 3030 drive<a class="headerlink" href="#c-9-track-magnetic-tape-unit-interface-with-one-3030-drive" title="Permalink to this heading">¶</a></h3>
<p>The 12559C 9-Track Magnetic Tape Unit Interface connects one HP 3030 800-bpi NRZI ½-inch magnetic tape drive to the HP computer family.
The interface consists of two Printed Circuit Assemblies installed in adjacent I/O slots.
The Data PCA is assigned the higher-priority (lower numbered) select code,
and the Control PCA is assigned the lower-priority select code.
The MTD and MTC devices simulate these PCAs</p>
<p>Attaching a tape image file simulates mounting a tape reel on a drive:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="p">{</span><span class="o">-</span><span class="n">R</span><span class="p">}</span> <span class="p">{</span><span class="o">-</span><span class="n">F</span><span class="p">}</span> <span class="n">MTC</span> <span class="p">{</span><span class="o">&lt;</span><span class="nb">format</span><span class="o">&gt;</span><span class="p">}</span> <span class="o">&lt;</span><span class="n">image</span><span class="o">-</span><span class="n">filename</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Adding the <span class="html"><samp><b>-R</b></samp></span> (read-only) switch is equivalent to mounting the tape without a write ring in place.
Adding the <span class="html"><samp><b>-F</b></samp></span> switch and a format identifier declares the tape image format to be used.
Supported formats are <code class="docutils literal notranslate"><span class="pre">SIMH</span></code>, <code class="docutils literal notranslate"><span class="pre">E11</span></code>, <code class="docutils literal notranslate"><span class="pre">TPC</span></code>, and <code class="docutils literal notranslate"><span class="pre">P7B</span></code>.
If the <span class="html"><samp><b>-F</b></samp></span> switch and a format identifier are not supplied,
then SIMH tape image format is used.
Note that erase gaps embedded in the tape image file are supported only in SIMH image format mode.</p>
<p>If the host operating system returns an error when reading or writing a tape image file,
the simulator will report the error to the simulation console, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HP</span> <span class="mi">2100</span><span class="p">:</span> <span class="n">Magtape</span> <span class="n">library</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span> <span class="n">error</span><span class="p">:</span> <span class="n">No</span> <span class="n">space</span> <span class="n">left</span> <span class="n">on</span> <span class="n">device</span>
</pre></div>
</div>
<p>If this or another tape library error occurs,
e.g., due to an illegal or damaged tape format,
the simulator stops with an appropriate error message.
Resuming the simulation will fail the tape operation with Tape Error status.
The target operating system will then react to this error as though the drive had encountered a bad tape block (CRCC or LRCC error).</p>
<p>Device options that may be specified with the <span class="html"><samp><b>SET MTC</b></samp></span> command are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>FORMAT=</b><var>fmt</var></samp></span></p></td>
<td><p>Set the tape image format; default is SIMH format</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select codes; defaults are 20/11</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device;</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device; default</p></td>
</tr>
</tbody>
</table>
<p>The tape image format for future <a class="reference internal" href="#attach"><span class="html"><samp><b>ATTACH</b></samp></span></a> commands may be set to one of the format identifiers listed above.
The unit must be detached when the format is set.</p>
<p>When entering the <span class="html"><samp><b>SC</b></samp></span> option,
specify the lower select code with either device name;
the higher select code will be set automatically,
and the cards will be assigned in the correct order.</p>
<p>Drive configuration may be displayed with the following commands:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW MTC</b></samp></span></p></td>
<td><p>Display the drive’s configuration</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SHOW MTC FORMAT</b></samp></span></p></td>
<td><p>Display the drive’s tape image format</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>BOOT</b></samp></span> command is not supported.
The 12559C is disabled by default.</p>
<p>When a debug log has been established,
tracing may be configured for each card separately by specifying the reporting level option:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned by the interface.</p>
<p>The Data PCA state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag buffer flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DBUF</b></samp></span> [0:65535]</p></td>
<td><p>8</p></td>
<td><p>8</p></td>
<td><p>Tape record buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>BPTR</b></samp></span></p></td>
<td><p>17</p></td>
<td><p>10</p></td>
<td><p>Buffer pointer</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>BMAX</b></samp></span></p></td>
<td><p>17</p></td>
<td><p>10</p></td>
<td><p>Buffer size for writes</p></td>
</tr>
</tbody>
</table>
<p>The Control PCA state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>FNC</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>8</p></td>
<td><p>Current function</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>STA</b></samp></span></p></td>
<td><p>9</p></td>
<td><p>8</p></td>
<td><p>Tape status</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>BUF</b></samp></span></p></td>
<td><p>8</p></td>
<td><p>8</p></td>
<td><p>Command buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Control flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag buffer flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DTF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Data transfer flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FSVC</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>First service flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>POS</b></samp></span></p></td>
<td><p>32</p></td>
<td><p>10</p></td>
<td><p>Tape position</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td><p>Command delay time</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>GTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td><p>Inter-record gap traversal time</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>XTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td><p>Inter-word transfer time</p></td>
</tr>
</tbody>
</table>
</section>
<section id="b-digital-magnetic-tape-unit-interface-with-four-7970b-drives-13183b-digital-magnetic-tape-unit-interface-with-four-7970e-drives">
<span id="id11"></span><span id="b-digital-magnetic-tape-unit-interface"></span><span id="b-digital-magnetic-tape-unit-interface-with-four-7970e-drives"></span><span id="b-digital-magnetic-tape-unit-interface-with-four-7970b-drives"></span><h3><span class="sectnum">1.6.2. </span>13181B Digital Magnetic Tape Unit Interface with four 7970B drives, 13183B Digital Magnetic Tape Unit Interface with four 7970E drives<a class="headerlink" href="#b-digital-magnetic-tape-unit-interface-with-four-7970b-drives-13183b-digital-magnetic-tape-unit-interface-with-four-7970e-drives" title="Permalink to this heading">¶</a></h3>
<p>The HP 13181B and 13183B Digital Magnetic Tape Unit Interfaces connect from one to four HP 7970B 800-bpi NRZI and HP 7970E 1600-bpi PE ½-inch magnetic tape drives,
respectively,
to the HP computer family.
Both interfaces consist of two Printed Circuit Assemblies installed in adjacent I/O slots.
The Data PCA is assigned the higher-priority (lower numbered) select code,
and the Control PCA is assigned the lower-priority select code.
The MSD and MSC devices simulate these PCAs.</p>
<p>Attaching a tape image file to a unit simulates mounting a tape reel on a drive:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATTACH</span> <span class="p">{</span><span class="o">-</span><span class="n">R</span><span class="p">}</span> <span class="p">{</span><span class="o">-</span><span class="n">F</span><span class="p">}</span> <span class="n">MSCn</span> <span class="p">{</span><span class="o">&lt;</span><span class="nb">format</span><span class="o">&gt;</span><span class="p">}</span> <span class="o">&lt;</span><span class="n">image</span><span class="o">-</span><span class="n">filename</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Adding the <span class="html"><samp><b>-R</b></samp></span> (read-only) switch is equivalent to mounting the tape without a write ring in place.
Adding the <span class="html"><samp><b>-F</b></samp></span> switch and a format identifier declares the tape image format to be used.
Supported formats are <code class="docutils literal notranslate"><span class="pre">SIMH</span></code>, <code class="docutils literal notranslate"><span class="pre">E11</span></code>, <code class="docutils literal notranslate"><span class="pre">TPC</span></code>, and <code class="docutils literal notranslate"><span class="pre">P7B</span></code>.
If the <span class="html"><samp><b>-F</b></samp></span> switch and a format identifier are not supplied,
then SIMH tape image format is used.
Note that erase gaps embedded in the tape image file are supported only in SIMH image format mode.</p>
<p>If the host operating system returns an error when reading or writing a tape image file,
the simulator will report the error to the simulation console, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HP</span> <span class="mi">2100</span><span class="p">:</span> <span class="n">Magtape</span> <span class="n">library</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span> <span class="n">error</span><span class="p">:</span> <span class="n">No</span> <span class="n">space</span> <span class="n">left</span> <span class="n">on</span> <span class="n">device</span>
</pre></div>
</div>
<p>If this or another tape library error occurs,
e.g., due to an illegal or damaged tape format,
the simulator stops with an appropriate error message.
Resuming the simulation will fail the tape operation with Tape Error status.
The target operating system will then react to this error as though the drive had encountered a bad tape block
(CRCC/LRCC or STE/MTE error).</p>
<p>A drive’s unit number is not set explicitly.
Instead,
the drive unit number is derived from the simulation unit number.
For example,
unit MSC0 responds to tape unit select number 0.
Pressing a different unit select button on a mounted drive is equivalent to detaching and reattaching the tape image file to the corresponding simulation unit.
Pressing the <span class="html"><samp class="guilabel"><b>OFF</b></samp></span> button is equivalent to setting the drive offline.</p>
<p>Device and unit options include configuring the drive type and timing, tape reel size, tape image format,
and the ability to set drives offline or online.
The command forms are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SET</span> <span class="n">MSC</span> <span class="o">&lt;</span><span class="n">device</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
<span class="n">SET</span> <span class="n">MSCn</span> <span class="o">&lt;</span><span class="n">unit</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
</pre></div>
</div>
<section id="id12">
<h4><span class="sectnum">1.6.2.1. </span>Device options<a class="headerlink" href="#id12" title="Permalink to this heading">¶</a></h4>
<p>The device options that may be specified are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>13181</b></samp></span></p></td>
<td><p>Use the 13181B interface and 7970B drives; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>13183</b></samp></span></p></td>
<td><p>Use the 13183B interface and 7970E drives</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FASTTIME</b></samp></span></p></td>
<td><p>Use optimized timing; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>REALTIME</b></samp></span></p></td>
<td><p>Use realistic timing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SC=</b><var>n</var></samp></span></p></td>
<td><p>Set the interface card select codes; defaults are 30/31</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>DEBUG=</b><var>option</var></samp></span></p></td>
<td><p>Enable tracing</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>NODEBUG</b></samp></span></p></td>
<td><p>Disable tracing; default</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the device; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the device</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>13181</b></samp></span> and <span class="html"><samp><b>13183</b></samp></span> options set the interface type and,
by implication,
the tape drive type.</p>
<p>When realistic timing is enabled,
the simulation accurately models the tape movement times
(in machine instructions).
For example,
rewinding takes longer if the tape is positioned farther from the load point.
Realistic timing is necessary to pass the magnetic tape diagnostic timing tests.</p>
<p>Optimized timing reduces the timing to the minimum necessary to operate correctly;
this is much faster than the real tape drive would operate.
In addition,
enabling optimized timing also omits the initial erase gap normally written after the BOT marker and the erase gap written by the Gap and File Mark (GFM),
which is executed as a Write File Mark (WFM) command.
This does not affect gaps written with the Write Gap command.</p>
<p>The delay times used by the simulator in <span class="html"><samp><b>FASTTIME</b></samp></span> mode may be set via the register interface.
The values may be adjusted as necessary to work around any HP software problems that are triggered by the unusually rapid tape operation.
Resetting the device with the <span class="html"><samp class="guilabel"><b>RESET -P</b></samp></span> (power-on reset) command restores the original optimized times.</p>
<p>When entering the <span class="html"><samp><b>SC</b></samp></span> option,
specify the lower select code with either device name;
the higher select code will be set automatically,
and the cards will be assigned in the correct order.</p>
<p>Device configuration may be displayed with the following commands:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW MSC</b></samp></span></p></td>
<td><p>Display the device and unit configuration</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SHOW MSC TIMING</b></samp></span></p></td>
<td><p>Display the timing mode</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW MSC TYPE</b></samp></span></p></td>
<td><p>Display the interface type</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id13">
<h4><span class="sectnum">1.6.2.2. </span>Unit options<a class="headerlink" href="#id13" title="Permalink to this heading">¶</a></h4>
<p>Unit options that may be specified for individual tape drives are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>OFFLINE</b></samp></span></p></td>
<td><p>Set the unit offline; default when detached</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ONLINE</b></samp></span></p></td>
<td><p>Set the unit online; default when attached</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>REEL=</b><var>n</var></samp></span></p></td>
<td><p>Set the reel size in feet; default is unlimited</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CAPACITY=</b><var>n</var></samp></span></p></td>
<td><p>Set the reel capacity in megabytes; default is unlimited</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FORMAT=</b><var>fmt</var></samp></span></p></td>
<td><p>Set the tape image format; default is SIMH format</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ENABLED</b></samp></span></p></td>
<td><p>Enable the unit; default</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DISABLED</b></samp></span></p></td>
<td><p>Disable the unit</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>OFFLINE</b></samp></span> and <span class="html"><samp><b>ONLINE</b></samp></span> options place a drive offline and online,
respectively.
The former provides a convenient method of setting a drive “down” without detaching the associated tape image file.</p>
<p>The reel size may be set to <code class="docutils literal notranslate"><span class="pre">600</span></code>-, <code class="docutils literal notranslate"><span class="pre">1200</span></code>-, or <code class="docutils literal notranslate"><span class="pre">2400</span></code>-foot capacity.
Setting the capacity or reel size to <code class="docutils literal notranslate"><span class="pre">0</span></code> specifies unlimited capacity;
in this configuration,
the interface never returns an end-of-tape indication.</p>
<p>The tape image format for future <a class="reference internal" href="#attach"><span class="html"><samp><b>ATTACH</b></samp></span></a> commands may be set to one of the format identifiers listed above.
The unit must be detached when the format is set.</p>
<p>Drive configuration may be displayed with the following commands:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW MSC</b><var>n</var></samp></span></p></td>
<td><p>Display the selected drive’s configuration</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SHOW MSC</b><var>n</var> <b>REEL</b></samp></span></p></td>
<td><p>Display the selected drive’s reel size or capacity</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>SHOW MSC</b><var>n</var> <b>CAPACITY</b></samp></span></p></td>
<td><p>Display the selected drive’s reel size or capacity</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>SHOW MSC</b><var>n</var> <b>FORMAT</b></samp></span></p></td>
<td><p>Display the selected drive’s tape image format</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id14">
<h4><span class="sectnum">1.6.2.3. </span><a class="reference internal" href="#load"><span class="html"><samp><b>LOAD</b></samp></span></a> and <a class="reference internal" href="#boot"><span class="html"><samp><b>BOOT</b></samp></span></a> commands<a class="headerlink" href="#id14" title="Permalink to this heading">¶</a></h4>
<p>The interface supports the <span class="html"><samp><b>LOAD {-S} MSC</b></samp></span> and <span class="html"><samp><b>BOOT{-S} MSC</b></samp></span> commands to load an absolute binary program into memory.
Depending on the current CPU model,
the <span class="html"><samp><b>LOAD</b></samp></span> command copies either the Basic Magnetic Tape Loader (BMTL) or the 12992D boot loader ROM into memory,
configures it for the Data interface’s select code,
and sets the P register to the loader’s starting address.
The <span class="html"><samp><b>BOOT</b></samp></span> command performs these same actions and then presets the system and begins execution.</p>
<p>For a 2100/14/15/16 CPU containing a previously configured BMTL in memory,
the commands are equivalent in hardware to setting the P register to the starting address,
pressing the <span class="html"><samp class="guilabel"><b>LOADER ENABLE</b></samp></span> button on the front panel,
and, for the <span class="html"><samp><b>BOOT</b></samp></span> command,
pressing the <span class="html"><samp class="guilabel"><b>INTERNAL PRESET</b></samp></span>, <span class="html"><samp class="guilabel"><b>EXTERNAL PRESET</b></samp></span>, and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> buttons to begin execution.
Before execution,
the S register must be set as follows:</p>
<table class="bitmask-layout docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>15</p></th>
<th class="head"><p>14</p></th>
<th class="head"><p>13</p></th>
<th class="head"><p>12</p></th>
<th class="head"><p>11</p></th>
<th class="head"><p>10</p></th>
<th class="head"><p>9</p></th>
<th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>0</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td colspan="6"><p>file number</p></td>
</tr>
</tbody>
</table>
<p>If S-register bits 5-0 are zero,
the file located at the current tape position is read.
If the bits are non-zero,
the tape is rewound,
and the file number (1 − <em>n</em>) specified by the bits is read.
The tape format must be absolute binary,
and a tape mark must end each file.
Loader execution ends with one of the following instructions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 00</span></code> — a tape read (parity) error occurred.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 11</span></code> — a checksum error occurred; <em>A</em> = the calculated value, <em>B</em> = the tape value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 77</span></code> — the end of the file was reached with a successful read.</p></li>
</ul>
<p>For a 1000 M/E/F-Series CPU,
the commands are equivalent in hardware to setting the S register to select and configure the HP 12992D boot loader ROM,
pressing the <span class="html"><samp class="guilabel"><b>IBL</b></samp></span> button to copy the ROM into memory,
and, for the <span class="html"><samp><b>BOOT</b></samp></span> command,
pressing the <span class="html"><samp class="guilabel"><b>PRESET</b></samp></span> and <span class="html"><samp class="guilabel"><b>RUN</b></samp></span> buttons to begin execution.
The S register is preset as follows:</p>
<table class="bitmask-layout docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>15</p></th>
<th class="head"><p>14</p></th>
<th class="head"><p>13</p></th>
<th class="head"><p>12</p></th>
<th class="head"><p>11</p></th>
<th class="head"><p>10</p></th>
<th class="head"><p>9</p></th>
<th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>0</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td colspan="6"><p>MSD select code</p></td>
<td colspan="3"><p>unchanged</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>⬤</p></td>
</tr>
</tbody>
</table>
<p>If the <span class="html"><samp><b>-S</b></samp></span> switch is specified,
bit 0 is set to 1 to rewind the tape and then load the file number (1 − <em>n</em>) specified in the A register.
If <span class="html"><samp><b>-S</b></samp></span> is not specified,
then bit 0 is set to 0 to load the file located at the current tape position.
Bits 5-3 of the existing S-register value are retained when the loader is executed and are available to the loaded program.</p>
<p>Loader execution ends with one of the following halt instructions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 00</span></code> — a tape read (parity) error occurred.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 11</span></code> — a checksum error occurred; <em>A</em> = the calculated value, <em>B</em> = the tape value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HLT 77</span></code> — the end of the file was reached with a successful read.</p></li>
</ul>
</section>
<section id="id15">
<h4><span class="sectnum">1.6.2.4. </span>Tracing and registers<a class="headerlink" href="#id15" title="Permalink to this heading">¶</a></h4>
<p>When a debug log has been established,
tracing may be configured by specifying one or more of the reporting level options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Reporting level</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>CMDS</b></samp></span></p></td>
<td><p>Controller command initiations and completions</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>RWS</b></samp></span></p></td>
<td><p>Tape reads, writes, and status returns</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CPU</b></samp></span></p></td>
<td><p>Words received from and sent to the CPU</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>IOBUS</b></samp></span></p></td>
<td><p>I/O bus signals and data words received and returned</p></td>
</tr>
</tbody>
</table>
<p>The <span class="html"><samp><b>CMDS</b></samp></span> option traces the commands executed by the tape controller.
The <span class="html"><samp><b>RWS</b></samp></span> option traces the read, write, and status commands executed by the controller.
The <span class="html"><samp><b>CPU</b></samp></span> option traces words received from (control and write data) and sent to (status and read data) the CPU.
The <span class="html"><samp><b>IOBUS</b></samp></span> option traces the I/O backplane signals and data received and returned via the interface.</p>
<p>Examples of the trace formats follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span><span class="n">MSC</span>  <span class="n">cmds</span><span class="p">:</span> <span class="n">Unit</span> <span class="mi">0</span> <span class="n">command</span> <span class="mi">023</span> <span class="p">(</span><span class="n">RRF</span><span class="p">)</span> <span class="n">scheduled</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">time</span> <span class="o">=</span> <span class="mi">1001</span>
<span class="o">&gt;&gt;</span><span class="n">MSC</span>  <span class="n">cmds</span><span class="p">:</span> <span class="n">Unit</span> <span class="mi">0</span> <span class="n">command</span> <span class="mi">023</span> <span class="p">(</span><span class="n">RRF</span><span class="p">)</span> <span class="n">complete</span>
<span class="o">&gt;&gt;</span><span class="n">MSC</span>   <span class="n">rws</span><span class="p">:</span> <span class="n">Unit</span> <span class="mi">0</span> <span class="n">read</span> <span class="mi">33</span> <span class="n">word</span> <span class="n">record</span>
<span class="o">&gt;&gt;</span><span class="n">MSC</span>   <span class="n">rws</span><span class="p">:</span> <span class="n">Unit</span> <span class="mi">0</span> <span class="n">tape</span> <span class="n">library</span> <span class="n">status</span> <span class="o">=</span> <span class="mi">1</span>
<span class="o">&gt;&gt;</span><span class="n">MSC</span>   <span class="n">cpu</span><span class="p">:</span> <span class="n">Command</span> <span class="o">=</span> <span class="mi">000101</span>
<span class="o">&gt;&gt;</span><span class="n">MSC</span>   <span class="n">cpu</span><span class="p">:</span> <span class="n">Status</span> <span class="o">=</span> <span class="mi">000004</span>
<span class="o">&gt;&gt;</span><span class="n">MSC</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Received</span> <span class="n">data</span> <span class="mi">000000</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">STC</span> <span class="o">|</span> <span class="n">CLF</span> <span class="o">|</span> <span class="n">SIR</span> <span class="o">|</span> <span class="n">PRH</span>
<span class="o">&gt;&gt;</span><span class="n">MSC</span> <span class="n">iobus</span><span class="p">:</span> <span class="n">Returned</span> <span class="n">data</span> <span class="mi">000020</span> <span class="k">with</span> <span class="n">signals</span> <span class="n">PRL</span>
</pre></div>
</div>
<p>The Data PCA state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>BUF</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Data buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Control flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag buffer flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>DBUF</b></samp></span> [0:65535]</p></td>
<td><p>8</p></td>
<td><p>8</p></td>
<td><p>Tape record buffer</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>BPTR</b></samp></span></p></td>
<td><p>17</p></td>
<td><p>10</p></td>
<td><p>Buffer pointer</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>BMAX</b></samp></span></p></td>
<td><p>17</p></td>
<td><p>10</p></td>
<td><p>Buffer size for writes</p></td>
</tr>
</tbody>
</table>
<p>The Control PCA state contains these registers:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Radix</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="html"><samp><b>STA</b></samp></span></p></td>
<td><p>12</p></td>
<td><p>8</p></td>
<td><p>Tape status</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>BUF</b></samp></span></p></td>
<td><p>16</p></td>
<td><p>8</p></td>
<td><p>Command buffer</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>USEL</b></samp></span></p></td>
<td><p>2</p></td>
<td><p>8</p></td>
<td><p>Currently selected unit</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FSVC</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>First service flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>CTL</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Control flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>FLG</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag flip-flop</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>FBF</b></samp></span></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>Flag buffer flip-flop</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>POS</b></samp></span> [0:3]</p></td>
<td><p>32</p></td>
<td><p>10</p></td>
<td><p>Tape position, drives 0-3</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>BTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td><p>BOT start delay time</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>CTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td><p>Command delay time</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>GTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td><p>Gap traversal time</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>ITIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td><p>IRG traversal time</p></td>
</tr>
<tr class="row-even"><td><p><span class="html"><samp><b>RTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td><p>Rewind initiation time</p></td>
</tr>
<tr class="row-odd"><td><p><span class="html"><samp><b>XTIME</b></samp></span></p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td><p>Inter-word transfer time</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Python</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="simh_doc.html">SimH Users' Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="simh_swre.html">SimH Sample Software Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="simh_faq.html">SimH FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="nova_doc.html">Data General Nova</a></li>
<li class="toctree-l1"><a class="reference internal" href="pdp1_doc.html">Digital Equipment Corporation PDP-1</a></li>
<li class="toctree-l1"><a class="reference internal" href="pdp18b_doc.html">Digital Equipment Corporation PDP-4, PDP-7, PDP-9, PDP-15</a></li>
<li class="toctree-l1"><a class="reference internal" href="pdp8_doc.html">Digital Equipment Corporation PDP-8</a></li>
<li class="toctree-l1"><a class="reference internal" href="pdp10_doc.html">Digital Equipment Corporation PDP-10</a></li>
<li class="toctree-l1"><a class="reference internal" href="pdp11_doc.html">Digital Equipment Corporation PDP-11</a></li>
<li class="toctree-l1"><a class="reference internal" href="vax780_doc.html">Digital Equipment Corporation VAX-11/780</a></li>
<li class="toctree-l1"><a class="reference internal" href="vax_doc.html">Digital Equipment Corporation MicroVAX 3900</a></li>
<li class="toctree-l1"><a class="reference internal" href="gri_doc.html">GRI Computer Corporation GRI-909</a></li>
<li class="toctree-l1"><a class="reference internal" href="i1401_doc.html">IBM 1401</a></li>
<li class="toctree-l1"><a class="reference internal" href="i1620_doc.html">IBM 1620</a></li>
<li class="toctree-l1"><a class="reference internal" href="i7094_doc.html">IBM 7094</a></li>
<li class="toctree-l1"><a class="reference internal" href="id_doc.html">Interdata (Perkin Elmer) 16b and 32b systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="h316_doc.html">Honeywell H316/H516</a></li>
<li class="toctree-l1"><a class="reference internal" href="lgp_doc.html">Royal-Mcbee LGP-30 (and LGP-21)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sds_doc.html">Scientific Data Systems SDS-940</a></li>
<li class="toctree-l1"><a class="reference internal" href="sigma_doc.html">Xerox Data Systems Sigma 32b systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="tx0_doc.html">TX-0 simulator usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="simh_breakpoints.html">The SIMH breakpoint subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="simh_magtape.html">SIMH magtape representation and handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="simh_vmio.html">Adding an I/O device to a SIMH virtual machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="simulators_acm_queue_2004.html">Simulators: virtual machines of the past and future</a></li>
<li class="toctree-l1"><a class="reference internal" href="Summary%20of%20IMP%20IO%20Device%20Codes.html">Summary of I/O commands for the Arpanet IMP</a></li>
<li class="toctree-l1"><a class="reference internal" href="ssem_doc.html">SSEM simulator usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="swtp6800_doc.html">SWTP 6800 simulator usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="simh.html">Writing a simulator for the SIMH system</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/hp2100_doc.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>